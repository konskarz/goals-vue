import{a as Je,Q as et}from"./QToolbar-8bd76342.js";import{a as Y,b as se,Q as Ce}from"./QItem-27a2ae1c.js";import{c as Z,D as me,E as _e,U as tt,f as S,h as y,S as ee,g as te,aw as Ke,r as z,ax as at,w as De,b as nt,ay as rt,az as it,ae as X,aA as lt,C as He,J as ot,aB as st,aC as Me,aD as Be,a7 as A,a1 as $,a2 as k,aE as Ve,af as qe,aF as O,a8 as p,aG as Re,d as ut,e as Te,j as ct,aH as dt,aI as ft,I as ht,aJ as Ae,aK as gt,a9 as fe,aL as vt,aa as ue,aM as ge,ab as je,ad as ze,ac as Ue,aN as Ee,aO as Fe}from"./index-f2c81c03.js";import{Q as Ye}from"./QList-f6a53a0d.js";import{u as mt,a as _t,Q as We}from"./QMenu-4c49d921.js";import{u as yt,Q as bt}from"./GoalStore-f3234f8a.js";import{u as Pe}from"./TaskStore-d1cc8b22.js";import{Q as pt}from"./QSlideTransition-1bcaf2a9.js";import{Q as kt}from"./QField-80613958.js";import{d as he}from"./date-25810c50.js";import{_ as St,u as xt}from"./NumberInput-b8850fe7.js";import"./format-ff5bcb16.js";const wt=Z({name:"QTimeline",props:{...me,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:s}){const u=te(),o=_e(e,u.proxy.$q);tt(Ke,e);const t=S(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(o.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:t.value},ee(s.default))}}),Tt=["none","strict","leaf","leaf-filtered"],Et=Z({name:"QTree",props:{...me,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Tt.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:s,emit:u}){const{proxy:o}=te(),{$q:t}=o,l=_e(e,t),c=z({}),d=z(e.ticked||[]),m=z(e.expanded||[]);let _={};at(()=>{_={}});const b=S(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(l.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),q=S(()=>e.selected!==void 0),F=S(()=>e.icon||t.iconSet.tree.icon),M=S(()=>e.controlColor||e.color),K=S(()=>e.textColor!==void 0?` text-${e.textColor}`:""),H=S(()=>{const r=e.selectedColor||e.color;return r?` text-${r}`:""}),N=S(()=>e.filterMethod!==void 0?e.filterMethod:(r,f)=>{const n=f.toLowerCase();return r[e.labelKey]&&r[e.labelKey].toLowerCase().indexOf(n)>-1}),Q=S(()=>{const r={},f=(n,v)=>{const h=n.tickStrategy||(v?v.tickStrategy:e.tickStrategy),g=n[e.nodeKey],I=n[e.childrenKey]&&n[e.childrenKey].length>0,B=n.disabled!==!0&&q.value===!0&&n.selectable!==!1,L=n.disabled!==!0&&n.expandable!==!1,J=h!=="none",j=h==="strict",V=h==="leaf-filtered",ie=h==="leaf"||h==="leaf-filtered";let le=n.disabled!==!0&&n.tickable!==!1;ie===!0&&le===!0&&v&&v.tickable!==!0&&(le=!1);let U=n.lazy;U===!0&&c.value[g]!==void 0&&Array.isArray(n[e.childrenKey])===!0&&(U=c.value[g]);const w={key:g,parent:v,isParent:I,lazy:U,disabled:n.disabled,link:n.disabled!==!0&&(B===!0||L===!0&&(I===!0||U===!0)),children:[],matchesFilter:e.filter?N.value(n,e.filter):!0,selected:g===e.selected&&B===!0,selectable:B,expanded:I===!0?m.value.includes(g):!1,expandable:L,noTick:n.noTick===!0||j!==!0&&U&&U!=="loaded",tickable:le,tickStrategy:h,hasTicking:J,strictTicking:j,leafFilteredTicking:V,leafTicking:ie,ticked:j===!0?d.value.includes(g):I===!0?!1:d.value.includes(g)};if(r[g]=w,I===!0&&(w.children=n[e.childrenKey].map(R=>f(R,w)),e.filter&&(w.matchesFilter!==!0?w.matchesFilter=w.children.some(R=>R.matchesFilter):w.noTick!==!0&&w.disabled!==!0&&w.tickable===!0&&V===!0&&w.children.every(R=>R.matchesFilter!==!0||R.noTick===!0||R.tickable!==!0)===!0&&(w.tickable=!1)),w.matchesFilter===!0&&(w.noTick!==!0&&j!==!0&&w.children.every(R=>R.noTick)===!0&&(w.noTick=!0),ie))){if(w.ticked=!1,w.indeterminate=w.children.some(R=>R.indeterminate===!0),w.tickable=w.tickable===!0&&w.children.some(R=>R.tickable),w.indeterminate!==!0){const R=w.children.reduce((oe,xe)=>xe.ticked===!0?oe+1:oe,0);R===w.children.length?w.ticked=!0:R>0&&(w.indeterminate=!0)}w.indeterminate===!0&&(w.indeterminateNextState=w.children.every(R=>R.tickable!==!0||R.ticked!==!0))}return w};return e.nodes.forEach(n=>f(n,null)),r});De(()=>e.ticked,r=>{d.value=r}),De(()=>e.expanded,r=>{m.value=r});function G(r){const f=[].reduce,n=(v,h)=>{if(v||!h)return v;if(Array.isArray(h)===!0)return f.call(Object(h),n,v);if(h[e.nodeKey]===r)return h;if(h[e.childrenKey])return n(null,h[e.childrenKey])};return n(null,e.nodes)}function ye(){return d.value.map(r=>G(r))}function be(){return m.value.map(r=>G(r))}function pe(r){return r&&Q.value[r]?Q.value[r].expanded:!1}function ke(){e.expanded!==void 0?u("update:expanded",[]):m.value=[]}function ce(){const r=m.value,f=n=>{n[e.childrenKey]&&n[e.childrenKey].length>0&&n.expandable!==!1&&n.disabled!==!0&&(r.push(n[e.nodeKey]),n[e.childrenKey].forEach(f))};e.nodes.forEach(f),e.expanded!==void 0?u("update:expanded",r):m.value=r}function ae(r,f,n=G(r),v=Q.value[r]){if(v.lazy&&v.lazy!=="loaded"){if(v.lazy==="loading")return;c.value[r]="loading",Array.isArray(n[e.childrenKey])!==!0&&(n[e.childrenKey]=[]),u("lazyLoad",{node:n,key:r,done:h=>{c.value[r]="loaded",n[e.childrenKey]=Array.isArray(h)===!0?h:[],nt(()=>{const g=Q.value[r];g&&g.isParent===!0&&de(r,!0)})},fail:()=>{delete c.value[r],n[e.childrenKey].length===0&&delete n[e.childrenKey]}})}else v.isParent===!0&&v.expandable===!0&&de(r,f)}function de(r,f){let n=m.value;const v=e.expanded!==void 0;if(v===!0&&(n=n.slice()),f){if(e.accordion&&Q.value[r]){const h=[];Q.value[r].parent?Q.value[r].parent.children.forEach(g=>{g.key!==r&&g.expandable===!0&&h.push(g.key)}):e.nodes.forEach(g=>{const I=g[e.nodeKey];I!==r&&h.push(I)}),h.length>0&&(n=n.filter(g=>h.includes(g)===!1))}n=n.concat([r]).filter((h,g,I)=>I.indexOf(h)===g)}else n=n.filter(h=>h!==r);v===!0?u("update:expanded",n):m.value=n}function Se(r){return r&&Q.value[r]?Q.value[r].ticked:!1}function W(r,f){let n=d.value;const v=e.ticked!==void 0;v===!0&&(n=n.slice()),f?n=n.concat(r).filter((h,g,I)=>I.indexOf(h)===g):n=n.filter(h=>r.includes(h)===!1),v===!0&&u("update:ticked",n)}function ne(r,f,n){const v={tree:o,node:r,key:n,color:e.color,dark:l.value};return Me(v,"expanded",()=>f.expanded,h=>{h!==f.expanded&&ae(n,h)}),Me(v,"ticked",()=>f.ticked,h=>{h!==f.ticked&&W([n],h)}),v}function re(r){return(e.filter?r.filter(f=>Q.value[f[e.nodeKey]].matchesFilter):r).map(f=>T(f))}function i(r){if(r.icon!==void 0)return y(X,{class:"q-tree__icon q-mr-sm",name:r.icon,color:r.iconColor});const f=r.img||r.avatar;if(f)return y("img",{class:`q-tree__${r.img?"img":"avatar"} q-mr-sm`,src:f})}function a(){u("afterShow")}function C(){u("afterHide")}function T(r){const f=r[e.nodeKey],n=Q.value[f],v=r.header&&s[`header-${r.header}`]||s["default-header"],h=n.isParent===!0?re(r[e.childrenKey]):[],g=h.length>0||n.lazy&&n.lazy!=="loaded";let I=r.body&&s[`body-${r.body}`]||s["default-body"];const B=v!==void 0||I!==void 0?ne(r,n,f):null;return I!==void 0&&(I=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:K.value},[I(B)])])),y("div",{key:f,class:`q-tree__node relative-position q-tree__node--${g===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(n.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(n.selected===!0?" q-tree__node--selected":"")+(n.disabled===!0?" q-tree__node--disabled":""),tabindex:n.link===!0?0:-1,onClick:L=>{D(r,n,L)},onKeypress(L){rt(L)!==!0&&(L.keyCode===13?D(r,n,L,!0):L.keyCode===32&&x(r,n,L,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:L=>{_[n.key]=L}}),n.lazy==="loading"?y(it,{class:"q-tree__spinner",color:M.value}):g===!0?y(X,{class:"q-tree__arrow"+(n.expanded===!0?" q-tree__arrow--rotate":""),name:F.value,onClick(L){x(r,n,L)}}):null,n.hasTicking===!0&&n.noTick!==!0?y(lt,{class:"q-tree__tickbox",modelValue:n.indeterminate===!0?null:n.ticked,color:M.value,dark:l.value,dense:!0,keepColor:!0,disable:n.tickable!==!0,onKeydown:He,"onUpdate:modelValue":L=>{E(n,L)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(n.selected===!0?H.value:K.value)},[v?v(B):[i(r),y("div",r[e.labelKey])]])]),g===!0?e.noTransition===!0?y("div",{class:"q-tree__node-collapsible"+K.value,key:`${f}__q`},[I,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},n.expanded?h:null)]):y(pt,{duration:e.duration,onShow:a,onHide:C},()=>ot(y("div",{class:"q-tree__node-collapsible"+K.value,key:`${f}__q`},[I,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},h)]),[[st,n.expanded]])):I])}function P(r){const f=_[r];f&&f.focus()}function D(r,f,n,v){v!==!0&&P(f.key),q.value&&f.selectable?e.noSelectionUnset===!1?u("update:selected",f.key!==e.selected?f.key:null):f.key!==e.selected&&u("update:selected",f.key===void 0?null:f.key):x(r,f,n,v),typeof r.handler=="function"&&r.handler(r)}function x(r,f,n,v){n!==void 0&&He(n),v!==!0&&P(f.key),ae(f.key,!f.expanded,r,f)}function E(r,f){if(r.indeterminate===!0&&(f=r.indeterminateNextState),r.strictTicking)W([r.key],f);else if(r.leafTicking){const n=[],v=h=>{h.isParent?(f!==!0&&h.noTick!==!0&&h.tickable===!0&&n.push(h.key),h.leafTicking===!0&&h.children.forEach(v)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&n.push(h.key)};v(r),W(n,f)}}return e.defaultExpandAll===!0&&ce(),Object.assign(o,{getNodeByKey:G,getTickedNodes:ye,getExpandedNodes:be,isExpanded:pe,collapseAll:ke,expandAll:ce,setExpanded:ae,isTicked:Se,setTicked:W}),()=>{const r=re(e.nodes);return y("div",{class:b.value},r.length===0?e.filter?e.noResultsLabel||t.lang.tree.noResults:e.noNodesLabel||t.lang.tree.noNodes:r)}}}),Ct=Z({name:"QBanner",props:{...me,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:s}){const{proxy:{$q:u}}=te(),o=_e(e,u),t=S(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),l=S(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const c=[y("div",{class:"q-banner__avatar col-auto row items-center self-start"},ee(s.avatar)),y("div",{class:"q-banner__content col text-body2"},ee(s.default))],d=ee(s.action);return d!==void 0&&c.push(y("div",{class:l.value},d)),y("div",{class:t.value+(e.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},c)}}}),Dt=Z({name:"QPopupProxy",props:{...mt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:s,emit:u,attrs:o}){const{proxy:t}=te(),{$q:l}=t,c=z(!1),d=z(null),m=S(()=>parseInt(e.breakpoint,10)),{canShow:_}=_t({showing:c});function b(){return l.screen.width<m.value||l.screen.height<m.value?"dialog":"menu"}const q=z(b()),F=S(()=>q.value==="menu"?{maxHeight:"99vh"}:{});De(()=>b(),H=>{c.value!==!0&&(q.value=H)});function M(H){c.value=!0,u("show",H)}function K(H){c.value=!1,q.value=b(),u("hide",H)}return Object.assign(t,{show(H){_(H)===!0&&d.value.show(H)},hide(H){d.value.hide(H)},toggle(H){d.value.toggle(H)}}),Me(t,"currentComponent",()=>({type:q.value,ref:d.value})),()=>{const H={ref:d,...F.value,...o,onShow:M,onHide:K};let N;return q.value==="dialog"?N=Be:(N=We,Object.assign(H,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(N,H,s.default)}}}),Mt={class:"self-center full-width no-outline ellipsis",tabindex:"0"},qt={__name:"GoalTreeSelect",props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],setup(e,{emit:s}){const u=e,o=S({get(){return u.modelValue},set(c){s("update:modelValue",c)}}),t=yt(),l=S(()=>u.modelValue?t.getItem(u.modelValue).name:null);return(c,d)=>(A(),$(kt,{modelValue:O(o),"onUpdate:modelValue":d[1]||(d[1]=m=>Re(o)?o.value=m:null),clearable:"","clear-icon":"close"},{control:k(()=>[Ve("div",Mt,qe(O(l)),1)]),append:k(()=>[p(X,{name:"keyboard_arrow_down"})]),default:k(()=>[p(Dt,{fit:"","auto-close":""},{default:k(()=>[p(Ct,null,{default:k(()=>[p(Et,{selected:O(o),"onUpdate:selected":d[0]||(d[0]=m=>Re(o)?o.value=m:null),nodes:O(t).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Pt=Z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:s}){const u=ut(Ke,Te);if(u===Te)return console.error("QTimelineEntry needs to be child of QTimeline"),Te;const o=S(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),t=S(()=>`q-timeline__dot text-${e.color||u.color}`),l=S(()=>u.layout==="comfortable"&&u.side==="left");return()=>{const c=ct(s.default,[]);if(e.body!==void 0&&c.unshift(e.body),e.heading===!0){const _=[y("div"),y("div"),y(e.tag,{class:"q-timeline__heading-title"},c)];return y("div",{class:"q-timeline__heading"},l.value===!0?_.reverse():_)}let d;e.icon!==void 0?d=[y(X,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(d=[y("img",{class:"q-timeline__dot-img",src:e.avatar})]);const m=[y("div",{class:"q-timeline__subtitle"},[y("span",{},ee(s.subtitle,[e.subtitle]))]),y("div",{class:t.value},d),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},ee(s.title,[e.title]))].concat(c))];return y("li",{class:o.value},l.value===!0?m.reverse():m)}}}),It={xs:2,sm:4,md:6,lg:10,xl:14};function $e(e,s,u){return{transform:s===!0?`translateX(${u.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Ot=Z({name:"QLinearProgress",props:{...me,...dt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:s}){const{proxy:u}=te(),o=_e(e,u.$q),t=ft(e,It),l=S(()=>e.indeterminate===!0||e.query===!0),c=S(()=>e.reverse!==e.query),d=S(()=>({...t.value!==null?t.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=S(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),_=S(()=>$e(e.buffer!==void 0?e.buffer:1,c.value,u.$q)),b=S(()=>`with${e.instantFeedback===!0?"out":""}-transition`),q=S(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${b.value} q-linear-progress__track--${o.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),F=S(()=>$e(l.value===!0?1:e.value,c.value,u.$q)),M=S(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${b.value} q-linear-progress__model--${l.value===!0?"in":""}determinate`),K=S(()=>({width:`${e.value*100}%`})),H=S(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${b.value}`);return()=>{const N=[y("div",{class:q.value,style:_.value}),y("div",{class:M.value,style:F.value})];return e.stripe===!0&&l.value===!1&&N.push(y("div",{class:H.value,style:K.value})),y("div",{class:m.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ht(s.default,N))}}});var Ie={};(function e(s,u,o,t){var l=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function c(){}function d(i){var a=u.exports.Promise,C=a!==void 0?a:s.Promise;return typeof C=="function"?new C(i):(i(c,c),null)}var m=function(){var i=Math.floor(16.666666666666668),a,C,T={},P=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(D){var x=Math.random();return T[x]=requestAnimationFrame(function E(r){P===r||P+i-1<r?(P=r,delete T[x],D()):T[x]=requestAnimationFrame(E)}),x},C=function(D){T[D]&&cancelAnimationFrame(T[D])}):(a=function(D){return setTimeout(D,i)},C=function(D){return clearTimeout(D)}),{frame:a,cancel:C}}(),_=function(){var i,a,C={};function T(P){function D(x,E){P.postMessage({options:x||{},callback:E})}P.init=function(E){var r=E.transferControlToOffscreen();P.postMessage({canvas:r},[r])},P.fire=function(E,r,f){if(a)return D(E,null),a;var n=Math.random().toString(36).slice(2);return a=d(function(v){function h(g){g.data.callback===n&&(delete C[n],P.removeEventListener("message",h),a=null,f(),v())}P.addEventListener("message",h),D(E,n),C[n]=h.bind(null,{data:{callback:n}})}),a},P.reset=function(){P.postMessage({reset:!0});for(var E in C)C[E](),delete C[E]}}return function(){if(i)return i;if(!o&&l){var P=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([P])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",D),null}T(i)}return i}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function q(i,a){return a?a(i):i}function F(i){return i!=null}function M(i,a,C){return q(i&&F(i[a])?i[a]:b[a],C)}function K(i){return i<0?0:Math.floor(i)}function H(i,a){return Math.floor(Math.random()*(a-i))+i}function N(i){return parseInt(i,16)}function Q(i){return i.map(G)}function G(i){var a=String(i).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:N(a.substring(0,2)),g:N(a.substring(2,4)),b:N(a.substring(4,6))}}function ye(i){var a=M(i,"origin",Object);return a.x=M(a,"x",Number),a.y=M(a,"y",Number),a}function be(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function pe(i){var a=i.getBoundingClientRect();i.width=a.width,i.height=a.height}function ke(i){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=i,a}function ce(i,a,C,T,P,D,x,E,r){i.save(),i.translate(a,C),i.rotate(D),i.scale(T,P),i.arc(0,0,1,x,E,r),i.restore()}function ae(i){var a=i.angle*(Math.PI/180),C=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-a+(.5*C-Math.random()*C),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar}}function de(i,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.wobble+=a.wobbleSpeed,a.velocity*=a.decay,a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble);var C=a.tick++/a.totalTicks,T=a.x+a.random*a.tiltCos,P=a.y+a.random*a.tiltSin,D=a.wobbleX+a.random*a.tiltCos,x=a.wobbleY+a.random*a.tiltSin;if(i.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-C)+")",i.beginPath(),a.shape==="circle")i.ellipse?i.ellipse(a.x,a.y,Math.abs(D-T)*a.ovalScalar,Math.abs(x-P)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):ce(i,a.x,a.y,Math.abs(D-T)*a.ovalScalar,Math.abs(x-P)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var E=Math.PI/2*3,r=4*a.scalar,f=8*a.scalar,n=a.x,v=a.y,h=5,g=Math.PI/h;h--;)n=a.x+Math.cos(E)*f,v=a.y+Math.sin(E)*f,i.lineTo(n,v),E+=g,n=a.x+Math.cos(E)*r,v=a.y+Math.sin(E)*r,i.lineTo(n,v),E+=g;else i.moveTo(Math.floor(a.x),Math.floor(a.y)),i.lineTo(Math.floor(a.wobbleX),Math.floor(P)),i.lineTo(Math.floor(D),Math.floor(x)),i.lineTo(Math.floor(T),Math.floor(a.wobbleY));return i.closePath(),i.fill(),a.tick<a.totalTicks}function Se(i,a,C,T,P){var D=a.slice(),x=i.getContext("2d"),E,r,f=d(function(n){function v(){E=r=null,x.clearRect(0,0,T.width,T.height),P(),n()}function h(){o&&!(T.width===t.width&&T.height===t.height)&&(T.width=i.width=t.width,T.height=i.height=t.height),!T.width&&!T.height&&(C(i),T.width=i.width,T.height=i.height),x.clearRect(0,0,T.width,T.height),D=D.filter(function(g){return de(x,g)}),D.length?E=m.frame(h):v()}E=m.frame(h),r=v});return{addFettis:function(n){return D=D.concat(n),f},canvas:i,promise:f,reset:function(){E&&m.cancel(E),r&&r()}}}function W(i,a){var C=!i,T=!!M(a||{},"resize"),P=M(a,"disableForReducedMotion",Boolean),D=l&&!!M(a||{},"useWorker"),x=D?_():null,E=C?be:pe,r=i&&x?!!i.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,n;function v(g,I,B){for(var L=M(g,"particleCount",K),J=M(g,"angle",Number),j=M(g,"spread",Number),V=M(g,"startVelocity",Number),ie=M(g,"decay",Number),le=M(g,"gravity",Number),U=M(g,"drift",Number),w=M(g,"colors",Q),R=M(g,"ticks",Number),oe=M(g,"shapes"),xe=M(g,"scalar"),Oe=ye(g),Le=L,we=[],Ze=i.width*Oe.x,Ge=i.height*Oe.y;Le--;)we.push(ae({x:Ze,y:Ge,angle:J,spread:j,startVelocity:V,color:w[Le%w.length],shape:oe[H(0,oe.length)],ticks:R,decay:ie,gravity:le,drift:U,scalar:xe}));return n?n.addFettis(we):(n=Se(i,we,E,I,B),n.promise)}function h(g){var I=P||M(g,"disableForReducedMotion",Boolean),B=M(g,"zIndex",Number);if(I&&f)return d(function(V){V()});C&&n?i=n.canvas:C&&!i&&(i=ke(B),document.body.appendChild(i)),T&&!r&&E(i);var L={width:i.width,height:i.height};x&&!r&&x.init(i),r=!0,x&&(i.__confetti_initialized=!0);function J(){if(x){var V={getBoundingClientRect:function(){if(!C)return i.getBoundingClientRect()}};E(V),x.postMessage({resize:{width:V.width,height:V.height}});return}L.width=L.height=null}function j(){n=null,T&&s.removeEventListener("resize",J),C&&i&&(document.body.removeChild(i),i=null,r=!1)}return T&&s.addEventListener("resize",J,!1),x?x.fire(g,L,j):v(g,L,j)}return h.reset=function(){x&&x.reset(),n&&n.reset()},h}var ne;function re(){return ne||(ne=W(null,{useWorker:!0,resize:!0})),ne}u.exports=function(){return re().apply(this,arguments)},u.exports.reset=function(){re().reset()},u.exports.create=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ie,!1);const Qe=Ie.exports;Ie.exports.create;function Lt(){var e=3e3,s=Date.now()+e,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function o(l,c){return Math.random()*(c-l)+l}var t=setInterval(function(){var l=s-Date.now();if(l<=0)return clearInterval(t);var c=100*(l/e);Qe(Object.assign({},u,{particleCount:c,origin:{x:o(.1,.3),y:Math.random()-.2}})),Qe(Object.assign({},u,{particleCount:c,origin:{x:o(.7,.9),y:Math.random()-.2}}))},250)}const Ht=y("div",{class:"q-space"}),Rt=Z({name:"QSpace",setup(){return()=>Ht}}),At=()=>!0;function Ft(e){const s={};return e.forEach(u=>{s[u]=At}),s}function ve(){const{emit:e,proxy:s}=te(),u=z(null);function o(){u.value.show()}function t(){u.value.hide()}function l(d){e("ok",d),t()}function c(){e("hide")}return Object.assign(s,{show:o,hide:t}),{dialogRef:u,onDialogHide:c,onDialogOK:l,onDialogCancel:t}}const Xe=["ok","hide"];ve.emits=Xe;ve.emitsObject=Ft(Xe);const $t=Ve("div",{class:"text-h6"},"Progress",-1),Qt={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...ve.emits],setup(e){const s=e,u=z(s.task.performance),o=z(null),t=S(()=>{let q="of "+s.task.target;const F=s.task.performance_history;return F&&F.length&&(q+=" Â· changed "+he.formatDate(F[0].updated,"DD.MM.YYYY HH:mm")),q}),{dialogRef:l,onDialogHide:c,onDialogOK:d,onDialogCancel:m}=ve(),_=S(()=>u.value===s.task.performance&&!o.value);function b(){d({performance:u.value,duration:o.value})}return(q,F)=>(A(),$(Be,{ref_key:"dialogRef",ref:l,onHide:O(c)},{default:k(()=>[p(vt,{class:"q-dialog-plugin"},{default:k(()=>[p(Ae,null,{default:k(()=>[$t]),_:1}),p(Ae,null,{default:k(()=>[p(St,{modelValue:u.value,"onUpdate:modelValue":F[0]||(F[0]=M=>u.value=M),label:"Performance",hint:O(t)},null,8,["modelValue","hint"])]),_:1}),p(gt,{align:"right"},{default:k(()=>[p(fe,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:e.task.id}}},null,8,["to"]),p(Rt),p(fe,{flat:"",label:"Cancel",class:"text-primary",onClick:O(m)},null,8,["onClick"]),p(fe,{disable:O(_),flat:"",label:"Submit",class:"text-primary",onClick:b},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Nt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(e){const s=e,u=xt(),o=Pe(),t=S(()=>s.task.target>1&&!s.task.done),l=S(()=>t.value?s.task.performance/s.task.target:0),c=S(()=>[s.task.performance,"of",s.task.target].join(" "));function d(){u.dialog({component:Qt,componentProps:{task:s.task}}).onOk(m=>{if(m.performance!==s.task.performance){m.performance>=s.task.target&&Lt();const _={performance:m.performance};o.updateItem(s.task.id+"/",_).then(()=>o.refetch())}})}return(m,_)=>(A(),$(Ce,{clickable:"",active:Boolean(e.task.done),"active-class":"text-positive"},{default:k(()=>[e.task.done?(A(),$(Y,{key:0,thumbnail:""},{default:k(()=>[p(X,{name:"done",color:"positive"})]),_:1})):e.task.group_id?(A(),$(Y,{key:1,thumbnail:""},{default:k(()=>[p(X,{name:"event_repeat"})]),_:1})):(A(),$(Y,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:_[0]||(_[0]=b=>m.$emit("ondragstart",b,e.task)),"onTouchmove:native":_[1]||(_[1]=b=>{})},{default:k(()=>[p(X,{name:"drag_indicator"})]),_:1})),p(Y,{onClick:d},{default:k(()=>[p(se,null,{default:k(()=>[ue(qe(e.task.name),1)]),_:1}),O(t)?(A(),$(se,{key:0,caption:""},{default:k(()=>[ue(qe(O(c)),1)]),_:1})):ge("",!0),O(t)?(A(),$(se,{key:1},{default:k(()=>[p(Ot,{value:O(l),color:"positive"},null,8,["value"])]),_:1})):ge("",!0)]),_:1})]),_:1},8,["active"]))}};var Ne;(function(e){var s=function(){function o(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(o.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),o.prototype.clearData=function(t){t!=null?delete this._data[t]:this._data=null},o.prototype.getData=function(t){return this._data[t]||""},o.prototype.setData=function(t,l){this._data[t]=l},o.prototype.setDragImage=function(t,l,c){var d=u._instance;d._imgCustom=t,d._imgOffset={x:l,y:c}},o}();e.DataTransfer=s;var u=function(){function o(){if(this._lastClick=0,o._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",function(){},{get passive(){return t=!0,!0}}),"ontouchstart"in document){var l=document,c=this._touchstart.bind(this),d=this._touchmove.bind(this),m=this._touchend.bind(this),_=t?{passive:!1,capture:!1}:!1;l.addEventListener("touchstart",c,_),l.addEventListener("touchmove",d,_),l.addEventListener("touchend",m),l.addEventListener("touchcancel",m)}}return o.getInstance=function(){return o._instance},o.prototype._touchstart=function(t){var l=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<o._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(t.target);c&&!this._dispatchEvent(t,"mousemove",t.target)&&!this._dispatchEvent(t,"mousedown",t.target)&&(this._dragSource=c,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){l._dragSource==c&&l._img==null&&l._dispatchEvent(t,"contextmenu",c)&&l._reset()},o._CTXMENU),o._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){l._isDragEnabled=!0,l._touchmove(t)},o._PRESSHOLDAWAIT)))}},o.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t)){this._reset();return}if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var l=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",l)){this._lastTouch=t,t.cancelable&&t.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",l)),this._img&&(this._lastTouch=t,t.cancelable&&t.preventDefault(),l!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",l),this._lastTarget=l),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",l))}},o.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target)){t.cancelable&&t.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},o.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},o.prototype._shouldHandleMove=function(t){return!o._ISPRESSHOLDMODE&&this._shouldHandle(t)},o.prototype._shouldHandlePressHoldMove=function(t){return o._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},o.prototype._shouldCancelPressHoldMove=function(t){return o._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>o._PRESSHOLDMARGIN},o.prototype._shouldStartDragging=function(t){var l=this._getDelta(t);return l>o._THRESHOLD||o._ISPRESSHOLDMODE&&l>=o._PRESSHOLDTHRESHOLD},o.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},o.prototype._getPoint=function(t,l){return t&&t.touches&&(t=t.touches[0]),{x:l?t.pageX:t.clientX,y:l?t.pageY:t.clientY}},o.prototype._getDelta=function(t){if(o._ISPRESSHOLDMODE&&!this._ptDown)return 0;var l=this._getPoint(t);return Math.abs(l.x-this._ptDown.x)+Math.abs(l.y-this._ptDown.y)},o.prototype._getTarget=function(t){for(var l=this._getPoint(t),c=document.elementFromPoint(l.x,l.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},o.prototype._createImage=function(t){this._img&&this._destroyImage();var l=this._imgCustom||this._dragSource;if(this._img=l.cloneNode(!0),this._copyStyle(l,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=l.getBoundingClientRect(),d=this._getPoint(t);this._imgOffset={x:d.x-c.left,y:d.y-c.top},this._img.style.opacity=o._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},o.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},o.prototype._moveImage=function(t){var l=this;requestAnimationFrame(function(){if(l._img){var c=l._getPoint(t,!0),d=l._img.style;d.position="absolute",d.pointerEvents="none",d.zIndex="999999",d.left=Math.round(c.x-l._imgOffset.x)+"px",d.top=Math.round(c.y-l._imgOffset.y)+"px"}})},o.prototype._copyProps=function(t,l,c){for(var d=0;d<c.length;d++){var m=c[d];t[m]=l[m]}},o.prototype._copyStyle=function(t,l){if(o._rmvAtts.forEach(function(q){l.removeAttribute(q)}),t instanceof HTMLCanvasElement){var c=t,d=l;d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)}for(var m=getComputedStyle(t),_=0;_<m.length;_++){var b=m[_];b.indexOf("transition")<0&&(l.style[b]=m[b])}l.style.pointerEvents="none";for(var _=0;_<t.children.length;_++)this._copyStyle(t.children[_],l.children[_])},o.prototype._dispatchEvent=function(t,l,c){if(t&&c){var d=document.createEvent("Event"),m=t.touches?t.touches[0]:t;return d.initEvent(l,!0,!0),d.button=0,d.which=d.buttons=1,this._copyProps(d,t,o._kbdProps),this._copyProps(d,m,o._ptProps),d.dataTransfer=this._dataTransfer,c.dispatchEvent(d),d.defaultPrevented}return!1},o.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},o}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=u})(Ne||(Ne={}));const Kt={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0}},setup(e){const s=e,u=Pe(),o=S(()=>s.week.tasks.length?[...s.week.tasks].sort((_,b)=>b.target-_.target):null),t=new Date(s.week.day),l=he.formatDate(t,"w-Q-YYYY-MMM D").split("-"),c=["Week "+l[0],"Q"+l[1],l[2],l[3]].join(" Â· ");function d(_,b){const q={id:b.id,day:he.getDayOfWeek(b.planned),week:l[0]};_.dataTransfer.setData("text",JSON.stringify(q)),_.dataTransfer.dropEffect="move"}function m(_){const b=JSON.parse(_.dataTransfer.getData("text"));if(b.week===l[0])return;const q={planned:he.addToDate(t,{days:b.day-1}).toISOString()};u.updateItem(b.id+"/",q).then(()=>u.refetch())}return(_,b)=>(A(),$(Pt,{subtitle:O(c),onDragover:b[0]||(b[0]=Ee(()=>{},["prevent"])),onDragenter:b[1]||(b[1]=Ee(()=>{},["prevent"])),onDrop:b[2]||(b[2]=Ee(q=>m(q),["prevent"]))},{default:k(()=>[O(o)?(A(),$(Ye,{key:0},{default:k(()=>[(A(!0),je(ze,null,Ue(O(o),q=>(A(),$(Nt,{key:q.id,task:q,onOndragstart:d},null,8,["task"]))),128))]),_:1})):ge("",!0)]),_:1},8,["subtitle"]))}},ta={__name:"HomeView",setup(e){const s=Pe();return(u,o)=>(A(),$(bt,{padding:""},{default:k(()=>[p(et,null,{default:k(()=>[p(Je,null,{default:k(()=>[ue("Plan")]),_:1}),p(qt,{modelValue:O(s).filter.goal,"onUpdate:modelValue":o[0]||(o[0]=t=>O(s).filter.goal=t),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),p(fe,{flat:"",round:"",icon:"filter_list"},{default:k(()=>[p(We,null,{default:k(()=>[p(Ye,null,{default:k(()=>[p(Ce,null,{default:k(()=>[p(Y,null,{default:k(()=>[p(se,null,{default:k(()=>[ue("Hide passed done")]),_:1})]),_:1}),p(Y,{side:""},{default:k(()=>[p(Fe,{modelValue:O(s).filter.done,"onUpdate:modelValue":o[1]||(o[1]=t=>O(s).filter.done=t)},null,8,["modelValue"])]),_:1})]),_:1}),p(Ce,null,{default:k(()=>[p(Y,null,{default:k(()=>[p(se,null,{default:k(()=>[ue("Hide passed recurring")]),_:1})]),_:1}),p(Y,{side:""},{default:k(()=>[p(Fe,{modelValue:O(s).filter.recurring,"onUpdate:modelValue":o[2]||(o[2]=t=>O(s).filter.recurring=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),O(s).calendar?(A(),$(wt,{key:0,layout:"dense",class:"q-px-md"},{default:k(()=>[(A(!0),je(ze,null,Ue(O(s).calendar,(t,l)=>(A(),$(Kt,{key:l,color:l===O(s).currentWeek?"orange":"",week:t},null,8,["color","week"]))),128))]),_:1})):ge("",!0)]),_:1}))}};export{ta as default};
