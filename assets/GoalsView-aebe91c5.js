import{c as x,b,Q as y}from"./api.client-846a203e.js";import{j as p,N as I,af as m,O as o,P as l,Q as e,R as n,U as f,W as g,V as _,T as Q,Y as T,S as L,ah as v}from"./index-d36fa9d9.js";import{Q as k}from"./QList-a6c10880.js";import{Q as w}from"./QPage-cbb71b31.js";import{a as C}from"./QExpansionItem-6f2327b2.js";import{Q as G}from"./QItemLabel-ef0208c0.js";import{a as V,Q as Y}from"./format-1cfb294d.js";import{d as B}from"./date-a088ae0b.js";import"./use-model-toggle-26ea5f03.js";import"./uid-6a237b22.js";const D={__name:"GoalListItem",props:{goal:{type:Object,required:!0}},setup(r){const a=r,s={name:"goal",params:{id:a.goal.id}},i=a.goal.children&&a.goal.children.length,d=p(()=>a.goal.planned?B.formatDate(a.goal.planned,"ddd MMM DD YYYY"):null);return(c,t)=>{const h=I("GoalListItem",!0);return m(i)?(o(),l(C,{key:0,to:s,label:r.goal.name,caption:m(d),"content-inset-level":.5,"default-opened":"","expand-icon-toggle":"","expand-icon":"keyboard_arrow_right","expanded-icon":"keyboard_arrow_down","expand-separator":""},{default:e(()=>[n(k,null,{default:e(()=>[(o(!0),f(g,null,_(r.goal.children,u=>(o(),l(h,{key:u.id,goal:u},null,8,["goal"]))),128))]),_:1})]),_:1},8,["label","caption","content-inset-level"])):(o(),l(Y,{key:1,to:s},{default:e(()=>[n(V,null,{default:e(()=>[n(G,null,{default:e(()=>[Q(T(r.goal.name),1)]),_:1})]),_:1})]),_:1}))}}},U={__name:"GoalsView",setup(r){const a=(d,c=null)=>d.filter(t=>t.parent===c).map(t=>({...t,children:a(d,t.id)})),{data:s}=x.read("/goals/"),i=p(()=>s.value?a(s.value):null);return(d,c)=>(o(),l(w,{padding:""},{default:e(()=>[n(y,null,{default:e(()=>[n(b,null,{default:e(()=>[Q("Goals")]),_:1}),n(L,{flat:"",round:"",icon:"add_task",to:{name:"goal",params:{id:"create"}}})]),_:1}),m(i)?(o(),l(k,{key:0},{default:e(()=>[(o(!0),f(g,null,_(m(i),t=>(o(),l(D,{key:t.id,goal:t},null,8,["goal"]))),128))]),_:1})):v("",!0)]),_:1}))}};export{U as default};
