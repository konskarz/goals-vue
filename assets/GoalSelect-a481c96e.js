import{c as p,g as O,e as P,d as x,h as d,m as M,j as le,k as me,q as qe,N as re,O as ce,r as F,aJ as Se,w as U,b as Ce,aK as Ke,aL as Te,a5 as G,aM as we,M as ae,S as Pe,a4 as Fe,aN as J,aq as Qe,aO as Ae,aP as $e,aQ as pe,aR as Ee,a6 as Ne,a7 as Be,a8 as $,au as ze,ab as Ve,ac as V,a9 as L,aD as ie}from"./index-41a9566c.js";import{Q as Le,d as Me,e as Oe,a as Ie,u as je}from"./QSlideTransition-e2c1f438.js";const Ye=p({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(n,{slots:b}){const{proxy:{$q:s}}=O(),u=le(me,P);if(u===P)return console.error("QPage needs to be a deep child of QLayout"),P;if(le(qe,P)===P)return console.error("QPage needs to be child of QPageContainer"),P;const m=x(()=>{const o=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof n.styleFn=="function"){const y=u.isContainer.value===!0?u.containerHeight.value:s.screen.height;return n.styleFn(o,y)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-o+"px":s.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":s.screen.height-o+"px"}}),v=x(()=>`q-page${n.padding===!0?" q-layout-padding":""}`);return()=>d("main",{class:v.value,style:m.value},M(b.default))}}),De=["none","strict","leaf","leaf-filtered"],He=p({name:"QTree",props:{...re,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:n=>De.includes(n)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(n,{slots:b,emit:s}){const{proxy:u}=O(),{$q:_}=u,m=ce(n,_),v=F({}),o=F(n.ticked||[]),y=F(n.expanded||[]);let S={};Se(()=>{S={}});const Q=x(()=>`q-tree q-tree--${n.dense===!0?"dense":"standard"}`+(n.noConnectors===!0?" q-tree--no-connectors":"")+(m.value===!0?" q-tree--dark":"")+(n.color!==void 0?` text-${n.color}`:"")),C=x(()=>n.selected!==void 0),I=x(()=>n.icon||_.iconSet.tree.icon),E=x(()=>n.controlColor||n.color),K=x(()=>n.textColor!==void 0?` text-${n.textColor}`:""),g=x(()=>{const t=n.selectedColor||n.color;return t?` text-${t}`:""}),A=x(()=>n.filterMethod!==void 0?n.filterMethod:(t,l)=>{const e=l.toLowerCase();return t[n.labelKey]&&t[n.labelKey].toLowerCase().indexOf(e)>-1}),q=x(()=>{const t={},l=(e,i)=>{const a=e.tickStrategy||(i?i.tickStrategy:n.tickStrategy),c=e[n.nodeKey],f=e[n.childrenKey]&&e[n.childrenKey].length!==0,T=e.disabled!==!0&&C.value===!0&&e.selectable!==!1,k=e.disabled!==!0&&e.expandable!==!1,xe=a!=="none",z=a==="strict",te=a==="leaf-filtered",H=a==="leaf"||a==="leaf-filtered";let R=e.disabled!==!0&&e.tickable!==!1;H===!0&&R===!0&&i&&i.tickable!==!0&&(R=!1);let w=e.lazy;w===!0&&v.value[c]!==void 0&&Array.isArray(e[n.childrenKey])===!0&&(w=v.value[c]);const r={key:c,parent:i,isParent:f,lazy:w,disabled:e.disabled,link:e.disabled!==!0&&(T===!0||k===!0&&(f===!0||w===!0)),children:[],matchesFilter:n.filter?A.value(e,n.filter):!0,selected:c===n.selected&&T===!0,selectable:T,expanded:f===!0?y.value.includes(c):!1,expandable:k,noTick:e.noTick===!0||z!==!0&&w&&w!=="loaded",tickable:R,tickStrategy:a,hasTicking:xe,strictTicking:z,leafFilteredTicking:te,leafTicking:H,ticked:z===!0?o.value.includes(c):f===!0?!1:o.value.includes(c)};if(t[c]=r,f===!0&&(r.children=e[n.childrenKey].map(h=>l(h,r)),n.filter&&(r.matchesFilter!==!0?r.matchesFilter=r.children.some(h=>h.matchesFilter):r.noTick!==!0&&r.disabled!==!0&&r.tickable===!0&&te===!0&&r.children.every(h=>h.matchesFilter!==!0||h.noTick===!0||h.tickable!==!0)===!0&&(r.tickable=!1)),r.matchesFilter===!0&&(r.noTick!==!0&&z!==!0&&r.children.every(h=>h.noTick)===!0&&(r.noTick=!0),H))){if(r.ticked=!1,r.indeterminate=r.children.some(h=>h.indeterminate===!0),r.tickable=r.tickable===!0&&r.children.some(h=>h.tickable),r.indeterminate!==!0){const h=r.children.reduce((ne,_e)=>_e.ticked===!0?ne+1:ne,0);h===r.children.length?r.ticked=!0:h>0&&(r.indeterminate=!0)}r.indeterminate===!0&&(r.indeterminateNextState=r.children.every(h=>h.tickable!==!0||h.ticked!==!0))}return r};return n.nodes.forEach(e=>l(e,null)),t});U(()=>n.ticked,t=>{o.value=t}),U(()=>n.expanded,t=>{y.value=t});function N(t){const l=[].reduce,e=(i,a)=>{if(i||!a)return i;if(Array.isArray(a)===!0)return l.call(Object(a),e,i);if(a[n.nodeKey]===t)return a;if(a[n.childrenKey])return e(null,a[n.childrenKey])};return e(null,n.nodes)}function oe(){return o.value.map(t=>N(t))}function ue(){return y.value.map(t=>N(t))}function de(t){return t&&q.value[t]?q.value[t].expanded:!1}function se(){n.expanded!==void 0?s("update:expanded",[]):y.value=[]}function W(){const t=[],l=e=>{e[n.childrenKey]&&e[n.childrenKey].length!==0&&e.expandable!==!1&&e.disabled!==!0&&(t.push(e[n.nodeKey]),e[n.childrenKey].forEach(l))};n.nodes.forEach(l),n.expanded!==void 0?s("update:expanded",t):y.value=t}function j(t,l,e=N(t),i=q.value[t]){if(i.lazy&&i.lazy!=="loaded"){if(i.lazy==="loading")return;v.value[t]="loading",Array.isArray(e[n.childrenKey])!==!0&&(e[n.childrenKey]=[]),s("lazyLoad",{node:e,key:t,done:a=>{v.value[t]="loaded",e[n.childrenKey]=Array.isArray(a)===!0?a:[],Ce(()=>{const c=q.value[t];c&&c.isParent===!0&&X(t,!0)})},fail:()=>{delete v.value[t],e[n.childrenKey].length===0&&delete e[n.childrenKey]}})}else i.isParent===!0&&i.expandable===!0&&X(t,l)}function X(t,l){let e=y.value;const i=n.expanded!==void 0;if(i===!0&&(e=e.slice()),l){if(n.accordion&&q.value[t]){const a=[];q.value[t].parent?q.value[t].parent.children.forEach(c=>{c.key!==t&&c.expandable===!0&&a.push(c.key)}):n.nodes.forEach(c=>{const f=c[n.nodeKey];f!==t&&a.push(f)}),a.length!==0&&(e=e.filter(c=>a.includes(c)===!1))}e=e.concat([t]).filter((a,c,f)=>f.indexOf(a)===c)}else e=e.filter(a=>a!==t);i===!0?s("update:expanded",e):y.value=e}function fe(t){return t&&q.value[t]?q.value[t].ticked:!1}function B(t,l){let e=o.value;const i=n.ticked!==void 0;i===!0&&(e=e.slice()),l?e=e.concat(t).filter((a,c,f)=>f.indexOf(a)===c):e=e.filter(a=>t.includes(a)===!1),i===!0&&s("update:ticked",e)}function he(t,l,e){const i={tree:u,node:t,key:e,color:n.color,dark:m.value};return J(i,"expanded",()=>l.expanded,a=>{a!==l.expanded&&j(e,a)}),J(i,"ticked",()=>l.ticked,a=>{a!==l.ticked&&B([e],a)}),i}function Y(t){return(n.filter?t.filter(l=>q.value[l[n.nodeKey]].matchesFilter):t).map(l=>be(l))}function ve(t){if(t.icon!==void 0)return d(G,{class:"q-tree__icon q-mr-sm",name:t.icon,color:t.iconColor});const l=t.img||t.avatar;if(l)return d("img",{class:`q-tree__${t.img?"img":"avatar"} q-mr-sm`,src:l})}function ye(){s("afterShow")}function ge(){s("afterHide")}function be(t){const l=t[n.nodeKey],e=q.value[l],i=t.header&&b[`header-${t.header}`]||b["default-header"],a=e.isParent===!0?Y(t[n.childrenKey]):[],c=a.length!==0||e.lazy&&e.lazy!=="loaded";let f=t.body&&b[`body-${t.body}`]||b["default-body"];const T=i!==void 0||f!==void 0?he(t,e,l):null;return f!==void 0&&(f=d("div",{class:"q-tree__node-body relative-position"},[d("div",{class:K.value},[f(T)])])),d("div",{key:l,class:`q-tree__node relative-position q-tree__node--${c===!0?"parent":"child"}`},[d("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(e.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(e.selected===!0?" q-tree__node--selected":"")+(e.disabled===!0?" q-tree__node--disabled":""),tabindex:e.link===!0?0:-1,onClick:k=>{ee(t,e,k)},onKeypress(k){Ke(k)!==!0&&(k.keyCode===13?ee(t,e,k,!0):k.keyCode===32&&D(t,e,k,!0))}},[d("div",{class:"q-focus-helper",tabindex:-1,ref:k=>{S[e.key]=k}}),e.lazy==="loading"?d(Te,{class:"q-tree__spinner",color:E.value}):c===!0?d(G,{class:"q-tree__arrow"+(e.expanded===!0?" q-tree__arrow--rotate":""),name:I.value,onClick(k){D(t,e,k)}}):null,e.hasTicking===!0&&e.noTick!==!0?d(we,{class:"q-tree__tickbox",modelValue:e.indeterminate===!0?null:e.ticked,color:E.value,dark:m.value,dense:!0,keepColor:!0,disable:e.tickable!==!0,onKeydown:ae,"onUpdate:modelValue":k=>{ke(e,k)}}):null,d("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(e.selected===!0?g.value:K.value)},[i?i(T):[ve(t),d("div",t[n.labelKey])]])]),c===!0?n.noTransition===!0?d("div",{class:"q-tree__node-collapsible"+K.value,key:`${l}__q`},[f,d("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":"")},e.expanded?a:null)]):d(Le,{duration:n.duration,onShow:ye,onHide:ge},()=>Pe(d("div",{class:"q-tree__node-collapsible"+K.value,key:`${l}__q`},[f,d("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":"")},a)]),[[Fe,e.expanded]])):f])}function Z(t){const l=S[t];l&&l.focus()}function ee(t,l,e,i){i!==!0&&l.selectable!==!1&&Z(l.key),C.value&&l.selectable?n.noSelectionUnset===!1?s("update:selected",l.key!==n.selected?l.key:null):l.key!==n.selected&&s("update:selected",l.key===void 0?null:l.key):D(t,l,e,i),typeof t.handler=="function"&&t.handler(t)}function D(t,l,e,i){e!==void 0&&ae(e),i!==!0&&l.selectable!==!1&&Z(l.key),j(l.key,!l.expanded,t,l)}function ke(t,l){if(t.indeterminate===!0&&(l=t.indeterminateNextState),t.strictTicking)B([t.key],l);else if(t.leafTicking){const e=[],i=a=>{a.isParent?(l!==!0&&a.noTick!==!0&&a.tickable===!0&&e.push(a.key),a.leafTicking===!0&&a.children.forEach(i)):a.noTick!==!0&&a.tickable===!0&&(a.leafFilteredTicking!==!0||a.matchesFilter===!0)&&e.push(a.key)};i(t),B(e,l)}}return n.defaultExpandAll===!0&&W(),Object.assign(u,{getNodeByKey:N,getTickedNodes:oe,getExpandedNodes:ue,isExpanded:de,collapseAll:se,expandAll:W,setExpanded:j,isTicked:fe,setTicked:B}),()=>{const t=Y(n.nodes);return d("div",{class:Q.value},t.length===0?n.filter?n.noResultsLabel||_.lang.tree.noResults:n.noNodesLabel||_.lang.tree.noNodes:t)}}}),Re=p({name:"QBanner",props:{...re,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(n,{slots:b}){const{proxy:{$q:s}}=O(),u=ce(n,s),_=x(()=>"q-banner row items-center"+(n.dense===!0?" q-banner--dense":"")+(u.value===!0?" q-banner--dark q-dark":"")+(n.rounded===!0?" rounded-borders":"")),m=x(()=>`q-banner__actions row items-center justify-end col-${n.inlineActions===!0?"auto":"all"}`);return()=>{const v=[d("div",{class:"q-banner__avatar col-auto row items-center self-start"},M(b.avatar)),d("div",{class:"q-banner__content col text-body2"},M(b.default))],o=M(b.action);return o!==void 0&&v.push(d("div",{class:m.value},o)),d("div",{class:_.value+(n.inlineActions===!1&&o!==void 0?" q-banner--top-padding":""),role:"alert"},v)}}}),Ue=p({name:"QPopupProxy",props:{...Me,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(n,{slots:b,emit:s,attrs:u}){const{proxy:_}=O(),{$q:m}=_,v=F(!1),o=F(null),y=x(()=>parseInt(n.breakpoint,10)),{canShow:S}=Oe({showing:v});function Q(){return m.screen.width<y.value||m.screen.height<y.value?"dialog":"menu"}const C=F(Q()),I=x(()=>C.value==="menu"?{maxHeight:"99vh"}:{});U(()=>Q(),g=>{v.value!==!0&&(C.value=g)});function E(g){v.value=!0,s("show",g)}function K(g){v.value=!1,C.value=Q(),s("hide",g)}return Object.assign(_,{show(g){S(g)===!0&&o.value.show(g)},hide(g){o.value.hide(g)},toggle(g){o.value.toggle(g)}}),J(_,"currentComponent",()=>({type:C.value,ref:o.value})),()=>{const g={ref:o,...I.value,...u,onShow:E,onHide:K};let A;return C.value==="dialog"?A=Qe:(A=Ie,Object.assign(g,{target:n.target,contextMenu:n.contextMenu,noParentEvent:!0,separateClosePopup:!0})),d(A,g,b.default)}}}),Ge=p({name:"QField",inheritAttrs:!1,props:Ae,emits:$e,setup(){return pe(Ee())}}),Je={class:"self-center full-width no-outline ellipsis",tabindex:"0"},Ze={__name:"GoalSelect",props:{modelValue:{type:Number,default:null},exceptId:{type:Number,default:null}},emits:["update:modelValue"],setup(n,{emit:b}){const s=n,u=x({get(){return s.modelValue},set(o){b("update:modelValue",o)}}),_=je(),m=x(()=>s.modelValue?_.getItem(s.modelValue).name:null);function v(o){return o.id!==s.exceptId}return(o,y)=>(Ne(),Be(Ge,{modelValue:V(u),"onUpdate:modelValue":y[1]||(y[1]=S=>ie(u)?u.value=S:null),clearable:"","clear-icon":"close"},{control:$(()=>[ze("div",Je,Ve(V(m)),1)]),append:$(()=>[L(G,{name:"keyboard_arrow_down"})]),default:$(()=>[L(Ue,{fit:"","auto-close":""},{default:$(()=>[L(Re,null,{default:$(()=>[L(He,{selected:V(u),"onUpdate:selected":y[0]||(y[0]=S=>ie(u)?u.value=S:null),nodes:V(_).tree,filter:String(n.exceptId),"filter-method":v,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes","filter"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Ye as Q,Ze as _};
