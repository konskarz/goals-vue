import{b as x}from"./use-dark-84cefd16.js";import{j as C,Q as p,R as m,S as s,T as t,V as g,Z as e,U as r,a0 as q,af as y,a6 as Q}from"./index-e3a4858f.js";import{Q as c,a as _}from"./QForm-b95b5b54.js";import{a as S,M as U}from"./MainPage-66be32e8.js";import{u as w,_ as B,a as N}from"./DateInput-74db0015.js";import"./uid-6a237b22.js";import"./use-form-3bd58951.js";import"./format-8c778330.js";import"./QTree-de7667d5.js";import"./QSlideTransition-9ba97f5a.js";import"./use-timeout-d6ebbd61.js";import"./use-model-toggle-19a10866.js";const E={__name:"GoalView",props:{id:{type:String,required:!0}},setup(b){const n=parseInt(b.id),{item:l,original:f,persist:i,changed:V,remove:k,save:u,back:d}=w(n,S(),{name:"",parent:null,planned:null,description:""}),v=C(()=>!l.value.name||i.value||!!(n&&!V(f,{...l.value})));return(T,o)=>(p(),m(U,null,{toolbar:s(()=>[t(x,null,{default:s(()=>[g("Goal")]),_:1}),e(n)?(p(),m(r,{key:0,flat:"",round:"",icon:"delete",disable:e(i),onClick:e(k)},null,8,["disable","onClick"])):q("",!0),t(r,{flat:"",round:"",icon:"save",disable:v.value,onClick:e(u)},null,8,["disable","onClick"]),t(r,{flat:"",round:"",icon:"clear",onClick:e(d)},null,8,["onClick"])]),default:s(()=>[t(_,{class:"q-pt-sm q-px-lg",onSubmit:Q(e(u),["prevent"])},{default:s(()=>[t(c,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),label:"Name","stack-label":"",autofocus:!e(n),rules:[a=>!!a||"Field is required"],onKeyup:y(e(d),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),t(B,{modelValue:e(l).parent,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).parent=a),label:"Parent","stack-label":"","except-id":e(n),class:"q-pb-lg"},null,8,["modelValue","except-id"]),t(N,{modelValue:e(l).planned,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).planned=a),label:"Planned",class:"q-pb-lg"},null,8,["modelValue"]),t(c,{modelValue:e(l).description,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).description=a),type:"textarea",label:"Description","stack-label":""},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}))}};export{E as default};
