import{r as p,L as V,w as g,j as h,O as k,P as I,af as O,au as S}from"./index-984993e3.js";import{c as f}from"./api.client-29bffef0.js";import{Q as j}from"./QForm-721df735.js";function y(r,u,e){const t=p(r),a=p(!1),c=V();let i=null;if(e){const{data:l}=f.read(u+e+"/"),s=o=>{t.value=o,i={...o}};l.value&&s(l.value),g(l,s)}function d(){e&&(a.value=!0,f.delete(u+e+"/").then(()=>n()))}function b(){const l={...t.value},s=Object.keys(l).reduce((o,m)=>(l[m]!==i[m]&&(o[m]=l[m]),o),{});Object.keys(s).length?f.update(u+e+"/",s).then(()=>n()):n()}function v(){a.value=!0,e?b():f.create(u,t.value).then(()=>n())}function n(){c.back()}return{item:t,persist:a,remove:d,save:v,back:n}}const B={__name:"DateInput",props:{label:{type:String,required:!0},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(r,{emit:u}){const e=r,t=h({get(){return e.modelValue?e.modelValue.slice(0,10):null},set(a){u("update:modelValue",a?new Date(a).toISOString():null)}});return(a,c)=>(k(),I(j,{modelValue:O(t),"onUpdate:modelValue":c[0]||(c[0]=i=>S(t)?t.value=i:null),type:"date",label:r.label,"stack-label":""},null,8,["modelValue","label"]))}};export{B as _,y as u};
