import{a as Ge,Q as Je}from"./QToolbar-27e60abc.js";import{a as Y,b as oe,Q as we}from"./QItem-709d8d72.js";import{c as ee,D as Me,E as Pe,U as et,f as q,h as y,S as J,g as ue,aw as Ne,r as j,ax as tt,w as Ee,b as at,ay as nt,az as rt,ae as X,aA as it,C as He,J as lt,aB as ot,aC as De,aD as Ve,a7 as R,a1 as Q,a2 as b,aE as Be,af as Ce,aF as O,a8 as p,aG as Ae,d as st,e as Te,j as ut,aH as Re,aI as ct,a9 as fe,aJ as dt,aa as se,aK as ge,ab as $e,ad as je,ac as ze,aL as xe,aM as Qe}from"./index-4b5a4c41.js";import{Q as Ue}from"./QList-a533a05e.js";import{u as ft,a as ht,Q as Ye}from"./QMenu-2afdf00e.js";import{u as gt,Q as mt}from"./GoalStore-e18f1ebb.js";import{d as he,u as Ie}from"./TaskStore-d3bddd93.js";import{Q as vt,a as _t}from"./QLinearProgress-959bcb8e.js";import{Q as yt}from"./QField-4a69f51c.js";import{Q as pt}from"./QIntersection-e5dcb1f1.js";import{_ as bt,u as kt}from"./NumberInput-c378bc9f.js";import"./format-ff5bcb16.js";const St=ee({name:"QTimeline",props:{...Me,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:s}){const d=ue(),o=Pe(t,d.proxy.$q);et(Ne,t);const e=q(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(o.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:e.value},J(s.default))}}),Tt=["none","strict","leaf","leaf-filtered"],xt=ee({name:"QTree",props:{...Me,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>Tt.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:s,emit:d}){const{proxy:o}=ue(),{$q:e}=o,l=Pe(t,e),c=j({}),u=j(t.ticked||[]),v=j(t.expanded||[]);let _={};tt(()=>{_={}});const T=q(()=>`q-tree q-tree--${t.dense===!0?"dense":"standard"}`+(t.noConnectors===!0?" q-tree--no-connectors":"")+(l.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),P=q(()=>t.selected!==void 0),K=q(()=>t.icon||e.iconSet.tree.icon),M=q(()=>t.controlColor||t.color),z=q(()=>t.textColor!==void 0?` text-${t.textColor}`:""),A=q(()=>{const r=t.selectedColor||t.color;return r?` text-${r}`:""}),B=q(()=>t.filterMethod!==void 0?t.filterMethod:(r,f)=>{const n=f.toLowerCase();return r[t.labelKey]&&r[t.labelKey].toLowerCase().indexOf(n)>-1}),F=q(()=>{const r={},f=(n,m)=>{const h=n.tickStrategy||(m?m.tickStrategy:t.tickStrategy),g=n[t.nodeKey],I=n[t.childrenKey]&&n[t.childrenKey].length>0,N=n.disabled!==!0&&P.value===!0&&n.selectable!==!1,L=n.disabled!==!0&&n.expandable!==!1,G=h!=="none",$=h==="strict",V=h==="leaf-filtered",re=h==="leaf"||h==="leaf-filtered";let ie=n.disabled!==!0&&n.tickable!==!1;re===!0&&ie===!0&&m&&m.tickable!==!0&&(ie=!1);let U=n.lazy;U===!0&&c.value[g]!==void 0&&Array.isArray(n[t.childrenKey])===!0&&(U=c.value[g]);const S={key:g,parent:m,isParent:I,lazy:U,disabled:n.disabled,link:n.disabled!==!0&&(N===!0||L===!0&&(I===!0||U===!0)),children:[],matchesFilter:t.filter?B.value(n,t.filter):!0,selected:g===t.selected&&N===!0,selectable:N,expanded:I===!0?v.value.includes(g):!1,expandable:L,noTick:n.noTick===!0||$!==!0&&U&&U!=="loaded",tickable:ie,tickStrategy:h,hasTicking:G,strictTicking:$,leafFilteredTicking:V,leafTicking:re,ticked:$===!0?u.value.includes(g):I===!0?!1:u.value.includes(g)};if(r[g]=S,I===!0&&(S.children=n[t.childrenKey].map(H=>f(H,S)),t.filter&&(S.matchesFilter!==!0?S.matchesFilter=S.children.some(H=>H.matchesFilter):S.noTick!==!0&&S.disabled!==!0&&S.tickable===!0&&V===!0&&S.children.every(H=>H.matchesFilter!==!0||H.noTick===!0||H.tickable!==!0)===!0&&(S.tickable=!1)),S.matchesFilter===!0&&(S.noTick!==!0&&$!==!0&&S.children.every(H=>H.noTick)===!0&&(S.noTick=!0),re))){if(S.ticked=!1,S.indeterminate=S.children.some(H=>H.indeterminate===!0),S.tickable=S.tickable===!0&&S.children.some(H=>H.tickable),S.indeterminate!==!0){const H=S.children.reduce((le,ke)=>ke.ticked===!0?le+1:le,0);H===S.children.length?S.ticked=!0:H>0&&(S.indeterminate=!0)}S.indeterminate===!0&&(S.indeterminateNextState=S.children.every(H=>H.tickable!==!0||H.ticked!==!0))}return S};return t.nodes.forEach(n=>f(n,null)),r});Ee(()=>t.ticked,r=>{u.value=r}),Ee(()=>t.expanded,r=>{v.value=r});function Z(r){const f=[].reduce,n=(m,h)=>{if(m||!h)return m;if(Array.isArray(h)===!0)return f.call(Object(h),n,m);if(h[t.nodeKey]===r)return h;if(h[t.childrenKey])return n(null,h[t.childrenKey])};return n(null,t.nodes)}function ve(){return u.value.map(r=>Z(r))}function _e(){return v.value.map(r=>Z(r))}function ye(r){return r&&F.value[r]?F.value[r].expanded:!1}function pe(){t.expanded!==void 0?d("update:expanded",[]):v.value=[]}function ce(){const r=v.value,f=n=>{n[t.childrenKey]&&n[t.childrenKey].length>0&&n.expandable!==!1&&n.disabled!==!0&&(r.push(n[t.nodeKey]),n[t.childrenKey].forEach(f))};t.nodes.forEach(f),t.expanded!==void 0?d("update:expanded",r):v.value=r}function te(r,f,n=Z(r),m=F.value[r]){if(m.lazy&&m.lazy!=="loaded"){if(m.lazy==="loading")return;c.value[r]="loading",Array.isArray(n[t.childrenKey])!==!0&&(n[t.childrenKey]=[]),d("lazyLoad",{node:n,key:r,done:h=>{c.value[r]="loaded",n[t.childrenKey]=Array.isArray(h)===!0?h:[],at(()=>{const g=F.value[r];g&&g.isParent===!0&&de(r,!0)})},fail:()=>{delete c.value[r],n[t.childrenKey].length===0&&delete n[t.childrenKey]}})}else m.isParent===!0&&m.expandable===!0&&de(r,f)}function de(r,f){let n=v.value;const m=t.expanded!==void 0;if(m===!0&&(n=n.slice()),f){if(t.accordion&&F.value[r]){const h=[];F.value[r].parent?F.value[r].parent.children.forEach(g=>{g.key!==r&&g.expandable===!0&&h.push(g.key)}):t.nodes.forEach(g=>{const I=g[t.nodeKey];I!==r&&h.push(I)}),h.length>0&&(n=n.filter(g=>h.includes(g)===!1))}n=n.concat([r]).filter((h,g,I)=>I.indexOf(h)===g)}else n=n.filter(h=>h!==r);m===!0?d("update:expanded",n):v.value=n}function be(r){return r&&F.value[r]?F.value[r].ticked:!1}function W(r,f){let n=u.value;const m=t.ticked!==void 0;m===!0&&(n=n.slice()),f?n=n.concat(r).filter((h,g,I)=>I.indexOf(h)===g):n=n.filter(h=>r.includes(h)===!1),m===!0&&d("update:ticked",n)}function ae(r,f,n){const m={tree:o,node:r,key:n,color:t.color,dark:l.value};return De(m,"expanded",()=>f.expanded,h=>{h!==f.expanded&&te(n,h)}),De(m,"ticked",()=>f.ticked,h=>{h!==f.ticked&&W([n],h)}),m}function ne(r){return(t.filter?r.filter(f=>F.value[f[t.nodeKey]].matchesFilter):r).map(f=>x(f))}function i(r){if(r.icon!==void 0)return y(X,{class:"q-tree__icon q-mr-sm",name:r.icon,color:r.iconColor});const f=r.img||r.avatar;if(f)return y("img",{class:`q-tree__${r.img?"img":"avatar"} q-mr-sm`,src:f})}function a(){d("afterShow")}function E(){d("afterHide")}function x(r){const f=r[t.nodeKey],n=F.value[f],m=r.header&&s[`header-${r.header}`]||s["default-header"],h=n.isParent===!0?ne(r[t.childrenKey]):[],g=h.length>0||n.lazy&&n.lazy!=="loaded";let I=r.body&&s[`body-${r.body}`]||s["default-body"];const N=m!==void 0||I!==void 0?ae(r,n,f):null;return I!==void 0&&(I=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:z.value},[I(N)])])),y("div",{key:f,class:`q-tree__node relative-position q-tree__node--${g===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(n.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(n.selected===!0?" q-tree__node--selected":"")+(n.disabled===!0?" q-tree__node--disabled":""),tabindex:n.link===!0?0:-1,onClick:L=>{D(r,n,L)},onKeypress(L){nt(L)!==!0&&(L.keyCode===13?D(r,n,L,!0):L.keyCode===32&&k(r,n,L,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:L=>{_[n.key]=L}}),n.lazy==="loading"?y(rt,{class:"q-tree__spinner",color:M.value}):g===!0?y(X,{class:"q-tree__arrow"+(n.expanded===!0?" q-tree__arrow--rotate":""),name:K.value,onClick(L){k(r,n,L)}}):null,n.hasTicking===!0&&n.noTick!==!0?y(it,{class:"q-tree__tickbox",modelValue:n.indeterminate===!0?null:n.ticked,color:M.value,dark:l.value,dense:!0,keepColor:!0,disable:n.tickable!==!0,onKeydown:He,"onUpdate:modelValue":L=>{w(n,L)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(n.selected===!0?A.value:z.value)},[m?m(N):[i(r),y("div",r[t.labelKey])]])]),g===!0?t.noTransition===!0?y("div",{class:"q-tree__node-collapsible"+z.value,key:`${f}__q`},[I,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},n.expanded?h:null)]):y(vt,{duration:t.duration,onShow:a,onHide:E},()=>lt(y("div",{class:"q-tree__node-collapsible"+z.value,key:`${f}__q`},[I,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},h)]),[[ot,n.expanded]])):I])}function C(r){const f=_[r];f&&f.focus()}function D(r,f,n,m){m!==!0&&C(f.key),P.value&&f.selectable?t.noSelectionUnset===!1?d("update:selected",f.key!==t.selected?f.key:null):f.key!==t.selected&&d("update:selected",f.key===void 0?null:f.key):k(r,f,n,m),typeof r.handler=="function"&&r.handler(r)}function k(r,f,n,m){n!==void 0&&He(n),m!==!0&&C(f.key),te(f.key,!f.expanded,r,f)}function w(r,f){if(r.indeterminate===!0&&(f=r.indeterminateNextState),r.strictTicking)W([r.key],f);else if(r.leafTicking){const n=[],m=h=>{h.isParent?(f!==!0&&h.noTick!==!0&&h.tickable===!0&&n.push(h.key),h.leafTicking===!0&&h.children.forEach(m)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&n.push(h.key)};m(r),W(n,f)}}return t.defaultExpandAll===!0&&ce(),Object.assign(o,{getNodeByKey:Z,getTickedNodes:ve,getExpandedNodes:_e,isExpanded:ye,collapseAll:pe,expandAll:ce,setExpanded:te,isTicked:be,setTicked:W}),()=>{const r=ne(t.nodes);return y("div",{class:T.value},r.length===0?t.filter?t.noResultsLabel||e.lang.tree.noResults:t.noNodesLabel||e.lang.tree.noNodes:r)}}}),wt=ee({name:"QBanner",props:{...Me,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:s}){const{proxy:{$q:d}}=ue(),o=Pe(t,d),e=q(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),l=q(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const c=[y("div",{class:"q-banner__avatar col-auto row items-center self-start"},J(s.avatar)),y("div",{class:"q-banner__content col text-body2"},J(s.default))],u=J(s.action);return u!==void 0&&c.push(y("div",{class:l.value},u)),y("div",{class:e.value+(t.inlineActions===!1&&u!==void 0?" q-banner--top-padding":""),role:"alert"},c)}}}),Et=ee({name:"QPopupProxy",props:{...ft,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:s,emit:d,attrs:o}){const{proxy:e}=ue(),{$q:l}=e,c=j(!1),u=j(null),v=q(()=>parseInt(t.breakpoint,10)),{canShow:_}=ht({showing:c});function T(){return l.screen.width<v.value||l.screen.height<v.value?"dialog":"menu"}const P=j(T()),K=q(()=>P.value==="menu"?{maxHeight:"99vh"}:{});Ee(()=>T(),A=>{c.value!==!0&&(P.value=A)});function M(A){c.value=!0,d("show",A)}function z(A){c.value=!1,P.value=T(),d("hide",A)}return Object.assign(e,{show(A){_(A)===!0&&u.value.show(A)},hide(A){u.value.hide(A)},toggle(A){u.value.toggle(A)}}),De(e,"currentComponent",()=>({type:P.value,ref:u.value})),()=>{const A={ref:u,...K.value,...o,onShow:M,onHide:z};let B;return P.value==="dialog"?B=Ve:(B=Ye,Object.assign(A,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(B,A,s.default)}}}),Dt={class:"self-center full-width no-outline ellipsis",tabindex:"0"},Ct={__name:"GoalTreeSelect",props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],setup(t,{emit:s}){const d=t,o=q({get(){return d.modelValue},set(c){s("update:modelValue",c)}}),e=gt(),l=q(()=>d.modelValue?e.getItem(d.modelValue).name:null);return(c,u)=>(R(),Q(yt,{modelValue:O(o),"onUpdate:modelValue":u[1]||(u[1]=v=>Ae(o)?o.value=v:null),clearable:"","clear-icon":"close"},{control:b(()=>[Be("div",Dt,Ce(O(l)),1)]),append:b(()=>[p(X,{name:"keyboard_arrow_down"})]),default:b(()=>[p(Et,{fit:"","auto-close":""},{default:b(()=>[p(wt,null,{default:b(()=>[p(xt,{selected:O(o),"onUpdate:selected":u[0]||(u[0]=v=>Ae(o)?o.value=v:null),nodes:O(e).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Mt=ee({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:s}){const d=st(Ne,Te);if(d===Te)return console.error("QTimelineEntry needs to be child of QTimeline"),Te;const o=q(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),e=q(()=>`q-timeline__dot text-${t.color||d.color}`),l=q(()=>d.layout==="comfortable"&&d.side==="left");return()=>{const c=ut(s.default,[]);if(t.body!==void 0&&c.unshift(t.body),t.heading===!0){const _=[y("div"),y("div"),y(t.tag,{class:"q-timeline__heading-title"},c)];return y("div",{class:"q-timeline__heading"},l.value===!0?_.reverse():_)}let u;t.icon!==void 0?u=[y(X,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(u=[y("img",{class:"q-timeline__dot-img",src:t.avatar})]);const v=[y("div",{class:"q-timeline__subtitle"},[y("span",{},J(s.subtitle,[t.subtitle]))]),y("div",{class:e.value},u),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},J(s.title,[t.title]))].concat(c))];return y("li",{class:o.value},l.value===!0?v.reverse():v)}}});var Oe={};(function t(s,d,o,e){var l=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function c(){}function u(i){var a=d.exports.Promise,E=a!==void 0?a:s.Promise;return typeof E=="function"?new E(i):(i(c,c),null)}var v=function(){var i=Math.floor(16.666666666666668),a,E,x={},C=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(D){var k=Math.random();return x[k]=requestAnimationFrame(function w(r){C===r||C+i-1<r?(C=r,delete x[k],D()):x[k]=requestAnimationFrame(w)}),k},E=function(D){x[D]&&cancelAnimationFrame(x[D])}):(a=function(D){return setTimeout(D,i)},E=function(D){return clearTimeout(D)}),{frame:a,cancel:E}}(),_=function(){var i,a,E={};function x(C){function D(k,w){C.postMessage({options:k||{},callback:w})}C.init=function(w){var r=w.transferControlToOffscreen();C.postMessage({canvas:r},[r])},C.fire=function(w,r,f){if(a)return D(w,null),a;var n=Math.random().toString(36).slice(2);return a=u(function(m){function h(g){g.data.callback===n&&(delete E[n],C.removeEventListener("message",h),a=null,f(),m())}C.addEventListener("message",h),D(w,n),E[n]=h.bind(null,{data:{callback:n}})}),a},C.reset=function(){C.postMessage({reset:!0});for(var w in E)E[w](),delete E[w]}}return function(){if(i)return i;if(!o&&l){var C=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([C])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",D),null}x(i)}return i}}(),T={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function P(i,a){return a?a(i):i}function K(i){return i!=null}function M(i,a,E){return P(i&&K(i[a])?i[a]:T[a],E)}function z(i){return i<0?0:Math.floor(i)}function A(i,a){return Math.floor(Math.random()*(a-i))+i}function B(i){return parseInt(i,16)}function F(i){return i.map(Z)}function Z(i){var a=String(i).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:B(a.substring(0,2)),g:B(a.substring(2,4)),b:B(a.substring(4,6))}}function ve(i){var a=M(i,"origin",Object);return a.x=M(a,"x",Number),a.y=M(a,"y",Number),a}function _e(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function ye(i){var a=i.getBoundingClientRect();i.width=a.width,i.height=a.height}function pe(i){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=i,a}function ce(i,a,E,x,C,D,k,w,r){i.save(),i.translate(a,E),i.rotate(D),i.scale(x,C),i.arc(0,0,1,k,w,r),i.restore()}function te(i){var a=i.angle*(Math.PI/180),E=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-a+(.5*E-Math.random()*E),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar}}function de(i,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.wobble+=a.wobbleSpeed,a.velocity*=a.decay,a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble);var E=a.tick++/a.totalTicks,x=a.x+a.random*a.tiltCos,C=a.y+a.random*a.tiltSin,D=a.wobbleX+a.random*a.tiltCos,k=a.wobbleY+a.random*a.tiltSin;if(i.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-E)+")",i.beginPath(),a.shape==="circle")i.ellipse?i.ellipse(a.x,a.y,Math.abs(D-x)*a.ovalScalar,Math.abs(k-C)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):ce(i,a.x,a.y,Math.abs(D-x)*a.ovalScalar,Math.abs(k-C)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var w=Math.PI/2*3,r=4*a.scalar,f=8*a.scalar,n=a.x,m=a.y,h=5,g=Math.PI/h;h--;)n=a.x+Math.cos(w)*f,m=a.y+Math.sin(w)*f,i.lineTo(n,m),w+=g,n=a.x+Math.cos(w)*r,m=a.y+Math.sin(w)*r,i.lineTo(n,m),w+=g;else i.moveTo(Math.floor(a.x),Math.floor(a.y)),i.lineTo(Math.floor(a.wobbleX),Math.floor(C)),i.lineTo(Math.floor(D),Math.floor(k)),i.lineTo(Math.floor(x),Math.floor(a.wobbleY));return i.closePath(),i.fill(),a.tick<a.totalTicks}function be(i,a,E,x,C){var D=a.slice(),k=i.getContext("2d"),w,r,f=u(function(n){function m(){w=r=null,k.clearRect(0,0,x.width,x.height),C(),n()}function h(){o&&!(x.width===e.width&&x.height===e.height)&&(x.width=i.width=e.width,x.height=i.height=e.height),!x.width&&!x.height&&(E(i),x.width=i.width,x.height=i.height),k.clearRect(0,0,x.width,x.height),D=D.filter(function(g){return de(k,g)}),D.length?w=v.frame(h):m()}w=v.frame(h),r=m});return{addFettis:function(n){return D=D.concat(n),f},canvas:i,promise:f,reset:function(){w&&v.cancel(w),r&&r()}}}function W(i,a){var E=!i,x=!!M(a||{},"resize"),C=M(a,"disableForReducedMotion",Boolean),D=l&&!!M(a||{},"useWorker"),k=D?_():null,w=E?_e:ye,r=i&&k?!!i.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,n;function m(g,I,N){for(var L=M(g,"particleCount",z),G=M(g,"angle",Number),$=M(g,"spread",Number),V=M(g,"startVelocity",Number),re=M(g,"decay",Number),ie=M(g,"gravity",Number),U=M(g,"drift",Number),S=M(g,"colors",F),H=M(g,"ticks",Number),le=M(g,"shapes"),ke=M(g,"scalar"),qe=ve(g),Le=L,Se=[],Xe=i.width*qe.x,Ze=i.height*qe.y;Le--;)Se.push(te({x:Xe,y:Ze,angle:G,spread:$,startVelocity:V,color:S[Le%S.length],shape:le[A(0,le.length)],ticks:H,decay:re,gravity:ie,drift:U,scalar:ke}));return n?n.addFettis(Se):(n=be(i,Se,w,I,N),n.promise)}function h(g){var I=C||M(g,"disableForReducedMotion",Boolean),N=M(g,"zIndex",Number);if(I&&f)return u(function(V){V()});E&&n?i=n.canvas:E&&!i&&(i=pe(N),document.body.appendChild(i)),x&&!r&&w(i);var L={width:i.width,height:i.height};k&&!r&&k.init(i),r=!0,k&&(i.__confetti_initialized=!0);function G(){if(k){var V={getBoundingClientRect:function(){if(!E)return i.getBoundingClientRect()}};w(V),k.postMessage({resize:{width:V.width,height:V.height}});return}L.width=L.height=null}function $(){n=null,x&&s.removeEventListener("resize",G),E&&i&&(document.body.removeChild(i),i=null,r=!1)}return x&&s.addEventListener("resize",G,!1),k?k.fire(g,L,$):m(g,L,$)}return h.reset=function(){k&&k.reset(),n&&n.reset()},h}var ae;function ne(){return ae||(ae=W(null,{useWorker:!0,resize:!0})),ae}d.exports=function(){return ne().apply(this,arguments)},d.exports.reset=function(){ne().reset()},d.exports.create=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Oe,!1);const Fe=Oe.exports;Oe.exports.create;function Pt(){var t=3e3,s=Date.now()+t,d={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function o(l,c){return Math.random()*(c-l)+l}var e=setInterval(function(){var l=s-Date.now();if(l<=0)return clearInterval(e);var c=100*(l/t);Fe(Object.assign({},d,{particleCount:c,origin:{x:o(.1,.3),y:Math.random()-.2}})),Fe(Object.assign({},d,{particleCount:c,origin:{x:o(.7,.9),y:Math.random()-.2}}))},250)}const It=y("div",{class:"q-space"}),Ot=ee({name:"QSpace",setup(){return()=>It}}),qt=()=>!0;function Lt(t){const s={};return t.forEach(d=>{s[d]=qt}),s}function me(){const{emit:t,proxy:s}=ue(),d=j(null);function o(){d.value.show()}function e(){d.value.hide()}function l(u){t("ok",u),e()}function c(){t("hide")}return Object.assign(s,{show:o,hide:e}),{dialogRef:d,onDialogHide:c,onDialogOK:l,onDialogCancel:e}}const We=["ok","hide"];me.emits=We;me.emitsObject=Lt(We);const Ht=Be("div",{class:"text-h6"},"Progress",-1),At={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...me.emits],setup(t){const s=t,d=j(s.task.performance),o=j(null),e=q(()=>{let P="of "+s.task.target;const K=s.task.performance_history;return K&&K.length&&(P+=" · changed "+he.formatDate(K[0].updated,"DD.MM.YYYY HH:mm")),P}),{dialogRef:l,onDialogHide:c,onDialogOK:u,onDialogCancel:v}=me(),_=q(()=>d.value===s.task.performance&&!o.value);function T(){u({performance:d.value,duration:o.value})}return(P,K)=>(R(),Q(Ve,{ref_key:"dialogRef",ref:l,onHide:O(c)},{default:b(()=>[p(dt,{class:"q-dialog-plugin"},{default:b(()=>[p(Re,null,{default:b(()=>[Ht]),_:1}),p(Re,null,{default:b(()=>[p(bt,{modelValue:d.value,"onUpdate:modelValue":K[0]||(K[0]=M=>d.value=M),label:"Performance",hint:O(e)},null,8,["modelValue","hint"])]),_:1}),p(ct,{align:"right"},{default:b(()=>[p(fe,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:t.task.id}}},null,8,["to"]),p(Ot),p(fe,{flat:"",label:"Cancel",class:"text-primary",onClick:O(v)},null,8,["onClick"]),p(fe,{disable:O(_),flat:"",label:"Submit",class:"text-primary",onClick:T},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Rt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(t){const s=t,d=kt(),o=Ie(),e=q(()=>s.task.target>1&&!s.task.done),l=q(()=>e.value?s.task.performance/s.task.target:0),c=q(()=>[s.task.on_track+"%","·",s.task.performance,"of",s.task.target].join(" "));function u(){d.dialog({component:At,componentProps:{task:s.task}}).onOk(v=>{if(v.performance!==s.task.performance){v.performance>=s.task.target&&Pt();const _={performance:v.performance};o.updateItem(s.task.id+"/",_).then(()=>o.refetch())}})}return(v,_)=>(R(),Q(we,{clickable:"",active:Boolean(t.task.done),"active-class":"text-positive"},{default:b(()=>[t.task.done?(R(),Q(Y,{key:0,thumbnail:""},{default:b(()=>[p(X,{name:"done",color:"positive"})]),_:1})):t.task.group_id?(R(),Q(Y,{key:1,thumbnail:""},{default:b(()=>[p(X,{name:"event_repeat"})]),_:1})):(R(),Q(Y,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:_[0]||(_[0]=T=>v.$emit("ondragstart",T,t.task)),"onTouchmove:native":_[1]||(_[1]=T=>{})},{default:b(()=>[p(X,{name:"drag_indicator"})]),_:1})),p(Y,{onClick:u},{default:b(()=>[p(oe,null,{default:b(()=>[se(Ce(t.task.name),1)]),_:1}),O(e)?(R(),Q(oe,{key:0,caption:""},{default:b(()=>[se(Ce(O(c)),1)]),_:1})):ge("",!0),O(e)?(R(),Q(oe,{key:1},{default:b(()=>[p(_t,{value:O(l),color:"positive"},null,8,["value"])]),_:1})):ge("",!0)]),_:1})]),_:1},8,["active"]))}};var Ke;(function(t){var s=function(){function o(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(o.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),o.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},o.prototype.getData=function(e){return this._data[e]||""},o.prototype.setData=function(e,l){this._data[e]=l},o.prototype.setDragImage=function(e,l,c){var u=d._instance;u._imgCustom=e,u._imgOffset={x:l,y:c}},o}();t.DataTransfer=s;var d=function(){function o(){if(this._lastClick=0,o._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var l=document,c=this._touchstart.bind(this),u=this._touchmove.bind(this),v=this._touchend.bind(this),_=e?{passive:!1,capture:!1}:!1;l.addEventListener("touchstart",c,_),l.addEventListener("touchmove",u,_),l.addEventListener("touchend",v),l.addEventListener("touchcancel",v)}}return o.getInstance=function(){return o._instance},o.prototype._touchstart=function(e){var l=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<o._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(e.target);c&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=c,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){l._dragSource==c&&l._img==null&&l._dispatchEvent(e,"contextmenu",c)&&l._reset()},o._CTXMENU),o._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){l._isDragEnabled=!0,l._touchmove(e)},o._PRESSHOLDAWAIT)))}},o.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var l=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",l)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",l)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),l!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",l),this._lastTarget=l),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",l))}},o.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},o.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},o.prototype._shouldHandleMove=function(e){return!o._ISPRESSHOLDMODE&&this._shouldHandle(e)},o.prototype._shouldHandlePressHoldMove=function(e){return o._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},o.prototype._shouldCancelPressHoldMove=function(e){return o._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>o._PRESSHOLDMARGIN},o.prototype._shouldStartDragging=function(e){var l=this._getDelta(e);return l>o._THRESHOLD||o._ISPRESSHOLDMODE&&l>=o._PRESSHOLDTHRESHOLD},o.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},o.prototype._getPoint=function(e,l){return e&&e.touches&&(e=e.touches[0]),{x:l?e.pageX:e.clientX,y:l?e.pageY:e.clientY}},o.prototype._getDelta=function(e){if(o._ISPRESSHOLDMODE&&!this._ptDown)return 0;var l=this._getPoint(e);return Math.abs(l.x-this._ptDown.x)+Math.abs(l.y-this._ptDown.y)},o.prototype._getTarget=function(e){for(var l=this._getPoint(e),c=document.elementFromPoint(l.x,l.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},o.prototype._createImage=function(e){this._img&&this._destroyImage();var l=this._imgCustom||this._dragSource;if(this._img=l.cloneNode(!0),this._copyStyle(l,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=l.getBoundingClientRect(),u=this._getPoint(e);this._imgOffset={x:u.x-c.left,y:u.y-c.top},this._img.style.opacity=o._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},o.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},o.prototype._moveImage=function(e){var l=this;requestAnimationFrame(function(){if(l._img){var c=l._getPoint(e,!0),u=l._img.style;u.position="absolute",u.pointerEvents="none",u.zIndex="999999",u.left=Math.round(c.x-l._imgOffset.x)+"px",u.top=Math.round(c.y-l._imgOffset.y)+"px"}})},o.prototype._copyProps=function(e,l,c){for(var u=0;u<c.length;u++){var v=c[u];e[v]=l[v]}},o.prototype._copyStyle=function(e,l){if(o._rmvAtts.forEach(function(P){l.removeAttribute(P)}),e instanceof HTMLCanvasElement){var c=e,u=l;u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)}for(var v=getComputedStyle(e),_=0;_<v.length;_++){var T=v[_];T.indexOf("transition")<0&&(l.style[T]=v[T])}l.style.pointerEvents="none";for(var _=0;_<e.children.length;_++)this._copyStyle(e.children[_],l.children[_])},o.prototype._dispatchEvent=function(e,l,c){if(e&&c){var u=document.createEvent("Event"),v=e.touches?e.touches[0]:e;return u.initEvent(l,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,e,o._kbdProps),this._copyProps(u,v,o._ptProps),u.dataTransfer=this._dataTransfer,c.dispatchEvent(u),u.defaultPrevented}return!1},o.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},o}();d._instance=new d,d._THRESHOLD=5,d._OPACITY=.5,d._DBLCLICK=500,d._CTXMENU=900,d._ISPRESSHOLDMODE=!1,d._PRESSHOLDAWAIT=400,d._PRESSHOLDMARGIN=25,d._PRESSHOLDTHRESHOLD=0,d._rmvAtts="id,class,style,draggable".split(","),d._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),d._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=d})(Ke||(Ke={}));const Qt={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0}},setup(t){const s=t,d=Ie(),o=q(()=>s.week.tasks.length?[...s.week.tasks].sort((_,T)=>T.target-_.target):null),e=new Date(s.week.day),l=he.formatDate(e,"w-Q-YYYY-MMM D").split("-"),c=["Week "+l[0],"Q"+l[1],l[2],l[3]].join(" · ");function u(_,T){const P={id:T.id,day:he.getDayOfWeek(T.starts),week:l[0]};_.dataTransfer.setData("text",JSON.stringify(P)),_.dataTransfer.dropEffect="move"}function v(_){const T=JSON.parse(_.dataTransfer.getData("text"));if(T.week===l[0])return;const P={starts:he.addToDate(e,{days:T.day-1}).toISOString()};d.updateItem(T.id+"/",P).then(()=>d.refetch())}return(_,T)=>(R(),Q(Mt,{subtitle:O(c),onDragover:T[0]||(T[0]=xe(()=>{},["prevent"])),onDragenter:T[1]||(T[1]=xe(()=>{},["prevent"])),onDrop:T[2]||(T[2]=xe(P=>v(P),["prevent"]))},{default:b(()=>[O(o)?(R(),Q(Ue,{key:0},{default:b(()=>[(R(!0),$e(je,null,ze(O(o),P=>(R(),Q(pt,{key:P.id,style:{"min-height":"51.19px"}},{default:b(()=>[p(Rt,{task:P,onOndragstart:u},null,8,["task"])]),_:2},1024))),128))]),_:1})):ge("",!0)]),_:1},8,["subtitle"]))}},Zt={__name:"HomeView",setup(t){const s=Ie();return(d,o)=>(R(),Q(mt,{padding:""},{default:b(()=>[p(Je,null,{default:b(()=>[p(Ge,null,{default:b(()=>[se("Plan")]),_:1}),p(Ct,{modelValue:O(s).filter.goal,"onUpdate:modelValue":o[0]||(o[0]=e=>O(s).filter.goal=e),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),p(fe,{flat:"",round:"",icon:"filter_list"},{default:b(()=>[p(Ye,null,{default:b(()=>[p(Ue,null,{default:b(()=>[p(we,null,{default:b(()=>[p(Y,null,{default:b(()=>[p(oe,null,{default:b(()=>[se("Hide passed done")]),_:1})]),_:1}),p(Y,{side:""},{default:b(()=>[p(Qe,{modelValue:O(s).filter.done,"onUpdate:modelValue":o[1]||(o[1]=e=>O(s).filter.done=e)},null,8,["modelValue"])]),_:1})]),_:1}),p(we,null,{default:b(()=>[p(Y,null,{default:b(()=>[p(oe,null,{default:b(()=>[se("Hide passed recurring")]),_:1})]),_:1}),p(Y,{side:""},{default:b(()=>[p(Qe,{modelValue:O(s).filter.recurring,"onUpdate:modelValue":o[2]||(o[2]=e=>O(s).filter.recurring=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),O(s).calendar?(R(),Q(St,{key:0,layout:"dense",class:"q-px-md"},{default:b(()=>[(R(!0),$e(je,null,ze(O(s).calendar,(e,l)=>(R(),Q(Qt,{key:l,color:l===O(s).currentWeek?"orange":"",week:e},null,8,["color","week"]))),128))]),_:1})):ge("",!0)]),_:1}))}};export{Zt as default};
