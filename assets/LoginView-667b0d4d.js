import{c as m,a as p,b as f,d as v,cp as x,cq as Q,g as k,u as B,q as C,t as V,r as q,v as i,z as S,x as g,y as r,B as a,C as z,Q as b,I as T,bM as I,J as A,cl as U}from"./index-386167df.js";import{u as $,a as D,b as L,Q as N}from"./QToolbar-c60b0fe7.js";import{Q as y,a as P}from"./QForm-293f4fb1.js";import"./focus-manager-4e5c0bab.js";import"./use-form-04b407ac.js";const h=m({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const t=p(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>f(e.tag,{class:t.value},v(o.default))}}),F=m({name:"QCardActions",props:{...x,vertical:Boolean},setup(e,{slots:o}){const t=Q(e),l=p(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>f("div",{class:l.value},v(o.default))}}),M=m({name:"QCard",props:{...$,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:t}}=k(),l=D(e,t),s=p(()=>"q-card"+(l.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>f(e.tag,{class:s.value},v(o.default))}}),R={class:"fullscreen bg-blue flex flex-center"},E=A("div",{class:"text-caption text-grey text-center"},"demo/demofirst daily data refresh",-1),O={__name:"LoginView",setup(e){const o=B(),t=C(),l=V();l.loggedIn&&o.push(t.query.next?t.query.next:"/");const s=q({username:"",password:""}),u=q(!1);function w(){!s.value.username||!s.value.password||(u.value=!0,l.login(s.value).then(n=>{n&&n.token?(l.setToken(n.token),o.push(t.query.next)):u.value=!1}).catch(()=>u.value=!1))}function _(n){return!!n||"Field is required"}return(n,d)=>(i(),S("div",R,[u.value?(i(),g(U,{key:0,color:"primary",size:"3em"})):(i(),g(M,{key:1,style:{width:"20rem"}},{default:r(()=>[a(N,{class:"bg-primary text-white q-px-md"},{default:r(()=>[a(L,null,{default:r(()=>[z("LifeTrackerBuddy")]),_:1})]),_:1}),a(P,{onSubmit:I(w,["prevent"])},{default:r(()=>[a(h,null,{default:r(()=>[a(y,{modelValue:s.value.username,"onUpdate:modelValue":d[0]||(d[0]=c=>s.value.username=c),label:"Username",rules:[_]},{prepend:r(()=>[a(b,{name:"person_outline"})]),_:1},8,["modelValue","rules"]),a(y,{modelValue:s.value.password,"onUpdate:modelValue":d[1]||(d[1]=c=>s.value.password=c),type:"password",label:"Password",rules:[_]},{prepend:r(()=>[a(b,{name:"lock_outline"})]),_:1},8,["modelValue","rules"])]),_:1}),a(h,{class:"q-pt-none"},{default:r(()=>[E]),_:1}),a(F,{class:"q-pa-md"},{default:r(()=>[a(T,{type:"submit",class:"bg-primary text-white full-width",label:"Login"})]),_:1})]),_:1},8,["onSubmit"])]),_:1}))]))}};export{O as default};
