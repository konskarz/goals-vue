import{u as Ve,a as Be,b as Qe}from"./use-dark-76697cae.js";import{c as ee,g as $e,H as We,a2 as ge,j as H,h as M,G as Q,Q as D,R as w,S as T,T as I,a0 as F,W as $,a3 as Ye,Z as k,m as je,a4 as Ue,r as Xe,i as le,a5 as ze,F as Ze,d as Ke,e as Z,k as Ge,$ as G,V as ve,a1 as Je,U as B,_ as et,Y as _e,X as pe,a6 as K,E as tt,a7 as nt}from"./index-0fdc49f5.js";import{Q as rt}from"./QSlideTransition-a6e74b00.js";import{u as W,d as at,M as it}from"./MainPage-8412275f.js";import{Q as ue}from"./QToggle-252070a1.js";import{_ as ot}from"./GoalSelect-c68166a9.js";import{a as A,Q as ye,b as st}from"./QItemLabel-b81734ba.js";import{_ as J}from"./ProgressLabel-165b1df2.js";import"./format-8c778330.js";import"./use-field-6a3f67fa.js";import"./uid-6a237b22.js";import"./use-timeout-da1c750b.js";import"./use-model-toggle-38450808.js";const lt=ee({name:"QTimeline",props:{...Ve,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},layout:{type:String,default:"dense",validator:r=>["dense","comfortable","loose"].includes(r)}},setup(r,{slots:o}){const s=$e(),a=Be(r,s.proxy.$q);We(ge,r);const e=H(()=>`q-timeline q-timeline--${r.layout} q-timeline--${r.layout}--${r.side}`+(a.value===!0?" q-timeline--dark":""));return()=>M("ul",{class:e.value},Q(o.default))}}),ut={__name:"ProgressItem",props:{item:{type:Object,required:!0}},setup(r){return(o,s)=>(D(),w(ye,null,{default:T(()=>[I(A,null,{default:T(()=>[r.item.target>0?(D(),w(J,{key:0,value:r.item.performance/r.item.target,label:r.item.performance+" of "+r.item.target,color:"positive","label-icon":"event",caption:""},null,8,["value","label"])):F("",!0),r.item.rperformance!==null?(D(),w(J,{key:1,value:r.item.rperformance/r.item.rtarget,label:(r.item.rperformance/r.item.rtarget*100).toFixed(2)+"% for "+r.item.rtarget,color:"primary","label-icon":"event_repeat",caption:""},null,8,["value","label"])):F("",!0)]),_:1})]),_:1}))}},ct={class:"row q-pl-lg q-pr-sm"},dt={__name:"HomePane",setup(r){const o=W();return(s,a)=>(D(),$("div",null,[Ye("div",ct,[I(ot,{modelValue:k(o).filter.goal,"onUpdate:modelValue":a[0]||(a[0]=e=>k(o).filter.goal=e),label:"Filter by goal",borderless:s.$q.screen.gt.xs,dense:"","hide-bottom-space":"",class:"col-12 col-sm q-pb-md q-pr-md"},null,8,["modelValue","borderless"]),I(ue,{modelValue:k(o).filter.pastDone,"onUpdate:modelValue":a[1]||(a[1]=e=>k(o).filter.pastDone=e),label:"Show past done",dense:"",class:"q-pb-md q-pr-md"},null,8,["modelValue"]),I(ue,{modelValue:k(o).filter.pastRecurring,"onUpdate:modelValue":a[2]||(a[2]=e=>k(o).filter.pastRecurring=e),label:"Show past recurring",dense:"",class:"q-pb-md q-pr-lg"},null,8,["modelValue"])]),k(o).progress?(D(),w(ut,{key:0,item:k(o).progress,class:"q-pb-lg q-px-lg"},null,8,["item"])):F("",!0)]))}},ce={threshold:0,root:null,rootMargin:"0px"};function de(r,o,s){let a,e,i;typeof s=="function"?(a=s,e=ce,i=o.cfg===void 0):(a=s.handler,e=Object.assign({},ce,s.cfg),i=o.cfg===void 0||Ue(o.cfg,e)===!1),o.handler!==a&&(o.handler=a),i===!0&&(o.cfg=e,o.observer!==void 0&&o.observer.unobserve(r),o.observer=new IntersectionObserver(([u])=>{if(typeof o.handler=="function"){if(u.rootBounds===null&&document.body.contains(r)===!0){o.observer.unobserve(r),o.observer.observe(r);return}(o.handler(u,o.observer)===!1||o.once===!0&&u.isIntersecting===!0)&&be(r)}},e),o.observer.observe(r))}function be(r){const o=r.__qvisible;o!==void 0&&(o.observer!==void 0&&o.observer.unobserve(r),delete r.__qvisible)}const ht=je({name:"intersection",mounted(r,{modifiers:o,value:s}){const a={once:o.once===!0};de(r,a,s),r.__qvisible=a},updated(r,o){const s=r.__qvisible;s!==void 0&&de(r,s,o.value)},beforeUnmount:be}),ft=ee({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(r,{slots:o,emit:s}){const a=Xe(le.value===!0?r.ssrPrerender:!1),e=H(()=>r.root!==void 0||r.margin!==void 0||r.threshold!==void 0?{handler:c,cfg:{root:r.root,rootMargin:r.margin,threshold:r.threshold}}:c),i=H(()=>r.disable!==!0&&(le.value!==!0||r.once!==!0||r.ssrPrerender!==!0)),u=H(()=>[[ht,e.value,void 0,{once:r.once}]]),l=H(()=>`--q-transition-duration: ${r.transitionDuration}ms`);function c(C){a.value!==C.isIntersecting&&(a.value=C.isIntersecting,r.onVisibility!==void 0&&s("visibility",a.value))}function b(){if(a.value===!0)return[M("div",{key:"content",style:l.value},Q(o.default))];if(o.hidden!==void 0)return[M("div",{key:"hidden",style:l.value},o.hidden())]}return()=>{const C=r.transition?[M(ze,{name:"q-transition--"+r.transition},b)]:b();return Ze(r.tag,{class:"q-intersection"},C,"main",i.value,()=>u.value)}}}),mt=ee({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(r,{slots:o}){const s=Ke(ge,Z);if(s===Z)return console.error("QTimelineEntry needs to be child of QTimeline"),Z;const a=H(()=>`q-timeline__entry q-timeline__entry--${r.side}`+(r.icon!==void 0||r.avatar!==void 0?" q-timeline__entry--icon":"")),e=H(()=>`q-timeline__dot text-${r.color||s.color}`),i=H(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const u=Ge(o.default,[]);if(r.body!==void 0&&u.unshift(r.body),r.heading===!0){const b=[M("div"),M("div"),M(r.tag,{class:"q-timeline__heading-title"},u)];return M("div",{class:"q-timeline__heading"},i.value===!0?b.reverse():b)}let l;r.icon!==void 0?l=[M(G,{class:"row items-center justify-center",name:r.icon})]:r.avatar!==void 0&&(l=[M("img",{class:"q-timeline__dot-img",src:r.avatar})]);const c=[M("div",{class:"q-timeline__subtitle"},[M("span",{},Q(o.subtitle,[r.subtitle]))]),M("div",{class:e.value},l),M("div",{class:"q-timeline__content"},[M("h6",{class:"q-timeline__title"},Q(o.title,[r.title]))].concat(u))];return M("li",{class:a.value},i.value===!0?c.reverse():c)}}});var te={};(function r(o,s,a,e){var i=!!(o.Worker&&o.Blob&&o.Promise&&o.OffscreenCanvas&&o.OffscreenCanvasRenderingContext2D&&o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype.transferControlToOffscreen&&o.URL&&o.URL.createObjectURL);function u(){}function l(n){var t=s.exports.Promise,m=t!==void 0?t:o.Promise;return typeof m=="function"?new m(n):(n(u,u),null)}var c=function(){var n=Math.floor(16.666666666666668),t,m,d={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(g){var h=Math.random();return d[h]=requestAnimationFrame(function f(y){v===y||v+n-1<y?(v=y,delete d[h],g()):d[h]=requestAnimationFrame(f)}),h},m=function(g){d[g]&&cancelAnimationFrame(d[g])}):(t=function(g){return setTimeout(g,n)},m=function(g){return clearTimeout(g)}),{frame:t,cancel:m}}(),b=function(){var n,t,m={};function d(v){function g(h,f){v.postMessage({options:h||{},callback:f})}v.init=function(f){var y=f.transferControlToOffscreen();v.postMessage({canvas:y},[y])},v.fire=function(f,y,R){if(t)return g(f,null),t;var _=Math.random().toString(36).slice(2);return t=l(function(O){function P(p){p.data.callback===_&&(delete m[_],v.removeEventListener("message",P),t=null,R(),O())}v.addEventListener("message",P),g(f,_),m[_]=P.bind(null,{data:{callback:_}})}),t},v.reset=function(){v.postMessage({reset:!0});for(var f in m)m[f](),delete m[f]}}return function(){if(n)return n;if(!a&&i){var v=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{n=new Worker(URL.createObjectURL(new Blob([v])))}catch(g){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",g),null}d(n)}return n}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(n,t){return t?t(n):n}function q(n){return n!=null}function S(n,t,m){return E(n&&q(n[t])?n[t]:C[t],m)}function Se(n){return n<0?0:Math.floor(n)}function De(n,t){return Math.floor(Math.random()*(t-n))+n}function Y(n){return parseInt(n,16)}function Ee(n){return n.map(Me)}function Me(n){var t=String(n).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:Y(t.substring(0,2)),g:Y(t.substring(2,4)),b:Y(t.substring(4,6))}}function we(n){var t=S(n,"origin",Object);return t.x=S(t,"x",Number),t.y=S(t,"y",Number),t}function Te(n){n.width=document.documentElement.clientWidth,n.height=document.documentElement.clientHeight}function Ie(n){var t=n.getBoundingClientRect();n.width=t.width,n.height=t.height}function ke(n){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=n,t}function Ce(n,t,m,d,v,g,h,f,y){n.save(),n.translate(t,m),n.rotate(g),n.scale(d,v),n.arc(0,0,1,h,f,y),n.restore()}function Pe(n){var t=n.angle*(Math.PI/180),m=n.spread*(Math.PI/180);return{x:n.x,y:n.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:n.startVelocity*.5+Math.random()*n.startVelocity,angle2D:-t+(.5*m-Math.random()*m),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:n.color,shape:n.shape,tick:0,totalTicks:n.ticks,decay:n.decay,drift:n.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:n.gravity*3,ovalScalar:.6,scalar:n.scalar}}function Oe(n,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var m=t.tick++/t.totalTicks,d=t.x+t.random*t.tiltCos,v=t.y+t.random*t.tiltSin,g=t.wobbleX+t.random*t.tiltCos,h=t.wobbleY+t.random*t.tiltSin;if(n.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-m)+")",n.beginPath(),t.shape==="circle")n.ellipse?n.ellipse(t.x,t.y,Math.abs(g-d)*t.ovalScalar,Math.abs(h-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Ce(n,t.x,t.y,Math.abs(g-d)*t.ovalScalar,Math.abs(h-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var f=Math.PI/2*3,y=4*t.scalar,R=8*t.scalar,_=t.x,O=t.y,P=5,p=Math.PI/P;P--;)_=t.x+Math.cos(f)*R,O=t.y+Math.sin(f)*R,n.lineTo(_,O),f+=p,_=t.x+Math.cos(f)*y,O=t.y+Math.sin(f)*y,n.lineTo(_,O),f+=p;else n.moveTo(Math.floor(t.x),Math.floor(t.y)),n.lineTo(Math.floor(t.wobbleX),Math.floor(v)),n.lineTo(Math.floor(g),Math.floor(h)),n.lineTo(Math.floor(d),Math.floor(t.wobbleY));return n.closePath(),n.fill(),t.tick<t.totalTicks}function He(n,t,m,d,v){var g=t.slice(),h=n.getContext("2d"),f,y,R=l(function(_){function O(){f=y=null,h.clearRect(0,0,d.width,d.height),v(),_()}function P(){a&&!(d.width===e.width&&d.height===e.height)&&(d.width=n.width=e.width,d.height=n.height=e.height),!d.width&&!d.height&&(m(n),d.width=n.width,d.height=n.height),h.clearRect(0,0,d.width,d.height),g=g.filter(function(p){return Oe(h,p)}),g.length?f=c.frame(P):O()}f=c.frame(P),y=O});return{addFettis:function(_){return g=g.concat(_),R},canvas:n,promise:R,reset:function(){f&&c.cancel(f),y&&y()}}}function ne(n,t){var m=!n,d=!!S(t||{},"resize"),v=S(t,"disableForReducedMotion",Boolean),g=i&&!!S(t||{},"useWorker"),h=g?b():null,f=m?Te:Ie,y=n&&h?!!n.__confetti_initialized:!1,R=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_;function O(p,U,X){for(var x=S(p,"particleCount",Se),N=S(p,"angle",Number),V=S(p,"spread",Number),L=S(p,"startVelocity",Number),Re=S(p,"decay",Number),qe=S(p,"gravity",Number),Le=S(p,"drift",Number),ae=S(p,"colors",Ee),xe=S(p,"ticks",Number),ie=S(p,"shapes"),Fe=S(p,"scalar"),oe=we(p),se=x,z=[],Ae=n.width*oe.x,Ne=n.height*oe.y;se--;)z.push(Pe({x:Ae,y:Ne,angle:N,spread:V,startVelocity:L,color:ae[se%ae.length],shape:ie[De(0,ie.length)],ticks:xe,decay:Re,gravity:qe,drift:Le,scalar:Fe}));return _?_.addFettis(z):(_=He(n,z,f,U,X),_.promise)}function P(p){var U=v||S(p,"disableForReducedMotion",Boolean),X=S(p,"zIndex",Number);if(U&&R)return l(function(L){L()});m&&_?n=_.canvas:m&&!n&&(n=ke(X),document.body.appendChild(n)),d&&!y&&f(n);var x={width:n.width,height:n.height};h&&!y&&h.init(n),y=!0,h&&(n.__confetti_initialized=!0);function N(){if(h){var L={getBoundingClientRect:function(){if(!m)return n.getBoundingClientRect()}};f(L),h.postMessage({resize:{width:L.width,height:L.height}});return}x.width=x.height=null}function V(){_=null,d&&o.removeEventListener("resize",N),m&&n&&(document.body.removeChild(n),n=null,y=!1)}return d&&o.addEventListener("resize",N,!1),h?h.fire(p,x,V):O(p,x,V)}return P.reset=function(){h&&h.reset(),_&&_.reset()},P}var j;function re(){return j||(j=ne(null,{useWorker:!0,resize:!0})),j}s.exports=function(){return re().apply(this,arguments)},s.exports.reset=function(){re().reset()},s.exports.create=ne})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),te,!1);const he=te.exports;te.exports.create;function fe(){var r=3e3,o=Date.now()+r,s={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function a(i,u){return Math.random()*(u-i)+i}var e=setInterval(function(){var i=o-Date.now();if(i<=0)return clearInterval(e);var u=100*(i/r);he(Object.assign({},s,{particleCount:u,origin:{x:a(.1,.3),y:Math.random()-.2}})),he(Object.assign({},s,{particleCount:u,origin:{x:a(.7,.9),y:Math.random()-.2}}))},250)}const gt={__name:"TaskListItem",props:{item:{type:Object,required:!0}},emits:["ondragstart"],setup(r,{emit:o}){const s=r,a=W(),e=H(()=>s.item.target>1&&!s.item.done),i=H(()=>!s.item.performance_history||!s.item.performance_history.length?null:at.formatDate(s.item.performance_history[0].updated,"DD.MM.YYYY HH:mm"));function u(E){o("ondragstart",E,s.item)}function l(E,q){E.push({name:"task",params:{id:q}})}function c(){const E={done:null};s.item.performance>=s.item.target&&(E.performance=s.item.target-1),a.updateItem(s.item.id+"/",E).then(()=>a.refetch())}function b(){const E={performance:s.item.performance+1};E.performance>=s.item.target&&fe(),a.updateItem(s.item.id+"/",E).then(()=>a.refetch())}function C(){const E={done:new Date().toISOString()};fe(),a.updateItem(s.item.id+"/",E).then(()=>a.refetch())}return(E,q)=>(D(),w(ye,{clickable:"",active:!!r.item.done,"active-class":"text-positive"},{default:T(()=>[r.item.group_id?(D(),w(A,{key:0,thumbnail:""},{default:T(()=>[I(G,{name:"event_repeat"})]),_:1})):(D(),w(A,{key:1,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:u,"onTouchmove:native":q[0]||(q[0]=S=>{})},{default:T(()=>[I(G,{name:"drag_indicator"})]),_:1})),I(A,{onClick:q[1]||(q[1]=S=>l(E.$router,r.item.id))},{default:T(()=>[I(st,null,{default:T(()=>[ve(Je(r.item.name),1)]),_:1}),e.value?(D(),w(J,{key:0,value:r.item.performance/r.item.target,label:r.item.performance+" of "+r.item.target,hint:i.value,color:"positive","label-icon":"track_changes","hint-icon":"update",caption:""},null,8,["value","label","hint"])):F("",!0)]),_:1}),I(A,{avatar:""},{default:T(()=>[r.item.done?(D(),w(B,{key:0,flat:"",round:"",icon:"check_box",onClick:c})):e.value?(D(),w(B,{key:1,flat:"",round:"",icon:"plus_one",onClick:b})):(D(),w(B,{key:2,flat:"",round:"",icon:"check_box_outline_blank",onClick:C}))]),_:1})]),_:1},8,["active"]))}};var me;(function(r){var o=function(){function a(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(a.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),a.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},a.prototype.getData=function(e){return this._data[e]||""},a.prototype.setData=function(e,i){this._data[e]=i},a.prototype.setDragImage=function(e,i,u){var l=s._instance;l._imgCustom=e,l._imgOffset={x:i,y:u}},a}();r.DataTransfer=o;var s=function(){function a(){if(this._lastClick=0,a._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var i=document,u=this._touchstart.bind(this),l=this._touchmove.bind(this),c=this._touchend.bind(this),b=e?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",u,b),i.addEventListener("touchmove",l,b),i.addEventListener("touchend",c),i.addEventListener("touchcancel",c)}}return a.getInstance=function(){return a._instance},a.prototype._touchstart=function(e){var i=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<a._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var u=this._closestDraggable(e.target);u&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=u,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){i._dragSource==u&&i._img==null&&i._dispatchEvent(e,"contextmenu",u)&&i._reset()},a._CTXMENU),a._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(e)},a._PRESSHOLDAWAIT)))}},a.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var i=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",i)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",i)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",i),this._lastTarget=i),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",i))}},a.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},a.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},a.prototype._shouldHandleMove=function(e){return!a._ISPRESSHOLDMODE&&this._shouldHandle(e)},a.prototype._shouldHandlePressHoldMove=function(e){return a._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},a.prototype._shouldCancelPressHoldMove=function(e){return a._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>a._PRESSHOLDMARGIN},a.prototype._shouldStartDragging=function(e){var i=this._getDelta(e);return i>a._THRESHOLD||a._ISPRESSHOLDMODE&&i>=a._PRESSHOLDTHRESHOLD},a.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new o,clearInterval(this._pressHoldInterval)},a.prototype._getPoint=function(e,i){return e&&e.touches&&(e=e.touches[0]),{x:i?e.pageX:e.clientX,y:i?e.pageY:e.clientY}},a.prototype._getDelta=function(e){if(a._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(e);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},a.prototype._getTarget=function(e){for(var i=this._getPoint(e),u=document.elementFromPoint(i.x,i.y);u&&getComputedStyle(u).pointerEvents=="none";)u=u.parentElement;return u},a.prototype._createImage=function(e){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var u=i.getBoundingClientRect(),l=this._getPoint(e);this._imgOffset={x:l.x-u.left,y:l.y-u.top},this._img.style.opacity=a._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},a.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},a.prototype._moveImage=function(e){var i=this;requestAnimationFrame(function(){if(i._img){var u=i._getPoint(e,!0),l=i._img.style;l.position="absolute",l.pointerEvents="none",l.zIndex="999999",l.left=Math.round(u.x-i._imgOffset.x)+"px",l.top=Math.round(u.y-i._imgOffset.y)+"px"}})},a.prototype._copyProps=function(e,i,u){for(var l=0;l<u.length;l++){var c=u[l];e[c]=i[c]}},a.prototype._copyStyle=function(e,i){if(a._rmvAtts.forEach(function(E){i.removeAttribute(E)}),e instanceof HTMLCanvasElement){var u=e,l=i;l.width=u.width,l.height=u.height,l.getContext("2d").drawImage(u,0,0)}for(var c=getComputedStyle(e),b=0;b<c.length;b++){var C=c[b];C.indexOf("transition")<0&&(i.style[C]=c[C])}i.style.pointerEvents="none";for(var b=0;b<e.children.length;b++)this._copyStyle(e.children[b],i.children[b])},a.prototype._dispatchEvent=function(e,i,u){if(e&&u){var l=document.createEvent("Event"),c=e.touches?e.touches[0]:e;return l.initEvent(i,!0,!0),l.button=0,l.which=l.buttons=1,this._copyProps(l,e,a._kbdProps),this._copyProps(l,c,a._ptProps),l.dataTransfer=this._dataTransfer,u.dispatchEvent(l),l.defaultPrevented}return!1},a.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},a}();s._instance=new s,s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),r.DragDropTouch=s})(me||(me={}));const vt={key:0},_t={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0},monday:{type:String,required:!0}},setup(r){const o=r,s=W(),a=H(()=>o.week.tasks.length?[...o.week.tasks].sort((u,l)=>l.target-u.target):null);function e(u,l){const c={id:l.id,planned:l.planned,monday:o.monday};u.dataTransfer.setData("text",JSON.stringify(c)),u.dataTransfer.dropEffect="move"}function i(u){const l=JSON.parse(u.dataTransfer.getData("text"));l.monday!==o.monday&&s.moveItem(l,o.monday)}return(u,l)=>(D(),w(mt,{subtitle:r.week.title,color:r.week.current?"orange":"primary",icon:r.week.start?"calendar_month":void 0,onDragover:l[0]||(l[0]=K(()=>{},["prevent"])),onDragenter:l[1]||(l[1]=K(()=>{},["prevent"])),onDrop:l[2]||(l[2]=K(c=>i(c),["prevent"]))},{default:T(()=>[a.value?(D(),$("div",vt,[(D(!0),$(_e,null,pe(a.value,c=>(D(),w(ft,{key:c.id,class:"min-h-58",once:""},{default:T(()=>[I(gt,{item:c,onOndragstart:e},null,8,["item"])]),_:2},1024))),128))])):F("",!0)]),_:1},8,["subtitle","color","icon"]))}},pt=et(_t,[["__scopeId","data-v-af0af097"]]),Ht={__name:"HomeView",setup(r){const o=W();return(s,a)=>(D(),w(it,null,{toolbar:T(()=>[I(Qe,null,{default:T(()=>[ve("Tasks")]),_:1}),I(B,{flat:"",round:"",icon:"more_vert",onClick:a[0]||(a[0]=e=>k(o).filter.show=!k(o).filter.show)})]),default:T(()=>[I(rt,null,{default:T(()=>[tt(I(dt,null,null,512),[[nt,k(o).filter.show]])]),_:1}),k(o).calendar?(D(),w(lt,{key:0,class:"q-pl-lg"},{default:T(()=>[(D(!0),$(_e,null,pe(k(o).calendar,(e,i)=>(D(),w(pt,{key:i,week:e,monday:i},null,8,["week","monday"]))),128))]),_:1})):F("",!0)]),_:1}))}};export{Ht as default};
