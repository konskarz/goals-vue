import{r as m,L as V,j as I,Q as b,R as k}from"./index-752174ae.js";import{Q as _}from"./QForm-6db3108c.js";function y(t,e,a){const n=m(t?{...e.getItem(t)}:a),u=m(t+"/"),l=m(!1),o=t?{...n.value}:null,f=V();function p(c,s){return Object.fromEntries(Object.entries(s).filter(([h,g])=>c[h]!==g))}function i(c,s){return Object.keys(p(c,s)).length}function r(){f.back()}function d(){l.value=!0,e.deleteItem(u.value).then(()=>{e.refetch(),r()})}function v(){l.value=!0,t?e.updateItem(u.value,p(o,{...n.value})).then(()=>{e.refetch(),r()}):e.createItem(n.value).then(()=>{e.refetch(),r()})}return{item:n,original:o,path:u,persist:l,changed:i,remove:d,save:v,back:r}}const Q={__name:"DateInput",props:{modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=I({get(){return a.modelValue?a.modelValue.slice(0,10):null},set(u){e("update:modelValue",u?new Date(u).toISOString():null)}});return(u,l)=>(b(),k(_,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o),type:"date","stack-label":""},null,8,["modelValue"]))}};export{Q as _,y as u};
