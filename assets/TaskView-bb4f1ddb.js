import{Z as s,_ as i,a0 as x,a2 as u,a3 as t,al as e,aF as C,ar as d,a5 as N,a4 as m,aq as y,az as Q,aG as P,at as $}from"./index-cefa593e.js";import{Q as B,a as D}from"./api.client-528a5c50.js";import{Q as O}from"./QForm-b63f4cee.js";import{Q as S}from"./QPage-e1dd6631.js";import{u as F,_ as U}from"./NumberInput-30a05f6d.js";import{u as I,_ as p}from"./DateInput-ba7a25fe.js";import{_ as K}from"./ParentSelect-c9c14d53.js";import{_ as A}from"./DurationInput-739d5309.js";import"./format-26ae4e5d.js";import"./QItemLabel-ea686458.js";import"./selection-310d3ea1.js";const G={class:"q-pa-md"},R={class:"row q-col-gutter-lg"},ee={__name:"TaskView",setup(z){const T=x(),c=F(),n=parseInt(T.params.id),f="recurring/",{item:l,path:V,persist:g,remove:_,save:b,back:k}=I({name:"",goal:null,planned:null,recurring_until:null,target:1,performance:0,planned_total_time:null,done:null,description:""},"/tasks/",n),v={type:"radio",model:"this",items:[{label:"This task",value:"this"},{label:"All tasks",value:"all"}]};function q(){l.value.group_id?c.dialog({title:"Delete recurring task",cancel:!0,ok:"Delete",options:v}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),_()}):_()}function w(){l.value.group_id?c.dialog({title:"Save recurring task",cancel:!0,ok:"Save",options:v}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),b()}):b()}return(r,o)=>(u(),s(S,{padding:""},{default:i(()=>[t(O,{onSubmit:$(w,["prevent"])},{default:i(()=>[t(B,null,{default:i(()=>[e(l).group_id?(u(),s(C,{key:0,icon:"event_repeat"})):d("",!0),t(D,null,{default:i(()=>[N("Task")]),_:1}),e(n)?(u(),s(m,{key:1,type:"button",flat:"",round:"",icon:"delete",disable:e(g),onClick:q},null,8,["disable"])):d("",!0),t(m,{type:"submit",flat:"",round:"",icon:"save",disable:!e(l).name||e(g)},null,8,["disable"]),t(m,{type:"button",flat:"",round:"",icon:"clear",onClick:e(k)},null,8,["onClick"])]),_:1}),y("div",G,[t(Q,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),label:"Name","stack-label":"",autofocus:!e(n),rules:[a=>!!a||"Field is required"],onKeyup:P(e(k),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),y("div",R,[t(K,{modelValue:e(l).goal,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).goal=a),label:"Goal",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(p,{modelValue:e(l).planned,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).planned=a),label:"Planned",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(n)?d("",!0):(u(),s(p,{key:0,modelValue:e(l).recurring_until,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).recurring_until=a),label:"Recurring until",class:"col-12 col-sm-6"},null,8,["modelValue"])),t(U,{modelValue:e(l).target,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).target=a),label:"Target",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(U,{modelValue:e(l).performance,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).performance=a),label:"Performance",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(A,{modelValue:e(l).planned_total_time,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).planned_total_time=a),label:"Planned total time",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(n)?(u(),s(p,{key:1,modelValue:e(l).done,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).done=a),label:"Done",class:"col-12 col-sm-6"},null,8,["modelValue"])):d("",!0)]),t(Q,{modelValue:e(l).description,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).description=a),type:"textarea",label:"Description","stack-label":"",class:"q-pt-md"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),_:1}))}};export{ee as default};
