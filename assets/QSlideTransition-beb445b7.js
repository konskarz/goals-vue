import{aZ as T,r as w,a_ as b,aC as I,d as E,c as C,a as L,h as H,as as O}from"./index-04da890e.js";function A(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),T.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function R(t){const{request:u,get:s}=b(),o=w(JSON.parse(localStorage.getItem(t)));function c(){s(t).then(n=>{o.value=n,localStorage.setItem(t,JSON.stringify(n))})}function f(n){return o.value.find(l=>l.id===n)}function a(n){return u({method:"post",url:t,data:n})}function r(n,l){return u({method:"patch",url:t+n,data:l})}function i(n){return u({method:"delete",url:t+n})}return c(),{data:o,refetch:c,getItem:f,createItem:a,updateItem:r,deleteItem:i}}const v=(t,u=null)=>t.filter(s=>s.parent===u).map(s=>({...s,children:v(t,s.id)})),B=I("GoalStore",()=>{const{data:t,refetch:u,getItem:s,createItem:o,updateItem:c,deleteItem:f}=R("/goals/"),a=E(()=>t.value?v(t.value):null);function r(i){const n=[i],l=p=>t.value.filter(m=>m.parent===p).forEach(m=>{n.push(m.id),l(m.id)});return l(i),n}return{data:t,refetch:u,getItem:s,createItem:o,updateItem:c,deleteItem:f,tree:a,getBranch:r}}),N=C({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:u,emit:s}){let o=!1,c,f,a=null,r=null,i,n;function l(){c&&c(),c=null,o=!1,a!==null&&(clearTimeout(a),a=null),r!==null&&(clearTimeout(r),r=null),f!==void 0&&f.removeEventListener("transitionend",i),i=null}function p(e,d,h){d!==void 0&&(e.style.height=`${d}px`),e.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,c=h}function m(e,d){e.style.overflowY=null,e.style.height=null,e.style.transition=null,l(),d!==n&&s(d)}function y(e,d){let h=0;f=e,o===!0?(l(),h=e.offsetHeight===e.scrollHeight?0:void 0):(n="hide",e.style.overflowY="hidden"),p(e,h,d),a=setTimeout(()=>{a=null,e.style.height=`${e.scrollHeight}px`,i=g=>{r=null,(Object(g)!==g||g.target===e)&&m(e,"show")},e.addEventListener("transitionend",i),r=setTimeout(i,t.duration*1.1)},100)}function S(e,d){let h;f=e,o===!0?l():(n="show",e.style.overflowY="hidden",h=e.scrollHeight),p(e,h,d),a=setTimeout(()=>{a=null,e.style.height=0,i=g=>{r=null,(Object(g)!==g||g.target===e)&&m(e,"hide")},e.addEventListener("transitionend",i),r=setTimeout(i,t.duration*1.1)},100)}return L(()=>{o===!0&&l()}),()=>H(O,{css:!1,appear:t.appear,onEnter:y,onLeave:S},u.default)}});export{N as Q,R as a,A as c,B as u};
