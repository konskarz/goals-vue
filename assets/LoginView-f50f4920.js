import{a0 as v,r as p,ab as w,a1 as c,a2 as a,aL as Q,a3 as x,a4 as y,a7 as i,a8 as e,b2 as g,aa as k,aJ as V,a_ as f,ae as _,aK as h,a9 as q,aN as B,aE as T,az as S}from"./index-2d7f9719.js";import{a as C,Q as L}from"./QToolbar-5a237d6c.js";import{Q as N}from"./QForm-8f49c606.js";const U={class:"fullscreen bg-blue flex flex-center"},z=T("img",{src:"icons/favicon.ico"},null,-1),R={__name:"LoginView",setup(I){const d=x(),l=y(),o=v();o.loggedIn&&d.push(l.query.next?l.query.next:"/");const s=p({username:"",password:""}),u=p(!1);function b(){!s.value.username||!s.value.password||(u.value=!0,o.login(s.value).then(r=>{r&&r.token?(o.setToken(r.token),d.push(l.query.next)):u.value=!1}))}function m(r){return!!r||"Field is required"}return(r,t)=>(i(),w("div",U,[u.value?(i(),c(S,{key:0,color:"primary",size:"3em"})):(i(),c(Q,{key:1,style:{width:"20rem"}},{default:a(()=>[e(L,{class:"bg-primary text-white"},{default:a(()=>[e(g,{size:"xs",square:""},{default:a(()=>[z]),_:1}),e(C,null,{default:a(()=>[k("LifeTrackerBuddy")]),_:1})]),_:1}),e(N,{onSubmit:B(b,["prevent"])},{default:a(()=>[e(V,null,{default:a(()=>[e(f,{modelValue:s.value.username,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value.username=n),label:"Username",rules:[m]},{prepend:a(()=>[e(_,{name:"person_outline"})]),_:1},8,["modelValue","rules"]),e(f,{modelValue:s.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.password=n),type:"password",label:"Password",rules:[m]},{prepend:a(()=>[e(_,{name:"lock_outline"})]),_:1},8,["modelValue","rules"])]),_:1}),e(h,{class:"q-pa-md"},{default:a(()=>[e(q,{type:"submit",class:"bg-primary text-white full-width",label:"Login"})]),_:1})]),_:1},8,["onSubmit"])]),_:1}))]))}};export{R as default};
