import{u as Y,a as Z,Q as ee,b as te}from"./QToolbar-d3f5c8d8.js";import{Q as ae}from"./QMenu-b5cae49a.js";import{c as L,g as P,i as F,e as y,l as O,r as w,a as d,w as S,o as G,h as oe,b as h,T as ne,p as J,d as U,f as X,j as le,k as R,m as re,n as se,u as ie,q as ue,s as ce,t as de,v as B,x as N,y as s,z as fe,F as ve,A as ge,B as l,Q as D,C as T,D as he,E as me,G as pe,_ as ye,H as _e,I as j,J as be,K as we}from"./index-ad79f6fd.js";import{Q as E,u as qe,a as Se,b as Qe,c as M,d as k,e as A}from"./QItemLabel-76142c35.js";import{g as xe,s as $e,a as W}from"./scroll-410001e8.js";import"./focus-manager-4e5c0bab.js";const Ce=L({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:v,emit:i}){const{proxy:{$q:t}}=P(),a=F(O,y);if(a===y)return console.error("QHeader needs to be child of QLayout"),y;const r=w(parseInt(e.heightHint,10)),f=w(!0),u=d(()=>e.reveal===!0||a.view.value.indexOf("H")>-1||t.platform.is.ios&&a.isContainer.value===!0),m=d(()=>{if(e.modelValue!==!0)return 0;if(u.value===!0)return f.value===!0?r.value:0;const o=r.value-a.scroll.value.position;return o>0?o:0}),c=d(()=>e.modelValue!==!0||u.value===!0&&f.value!==!0),Q=d(()=>e.modelValue===!0&&c.value===!0&&e.reveal===!0),b=d(()=>"q-header q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(c.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),x=d(()=>{const o=a.rows.value.top,_={};return o[0]==="l"&&a.left.space===!0&&(_[t.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),o[2]==="r"&&a.right.space===!0&&(_[t.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),_});function p(o,_){a.update("header",o,_)}function q(o,_){o.value!==_&&(o.value=_)}function H({height:o}){q(r,o),p("size",o)}function $(o){Q.value===!0&&q(f,!0),i("focusin",o)}S(()=>e.modelValue,o=>{p("space",o),q(f,!0),a.animate()}),S(m,o=>{p("offset",o)}),S(()=>e.reveal,o=>{o===!1&&q(f,e.modelValue)}),S(f,o=>{a.animate(),i("reveal",o)}),S(a.scroll,o=>{e.reveal===!0&&q(f,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const C={};return a.instances.header=C,e.modelValue===!0&&p("size",r.value),p("space",e.modelValue),p("offset",m.value),G(()=>{a.instances.header===C&&(a.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const o=oe(v.default,[]);return e.elevated===!0&&o.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(h(E,{debounce:0,onResize:H})),h("header",{class:b.value,style:x.value,onFocusin:$},o)}}}),ze=L({name:"QPageScroller",props:{...qe,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{default:()=>[18,18]}},emits:["click"],setup(e,{slots:v,emit:i}){const{proxy:{$q:t}}=P(),{$layout:a,getStickyContent:r}=Se(),f=w(null);let u;const m=d(()=>a.height.value-(a.isContainer.value===!0?a.containerHeight.value:t.screen.height));function c(){return e.reverse===!0?m.value-a.scroll.value.position>e.scrollOffset:a.scroll.value.position>e.scrollOffset}const Q=w(c());function b(){const $=c();Q.value!==$&&(Q.value=$)}function x(){e.reverse===!0?u===void 0&&(u=S(m,b)):p()}S(a.scroll,b),S(()=>e.reverse,x);function p(){u!==void 0&&(u(),u=void 0)}function q($){const C=xe(a.isContainer.value===!0?f.value:a.rootRef.value);$e(C,e.reverse===!0?a.height.value:0,e.duration),i("click",$)}function H(){return Q.value===!0?h("div",{ref:f,class:"q-page-scroller",onClick:q},r(v)):null}return x(),G(p),()=>h(ne,{name:"q-transition--fade"},H)}}),ke=L({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:v}){const{proxy:{$q:i}}=P(),t=F(O,y);if(t===y)return console.error("QPage needs to be a deep child of QLayout"),y;if(F(J,y)===y)return console.error("QPage needs to be child of QPageContainer"),y;const r=d(()=>{const u=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const m=t.isContainer.value===!0?t.containerHeight.value:i.screen.height;return e.styleFn(u,m)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-u+"px":i.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":i.screen.height-u+"px"}}),f=d(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>h("main",{class:f.value,style:r.value},U(v.default))}}),Le=L({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:i}}=P(),t=F(O,y);if(t===y)return console.error("QPageContainer needs to be child of QLayout"),y;X(J,!0);const a=d(()=>{const r={};return t.header.space===!0&&(r.paddingTop=`${t.header.size}px`),t.right.space===!0&&(r[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(r.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(r[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),r});return()=>h("div",{class:"q-page-container",style:a.value},U(v.default))}}),Pe=L({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:i}){const{proxy:{$q:t}}=P(),a=w(null),r=w(t.screen.height),f=w(e.container===!0?0:t.screen.width),u=w({position:0,direction:"down",inflectionPoint:0}),m=w(0),c=w(le.value===!0?0:W()),Q=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),b=d(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),x=d(()=>c.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${c.value}px`}:null),p=d(()=>c.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${c.value}px`,width:`calc(100% + ${c.value}px)`}:null);function q(n){if(e.container===!0||document.qScrollPrevented!==!0){const g={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};u.value=g,e.onScroll!==void 0&&i("scroll",g)}}function H(n){const{height:g,width:z}=n;let V=!1;r.value!==g&&(V=!0,r.value=g,e.onScrollHeight!==void 0&&i("scrollHeight",g),C()),f.value!==z&&(V=!0,f.value=z),V===!0&&e.onResize!==void 0&&i("resize",n)}function $({height:n}){m.value!==n&&(m.value=n,C())}function C(){if(e.container===!0){const n=r.value>m.value?W():0;c.value!==n&&(c.value=n)}}let o=null;const _={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:a,height:r,containerHeight:m,scrollbarWidth:c,totalWidth:d(()=>f.value+c.value),rows:d(()=>{const n=e.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:R({size:0,offset:0,space:!1}),right:R({size:300,offset:0,space:!1}),footer:R({size:0,offset:0,space:!1}),left:R({size:300,offset:0,space:!1}),scroll:u,animate(){o!==null?clearTimeout(o):document.body.classList.add("q-body--layout-animate"),o=setTimeout(()=>{o=null,document.body.classList.remove("q-body--layout-animate")},155)},update(n,g,z){_[n][g]=z}};if(X(O,_),W()>0){let z=function(){n=null,g.classList.remove("hide-scrollbar")},V=function(){if(n===null){if(g.scrollHeight>t.screen.height)return;g.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(z,300)},I=function(K){n!==null&&K==="remove"&&(clearTimeout(n),z()),window[`${K}EventListener`]("resize",V)},n=null;const g=document.body;S(()=>e.container!==!0?"add":"remove",I),e.container!==!0&&I("add"),re(()=>{I("remove")})}return()=>{const n=se(v.default,[h(Qe,{onScroll:q}),h(E,{onResize:H})]),g=h("div",{class:Q.value,style:b.value,ref:e.container===!0?void 0:a,tabindex:-1},n);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:a},[h(E,{onResize:$}),h("div",{class:"absolute-full",style:x.value},[h("div",{class:"scroll",style:p.value},[g])])]):g}}}),He=L({name:"QList",props:{...Y,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:v}){const i=P(),t=Z(e,i.proxy.$q),a=d(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(t.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:a.value},U(v.default))}}),Ve={__name:"MainList",setup(e){const v=ie(),i=ue(),t=ce(),a=de(),r=[{label:"New task",icon:"add_task",to:{name:"task",params:{id:"new"}}},{label:"New goal",icon:"control_point",to:{name:"goal",params:{id:"new"}}}],f=!1;function u(){navigator.clipboard.writeText(JSON.stringify({goals:t.state._rawValue.GoalStore.data._rawValue,tasks:t.state._rawValue.TaskStore.data._rawValue}))}function m(){a.logout(),v.push({name:"login",query:{next:i.fullPath}}),t._s.forEach(c=>{c.$dispose(),delete t.state.value[c.$id]}),localStorage.clear()}return(c,Q)=>(B(),N(He,null,{default:s(()=>[(B(),fe(ve,null,ge(r,(b,x)=>l(M,{key:x,class:"q-pr-lg",to:b.to},{default:s(()=>[l(k,{side:""},{default:s(()=>[l(D,{name:b.icon},null,8,["name"])]),_:2},1024),l(k,{"no-wrap":""},{default:s(()=>[T(he(b.label),1)]),_:2},1024)]),_:2},1032,["to"])),64)),me(f)?(B(),N(M,{key:0,clickable:"",class:"q-pr-lg",onClick:u},{default:s(()=>[l(k,{side:""},{default:s(()=>[l(D,{name:"copy_all"})]),_:1}),l(k,{"no-wrap":""},{default:s(()=>[l(A,null,{default:s(()=>[T("Copy data")]),_:1})]),_:1})]),_:1})):pe("",!0),l(M,{clickable:"",class:"q-pr-lg",onClick:m},{default:s(()=>[l(k,{side:""},{default:s(()=>[l(D,{name:"logout"})]),_:1}),l(k,{"no-wrap":""},{default:s(()=>[l(A,null,{default:s(()=>[T("Logout")]),_:1})]),_:1})]),_:1})]),_:1}))}};const Be={__name:"MainLayout",setup(e){return(v,i)=>{const t=_e("router-view");return B(),N(Pe,{view:"hHh LpR fFf"},{default:s(()=>[l(Ce,{reveal:"","reveal-offset":0},{default:s(()=>[l(ee,{class:"q-pl-lg"},{default:s(()=>[l(te,null,{default:s(()=>[T("LifeTrackerBuddy")]),_:1}),l(j,{flat:"",square:"",stretch:"",icon:"more_vert",padding:"xs sm"},{default:s(()=>[l(ae,{"auto-close":""},{default:s(()=>[l(Ve)]),_:1})]),_:1})]),_:1})]),_:1}),l(Le,null,{default:s(()=>[l(ke,null,{default:s(()=>[be("div",{class:we(["page q-mx-auto q-pb-lg",v.$q.platform.is.desktop?"q-mt-md":"q-pt-md"])},[(B(),N(t,{key:v.$route.path}))],2),l(ze,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:s(()=>[l(j,{"fab-mini":"",icon:"arrow_upward",color:"primary"})]),_:1})]),_:1})]),_:1})]),_:1})}}},De=ye(Be,[["__scopeId","data-v-1d0fba0f"]]);export{De as default};
