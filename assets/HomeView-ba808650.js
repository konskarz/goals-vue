import{a as Je,Q as et}from"./QToolbar-d34d3597.js";import{a as U,c as ue,Q as Ce}from"./format-5f8e7c71.js";import{c as G,D as _e,E as ye,U as tt,f as S,h as y,S as te,g as ae,aw as Be,r as Y,ax as at,w as Me,b as nt,ay as rt,az as it,ae as Z,aA as lt,C as Ae,J as ot,aB as st,aC as qe,aD as Ve,a7 as R,a1 as F,a2 as p,aE as Pe,af as ge,aF as I,a8 as k,aG as Re,d as ut,e as Ee,j as ct,aH as dt,aI as ft,I as ht,aJ as Fe,aK as gt,a9 as he,aL as mt,aa as ce,aM as me,aN as vt,ab as ze,ad as je,ac as Ue,aO as De,aP as Qe}from"./index-f001fe78.js";import{Q as Ye}from"./QList-b3fe0761.js";import{u as _t,a as yt,Q as We}from"./QMenu-03222cc1.js";import{u as bt,Q as pt}from"./GoalStore-719c961f.js";import{u as Ie}from"./TaskStore-f2765672.js";import{Q as kt}from"./QSlideTransition-44b919da.js";import{Q as St}from"./QField-1d768917.js";import{Q as xt}from"./QIntersection-9ec99b8b.js";import{d as X}from"./date-5b819875.js";import{_ as Tt,u as wt}from"./NumberInput-e1221f85.js";const Et=G({name:"QTimeline",props:{..._e,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:s}){const u=ae(),o=ye(e,u.proxy.$q);tt(Be,e);const t=S(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(o.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:t.value},te(s.default))}}),Dt=["none","strict","leaf","leaf-filtered"],Ct=G({name:"QTree",props:{..._e,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Dt.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:s,emit:u}){const{proxy:o}=ae(),{$q:t}=o,l=ye(e,t),c=Y({}),d=Y(e.ticked||[]),v=Y(e.expanded||[]);let _={};at(()=>{_={}});const b=S(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(l.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),x=S(()=>e.selected!==void 0),$=S(()=>e.icon||t.iconSet.tree.icon),q=S(()=>e.controlColor||e.color),K=S(()=>e.textColor!==void 0?` text-${e.textColor}`:""),H=S(()=>{const r=e.selectedColor||e.color;return r?` text-${r}`:""}),N=S(()=>e.filterMethod!==void 0?e.filterMethod:(r,f)=>{const n=f.toLowerCase();return r[e.labelKey]&&r[e.labelKey].toLowerCase().indexOf(n)>-1}),Q=S(()=>{const r={},f=(n,m)=>{const h=n.tickStrategy||(m?m.tickStrategy:e.tickStrategy),g=n[e.nodeKey],O=n[e.childrenKey]&&n[e.childrenKey].length>0,B=n.disabled!==!0&&x.value===!0&&n.selectable!==!1,L=n.disabled!==!0&&n.expandable!==!1,ee=h!=="none",z=h==="strict",V=h==="leaf-filtered",le=h==="leaf"||h==="leaf-filtered";let oe=n.disabled!==!0&&n.tickable!==!1;le===!0&&oe===!0&&m&&m.tickable!==!0&&(oe=!1);let j=n.lazy;j===!0&&c.value[g]!==void 0&&Array.isArray(n[e.childrenKey])===!0&&(j=c.value[g]);const w={key:g,parent:m,isParent:O,lazy:j,disabled:n.disabled,link:n.disabled!==!0&&(B===!0||L===!0&&(O===!0||j===!0)),children:[],matchesFilter:e.filter?N.value(n,e.filter):!0,selected:g===e.selected&&B===!0,selectable:B,expanded:O===!0?v.value.includes(g):!1,expandable:L,noTick:n.noTick===!0||z!==!0&&j&&j!=="loaded",tickable:oe,tickStrategy:h,hasTicking:ee,strictTicking:z,leafFilteredTicking:V,leafTicking:le,ticked:z===!0?d.value.includes(g):O===!0?!1:d.value.includes(g)};if(r[g]=w,O===!0&&(w.children=n[e.childrenKey].map(A=>f(A,w)),e.filter&&(w.matchesFilter!==!0?w.matchesFilter=w.children.some(A=>A.matchesFilter):w.noTick!==!0&&w.disabled!==!0&&w.tickable===!0&&V===!0&&w.children.every(A=>A.matchesFilter!==!0||A.noTick===!0||A.tickable!==!0)===!0&&(w.tickable=!1)),w.matchesFilter===!0&&(w.noTick!==!0&&z!==!0&&w.children.every(A=>A.noTick)===!0&&(w.noTick=!0),le))){if(w.ticked=!1,w.indeterminate=w.children.some(A=>A.indeterminate===!0),w.tickable=w.tickable===!0&&w.children.some(A=>A.tickable),w.indeterminate!==!0){const A=w.children.reduce((se,Te)=>Te.ticked===!0?se+1:se,0);A===w.children.length?w.ticked=!0:A>0&&(w.indeterminate=!0)}w.indeterminate===!0&&(w.indeterminateNextState=w.children.every(A=>A.tickable!==!0||A.ticked!==!0))}return w};return e.nodes.forEach(n=>f(n,null)),r});Me(()=>e.ticked,r=>{d.value=r}),Me(()=>e.expanded,r=>{v.value=r});function J(r){const f=[].reduce,n=(m,h)=>{if(m||!h)return m;if(Array.isArray(h)===!0)return f.call(Object(h),n,m);if(h[e.nodeKey]===r)return h;if(h[e.childrenKey])return n(null,h[e.childrenKey])};return n(null,e.nodes)}function be(){return d.value.map(r=>J(r))}function pe(){return v.value.map(r=>J(r))}function ke(r){return r&&Q.value[r]?Q.value[r].expanded:!1}function Se(){e.expanded!==void 0?u("update:expanded",[]):v.value=[]}function de(){const r=v.value,f=n=>{n[e.childrenKey]&&n[e.childrenKey].length>0&&n.expandable!==!1&&n.disabled!==!0&&(r.push(n[e.nodeKey]),n[e.childrenKey].forEach(f))};e.nodes.forEach(f),e.expanded!==void 0?u("update:expanded",r):v.value=r}function ne(r,f,n=J(r),m=Q.value[r]){if(m.lazy&&m.lazy!=="loaded"){if(m.lazy==="loading")return;c.value[r]="loading",Array.isArray(n[e.childrenKey])!==!0&&(n[e.childrenKey]=[]),u("lazyLoad",{node:n,key:r,done:h=>{c.value[r]="loaded",n[e.childrenKey]=Array.isArray(h)===!0?h:[],nt(()=>{const g=Q.value[r];g&&g.isParent===!0&&fe(r,!0)})},fail:()=>{delete c.value[r],n[e.childrenKey].length===0&&delete n[e.childrenKey]}})}else m.isParent===!0&&m.expandable===!0&&fe(r,f)}function fe(r,f){let n=v.value;const m=e.expanded!==void 0;if(m===!0&&(n=n.slice()),f){if(e.accordion&&Q.value[r]){const h=[];Q.value[r].parent?Q.value[r].parent.children.forEach(g=>{g.key!==r&&g.expandable===!0&&h.push(g.key)}):e.nodes.forEach(g=>{const O=g[e.nodeKey];O!==r&&h.push(O)}),h.length>0&&(n=n.filter(g=>h.includes(g)===!1))}n=n.concat([r]).filter((h,g,O)=>O.indexOf(h)===g)}else n=n.filter(h=>h!==r);m===!0?u("update:expanded",n):v.value=n}function xe(r){return r&&Q.value[r]?Q.value[r].ticked:!1}function W(r,f){let n=d.value;const m=e.ticked!==void 0;m===!0&&(n=n.slice()),f?n=n.concat(r).filter((h,g,O)=>O.indexOf(h)===g):n=n.filter(h=>r.includes(h)===!1),m===!0&&u("update:ticked",n)}function re(r,f,n){const m={tree:o,node:r,key:n,color:e.color,dark:l.value};return qe(m,"expanded",()=>f.expanded,h=>{h!==f.expanded&&ne(n,h)}),qe(m,"ticked",()=>f.ticked,h=>{h!==f.ticked&&W([n],h)}),m}function ie(r){return(e.filter?r.filter(f=>Q.value[f[e.nodeKey]].matchesFilter):r).map(f=>E(f))}function i(r){if(r.icon!==void 0)return y(Z,{class:"q-tree__icon q-mr-sm",name:r.icon,color:r.iconColor});const f=r.img||r.avatar;if(f)return y("img",{class:`q-tree__${r.img?"img":"avatar"} q-mr-sm`,src:f})}function a(){u("afterShow")}function C(){u("afterHide")}function E(r){const f=r[e.nodeKey],n=Q.value[f],m=r.header&&s[`header-${r.header}`]||s["default-header"],h=n.isParent===!0?ie(r[e.childrenKey]):[],g=h.length>0||n.lazy&&n.lazy!=="loaded";let O=r.body&&s[`body-${r.body}`]||s["default-body"];const B=m!==void 0||O!==void 0?re(r,n,f):null;return O!==void 0&&(O=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:K.value},[O(B)])])),y("div",{key:f,class:`q-tree__node relative-position q-tree__node--${g===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(n.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(n.selected===!0?" q-tree__node--selected":"")+(n.disabled===!0?" q-tree__node--disabled":""),tabindex:n.link===!0?0:-1,onClick:L=>{M(r,n,L)},onKeypress(L){rt(L)!==!0&&(L.keyCode===13?M(r,n,L,!0):L.keyCode===32&&T(r,n,L,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:L=>{_[n.key]=L}}),n.lazy==="loading"?y(it,{class:"q-tree__spinner",color:q.value}):g===!0?y(Z,{class:"q-tree__arrow"+(n.expanded===!0?" q-tree__arrow--rotate":""),name:$.value,onClick(L){T(r,n,L)}}):null,n.hasTicking===!0&&n.noTick!==!0?y(lt,{class:"q-tree__tickbox",modelValue:n.indeterminate===!0?null:n.ticked,color:q.value,dark:l.value,dense:!0,keepColor:!0,disable:n.tickable!==!0,onKeydown:Ae,"onUpdate:modelValue":L=>{D(n,L)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(n.selected===!0?H.value:K.value)},[m?m(B):[i(r),y("div",r[e.labelKey])]])]),g===!0?e.noTransition===!0?y("div",{class:"q-tree__node-collapsible"+K.value,key:`${f}__q`},[O,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},n.expanded?h:null)]):y(kt,{duration:e.duration,onShow:a,onHide:C},()=>ot(y("div",{class:"q-tree__node-collapsible"+K.value,key:`${f}__q`},[O,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},h)]),[[st,n.expanded]])):O])}function P(r){const f=_[r];f&&f.focus()}function M(r,f,n,m){m!==!0&&P(f.key),x.value&&f.selectable?e.noSelectionUnset===!1?u("update:selected",f.key!==e.selected?f.key:null):f.key!==e.selected&&u("update:selected",f.key===void 0?null:f.key):T(r,f,n,m),typeof r.handler=="function"&&r.handler(r)}function T(r,f,n,m){n!==void 0&&Ae(n),m!==!0&&P(f.key),ne(f.key,!f.expanded,r,f)}function D(r,f){if(r.indeterminate===!0&&(f=r.indeterminateNextState),r.strictTicking)W([r.key],f);else if(r.leafTicking){const n=[],m=h=>{h.isParent?(f!==!0&&h.noTick!==!0&&h.tickable===!0&&n.push(h.key),h.leafTicking===!0&&h.children.forEach(m)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&n.push(h.key)};m(r),W(n,f)}}return e.defaultExpandAll===!0&&de(),Object.assign(o,{getNodeByKey:J,getTickedNodes:be,getExpandedNodes:pe,isExpanded:ke,collapseAll:Se,expandAll:de,setExpanded:ne,isTicked:xe,setTicked:W}),()=>{const r=ie(e.nodes);return y("div",{class:b.value},r.length===0?e.filter?e.noResultsLabel||t.lang.tree.noResults:e.noNodesLabel||t.lang.tree.noNodes:r)}}}),Mt=G({name:"QBanner",props:{..._e,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:s}){const{proxy:{$q:u}}=ae(),o=ye(e,u),t=S(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),l=S(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const c=[y("div",{class:"q-banner__avatar col-auto row items-center self-start"},te(s.avatar)),y("div",{class:"q-banner__content col text-body2"},te(s.default))],d=te(s.action);return d!==void 0&&c.push(y("div",{class:l.value},d)),y("div",{class:t.value+(e.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},c)}}}),qt=G({name:"QPopupProxy",props:{..._t,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:s,emit:u,attrs:o}){const{proxy:t}=ae(),{$q:l}=t,c=Y(!1),d=Y(null),v=S(()=>parseInt(e.breakpoint,10)),{canShow:_}=yt({showing:c});function b(){return l.screen.width<v.value||l.screen.height<v.value?"dialog":"menu"}const x=Y(b()),$=S(()=>x.value==="menu"?{maxHeight:"99vh"}:{});Me(()=>b(),H=>{c.value!==!0&&(x.value=H)});function q(H){c.value=!0,u("show",H)}function K(H){c.value=!1,x.value=b(),u("hide",H)}return Object.assign(t,{show(H){_(H)===!0&&d.value.show(H)},hide(H){d.value.hide(H)},toggle(H){d.value.toggle(H)}}),qe(t,"currentComponent",()=>({type:x.value,ref:d.value})),()=>{const H={ref:d,...$.value,...o,onShow:q,onHide:K};let N;return x.value==="dialog"?N=Ve:(N=We,Object.assign(H,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(N,H,s.default)}}}),Pt={class:"self-center full-width no-outline ellipsis",tabindex:"0"},It={__name:"GoalTreeSelect",props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],setup(e,{emit:s}){const u=e,o=S({get(){return u.modelValue},set(c){s("update:modelValue",c)}}),t=bt(),l=S(()=>u.modelValue?t.getItem(u.modelValue).name:null);return(c,d)=>(R(),F(St,{modelValue:I(o),"onUpdate:modelValue":d[1]||(d[1]=v=>Re(o)?o.value=v:null),clearable:"","clear-icon":"close"},{control:p(()=>[Pe("div",Pt,ge(I(l)),1)]),append:p(()=>[k(Z,{name:"keyboard_arrow_down"})]),default:p(()=>[k(qt,{fit:"","auto-close":""},{default:p(()=>[k(Mt,null,{default:p(()=>[k(Ct,{selected:I(o),"onUpdate:selected":d[0]||(d[0]=v=>Re(o)?o.value=v:null),nodes:I(t).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Ot=G({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:s}){const u=ut(Be,Ee);if(u===Ee)return console.error("QTimelineEntry needs to be child of QTimeline"),Ee;const o=S(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),t=S(()=>`q-timeline__dot text-${e.color||u.color}`),l=S(()=>u.layout==="comfortable"&&u.side==="left");return()=>{const c=ct(s.default,[]);if(e.body!==void 0&&c.unshift(e.body),e.heading===!0){const _=[y("div"),y("div"),y(e.tag,{class:"q-timeline__heading-title"},c)];return y("div",{class:"q-timeline__heading"},l.value===!0?_.reverse():_)}let d;e.icon!==void 0?d=[y(Z,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(d=[y("img",{class:"q-timeline__dot-img",src:e.avatar})]);const v=[y("div",{class:"q-timeline__subtitle"},[y("span",{},te(s.subtitle,[e.subtitle]))]),y("div",{class:t.value},d),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},te(s.title,[e.title]))].concat(c))];return y("li",{class:o.value},l.value===!0?v.reverse():v)}}}),Lt={xs:2,sm:4,md:6,lg:10,xl:14};function $e(e,s,u){return{transform:s===!0?`translateX(${u.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Ht=G({name:"QLinearProgress",props:{..._e,...dt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:s}){const{proxy:u}=ae(),o=ye(e,u.$q),t=ft(e,Lt),l=S(()=>e.indeterminate===!0||e.query===!0),c=S(()=>e.reverse!==e.query),d=S(()=>({...t.value!==null?t.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),v=S(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),_=S(()=>$e(e.buffer!==void 0?e.buffer:1,c.value,u.$q)),b=S(()=>`with${e.instantFeedback===!0?"out":""}-transition`),x=S(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${b.value} q-linear-progress__track--${o.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),$=S(()=>$e(l.value===!0?1:e.value,c.value,u.$q)),q=S(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${b.value} q-linear-progress__model--${l.value===!0?"in":""}determinate`),K=S(()=>({width:`${e.value*100}%`})),H=S(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${b.value}`);return()=>{const N=[y("div",{class:x.value,style:_.value}),y("div",{class:q.value,style:$.value})];return e.stripe===!0&&l.value===!1&&N.push(y("div",{class:H.value,style:K.value})),y("div",{class:v.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ht(s.default,N))}}});var Oe={};(function e(s,u,o,t){var l=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function c(){}function d(i){var a=u.exports.Promise,C=a!==void 0?a:s.Promise;return typeof C=="function"?new C(i):(i(c,c),null)}var v=function(){var i=Math.floor(16.666666666666668),a,C,E={},P=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(M){var T=Math.random();return E[T]=requestAnimationFrame(function D(r){P===r||P+i-1<r?(P=r,delete E[T],M()):E[T]=requestAnimationFrame(D)}),T},C=function(M){E[M]&&cancelAnimationFrame(E[M])}):(a=function(M){return setTimeout(M,i)},C=function(M){return clearTimeout(M)}),{frame:a,cancel:C}}(),_=function(){var i,a,C={};function E(P){function M(T,D){P.postMessage({options:T||{},callback:D})}P.init=function(D){var r=D.transferControlToOffscreen();P.postMessage({canvas:r},[r])},P.fire=function(D,r,f){if(a)return M(D,null),a;var n=Math.random().toString(36).slice(2);return a=d(function(m){function h(g){g.data.callback===n&&(delete C[n],P.removeEventListener("message",h),a=null,f(),m())}P.addEventListener("message",h),M(D,n),C[n]=h.bind(null,{data:{callback:n}})}),a},P.reset=function(){P.postMessage({reset:!0});for(var D in C)C[D](),delete C[D]}}return function(){if(i)return i;if(!o&&l){var P=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([P])))}catch(M){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",M),null}E(i)}return i}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(i,a){return a?a(i):i}function $(i){return i!=null}function q(i,a,C){return x(i&&$(i[a])?i[a]:b[a],C)}function K(i){return i<0?0:Math.floor(i)}function H(i,a){return Math.floor(Math.random()*(a-i))+i}function N(i){return parseInt(i,16)}function Q(i){return i.map(J)}function J(i){var a=String(i).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:N(a.substring(0,2)),g:N(a.substring(2,4)),b:N(a.substring(4,6))}}function be(i){var a=q(i,"origin",Object);return a.x=q(a,"x",Number),a.y=q(a,"y",Number),a}function pe(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function ke(i){var a=i.getBoundingClientRect();i.width=a.width,i.height=a.height}function Se(i){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=i,a}function de(i,a,C,E,P,M,T,D,r){i.save(),i.translate(a,C),i.rotate(M),i.scale(E,P),i.arc(0,0,1,T,D,r),i.restore()}function ne(i){var a=i.angle*(Math.PI/180),C=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-a+(.5*C-Math.random()*C),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar}}function fe(i,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.wobble+=a.wobbleSpeed,a.velocity*=a.decay,a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble);var C=a.tick++/a.totalTicks,E=a.x+a.random*a.tiltCos,P=a.y+a.random*a.tiltSin,M=a.wobbleX+a.random*a.tiltCos,T=a.wobbleY+a.random*a.tiltSin;if(i.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-C)+")",i.beginPath(),a.shape==="circle")i.ellipse?i.ellipse(a.x,a.y,Math.abs(M-E)*a.ovalScalar,Math.abs(T-P)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):de(i,a.x,a.y,Math.abs(M-E)*a.ovalScalar,Math.abs(T-P)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var D=Math.PI/2*3,r=4*a.scalar,f=8*a.scalar,n=a.x,m=a.y,h=5,g=Math.PI/h;h--;)n=a.x+Math.cos(D)*f,m=a.y+Math.sin(D)*f,i.lineTo(n,m),D+=g,n=a.x+Math.cos(D)*r,m=a.y+Math.sin(D)*r,i.lineTo(n,m),D+=g;else i.moveTo(Math.floor(a.x),Math.floor(a.y)),i.lineTo(Math.floor(a.wobbleX),Math.floor(P)),i.lineTo(Math.floor(M),Math.floor(T)),i.lineTo(Math.floor(E),Math.floor(a.wobbleY));return i.closePath(),i.fill(),a.tick<a.totalTicks}function xe(i,a,C,E,P){var M=a.slice(),T=i.getContext("2d"),D,r,f=d(function(n){function m(){D=r=null,T.clearRect(0,0,E.width,E.height),P(),n()}function h(){o&&!(E.width===t.width&&E.height===t.height)&&(E.width=i.width=t.width,E.height=i.height=t.height),!E.width&&!E.height&&(C(i),E.width=i.width,E.height=i.height),T.clearRect(0,0,E.width,E.height),M=M.filter(function(g){return fe(T,g)}),M.length?D=v.frame(h):m()}D=v.frame(h),r=m});return{addFettis:function(n){return M=M.concat(n),f},canvas:i,promise:f,reset:function(){D&&v.cancel(D),r&&r()}}}function W(i,a){var C=!i,E=!!q(a||{},"resize"),P=q(a,"disableForReducedMotion",Boolean),M=l&&!!q(a||{},"useWorker"),T=M?_():null,D=C?pe:ke,r=i&&T?!!i.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,n;function m(g,O,B){for(var L=q(g,"particleCount",K),ee=q(g,"angle",Number),z=q(g,"spread",Number),V=q(g,"startVelocity",Number),le=q(g,"decay",Number),oe=q(g,"gravity",Number),j=q(g,"drift",Number),w=q(g,"colors",Q),A=q(g,"ticks",Number),se=q(g,"shapes"),Te=q(g,"scalar"),Le=be(g),He=L,we=[],Ze=i.width*Le.x,Ge=i.height*Le.y;He--;)we.push(ne({x:Ze,y:Ge,angle:ee,spread:z,startVelocity:V,color:w[He%w.length],shape:se[H(0,se.length)],ticks:A,decay:le,gravity:oe,drift:j,scalar:Te}));return n?n.addFettis(we):(n=xe(i,we,D,O,B),n.promise)}function h(g){var O=P||q(g,"disableForReducedMotion",Boolean),B=q(g,"zIndex",Number);if(O&&f)return d(function(V){V()});C&&n?i=n.canvas:C&&!i&&(i=Se(B),document.body.appendChild(i)),E&&!r&&D(i);var L={width:i.width,height:i.height};T&&!r&&T.init(i),r=!0,T&&(i.__confetti_initialized=!0);function ee(){if(T){var V={getBoundingClientRect:function(){if(!C)return i.getBoundingClientRect()}};D(V),T.postMessage({resize:{width:V.width,height:V.height}});return}L.width=L.height=null}function z(){n=null,E&&s.removeEventListener("resize",ee),C&&i&&(document.body.removeChild(i),i=null,r=!1)}return E&&s.addEventListener("resize",ee,!1),T?T.fire(g,L,z):m(g,L,z)}return h.reset=function(){T&&T.reset(),n&&n.reset()},h}var re;function ie(){return re||(re=W(null,{useWorker:!0,resize:!0})),re}u.exports=function(){return ie().apply(this,arguments)},u.exports.reset=function(){ie().reset()},u.exports.create=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Oe,!1);const Ne=Oe.exports;Oe.exports.create;function At(){var e=3e3,s=Date.now()+e,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function o(l,c){return Math.random()*(c-l)+l}var t=setInterval(function(){var l=s-Date.now();if(l<=0)return clearInterval(t);var c=100*(l/e);Ne(Object.assign({},u,{particleCount:c,origin:{x:o(.1,.3),y:Math.random()-.2}})),Ne(Object.assign({},u,{particleCount:c,origin:{x:o(.7,.9),y:Math.random()-.2}}))},250)}const Rt=y("div",{class:"q-space"}),Ft=G({name:"QSpace",setup(){return()=>Rt}}),Qt=()=>!0;function $t(e){const s={};return e.forEach(u=>{s[u]=Qt}),s}function ve(){const{emit:e,proxy:s}=ae(),u=Y(null);function o(){u.value.show()}function t(){u.value.hide()}function l(d){e("ok",d),t()}function c(){e("hide")}return Object.assign(s,{show:o,hide:t}),{dialogRef:u,onDialogHide:c,onDialogOK:l,onDialogCancel:t}}const Xe=["ok","hide"];ve.emits=Xe;ve.emitsObject=$t(Xe);const Nt=Pe("div",{class:"text-h6"},"Progress",-1),Kt={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...ve.emits],setup(e){const s=e,u=Y(s.task.performance),o=S(()=>{let b="of "+s.task.target;const x=s.task.performance_history;return x&&x.length&&(b+=" · changed "+X.formatDate(x[0].updated,"DD.MM.YYYY HH:mm")),b}),{dialogRef:t,onDialogHide:l,onDialogOK:c,onDialogCancel:d}=ve(),v=S(()=>u.value===s.task.performance);function _(){c({performance:u.value})}return(b,x)=>(R(),F(Ve,{ref_key:"dialogRef",ref:t,onHide:I(l)},{default:p(()=>[k(mt,{class:"q-dialog-plugin"},{default:p(()=>[k(Fe,null,{default:p(()=>[Nt]),_:1}),k(Fe,null,{default:p(()=>[k(Tt,{modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=$=>u.value=$),label:"Performance",hint:I(o)},null,8,["modelValue","hint"])]),_:1}),k(gt,{align:"right"},{default:p(()=>[k(he,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:e.task.id}}},null,8,["to"]),k(Ft),k(he,{flat:"",label:"Cancel",class:"text-primary",onClick:I(d)},null,8,["onClick"]),k(he,{disable:I(v),flat:"",label:"Submit",class:"text-primary",onClick:_},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Bt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(e){const s=e,u=wt(),o=Ie(),t=S(()=>s.task.target>1&&!s.task.done),l=S(()=>t.value?s.task.performance/s.task.target:0),c=S(()=>[s.task.performance,"of",s.task.target].join(" "));function d(){u.dialog({component:Kt,componentProps:{task:s.task}}).onOk(v=>{v.performance>=s.task.target&&At();const _={performance:v.performance};o.updateItem(s.task.id+"/",_).then(()=>o.refetch())})}return(v,_)=>(R(),F(Ce,{clickable:"",active:Boolean(e.task.done),"active-class":"text-positive"},{default:p(()=>[e.task.done?(R(),F(U,{key:0,thumbnail:""},{default:p(()=>[k(Z,{name:"done",color:"positive"})]),_:1})):e.task.group_id?(R(),F(U,{key:1,thumbnail:""},{default:p(()=>[k(Z,{name:"event_repeat"})]),_:1})):(R(),F(U,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:_[0]||(_[0]=b=>v.$emit("ondragstart",b,e.task)),"onTouchmove:native":_[1]||(_[1]=b=>{})},{default:p(()=>[k(Z,{name:"drag_indicator"})]),_:1})),k(U,{onClick:d},{default:p(()=>[k(ue,null,{default:p(()=>[ce(ge(e.task.name),1)]),_:1}),I(t)?(R(),F(ue,{key:0,caption:""},{default:p(()=>[ce(ge(I(c)),1)]),_:1})):me("",!0),I(t)?(R(),F(ue,{key:1},{default:p(()=>[k(Ht,{value:I(l),color:"positive"},null,8,["value"])]),_:1})):me("",!0)]),_:1})]),_:1},8,["active"]))}};var Ke;(function(e){var s=function(){function o(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(o.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),o.prototype.clearData=function(t){t!=null?delete this._data[t]:this._data=null},o.prototype.getData=function(t){return this._data[t]||""},o.prototype.setData=function(t,l){this._data[t]=l},o.prototype.setDragImage=function(t,l,c){var d=u._instance;d._imgCustom=t,d._imgOffset={x:l,y:c}},o}();e.DataTransfer=s;var u=function(){function o(){if(this._lastClick=0,o._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",function(){},{get passive(){return t=!0,!0}}),"ontouchstart"in document){var l=document,c=this._touchstart.bind(this),d=this._touchmove.bind(this),v=this._touchend.bind(this),_=t?{passive:!1,capture:!1}:!1;l.addEventListener("touchstart",c,_),l.addEventListener("touchmove",d,_),l.addEventListener("touchend",v),l.addEventListener("touchcancel",v)}}return o.getInstance=function(){return o._instance},o.prototype._touchstart=function(t){var l=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<o._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(t.target);c&&!this._dispatchEvent(t,"mousemove",t.target)&&!this._dispatchEvent(t,"mousedown",t.target)&&(this._dragSource=c,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){l._dragSource==c&&l._img==null&&l._dispatchEvent(t,"contextmenu",c)&&l._reset()},o._CTXMENU),o._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){l._isDragEnabled=!0,l._touchmove(t)},o._PRESSHOLDAWAIT)))}},o.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t)){this._reset();return}if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var l=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",l)){this._lastTouch=t,t.cancelable&&t.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",l)),this._img&&(this._lastTouch=t,t.cancelable&&t.preventDefault(),l!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",l),this._lastTarget=l),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",l))}},o.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target)){t.cancelable&&t.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},o.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},o.prototype._shouldHandleMove=function(t){return!o._ISPRESSHOLDMODE&&this._shouldHandle(t)},o.prototype._shouldHandlePressHoldMove=function(t){return o._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},o.prototype._shouldCancelPressHoldMove=function(t){return o._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>o._PRESSHOLDMARGIN},o.prototype._shouldStartDragging=function(t){var l=this._getDelta(t);return l>o._THRESHOLD||o._ISPRESSHOLDMODE&&l>=o._PRESSHOLDTHRESHOLD},o.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},o.prototype._getPoint=function(t,l){return t&&t.touches&&(t=t.touches[0]),{x:l?t.pageX:t.clientX,y:l?t.pageY:t.clientY}},o.prototype._getDelta=function(t){if(o._ISPRESSHOLDMODE&&!this._ptDown)return 0;var l=this._getPoint(t);return Math.abs(l.x-this._ptDown.x)+Math.abs(l.y-this._ptDown.y)},o.prototype._getTarget=function(t){for(var l=this._getPoint(t),c=document.elementFromPoint(l.x,l.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},o.prototype._createImage=function(t){this._img&&this._destroyImage();var l=this._imgCustom||this._dragSource;if(this._img=l.cloneNode(!0),this._copyStyle(l,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=l.getBoundingClientRect(),d=this._getPoint(t);this._imgOffset={x:d.x-c.left,y:d.y-c.top},this._img.style.opacity=o._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},o.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},o.prototype._moveImage=function(t){var l=this;requestAnimationFrame(function(){if(l._img){var c=l._getPoint(t,!0),d=l._img.style;d.position="absolute",d.pointerEvents="none",d.zIndex="999999",d.left=Math.round(c.x-l._imgOffset.x)+"px",d.top=Math.round(c.y-l._imgOffset.y)+"px"}})},o.prototype._copyProps=function(t,l,c){for(var d=0;d<c.length;d++){var v=c[d];t[v]=l[v]}},o.prototype._copyStyle=function(t,l){if(o._rmvAtts.forEach(function(x){l.removeAttribute(x)}),t instanceof HTMLCanvasElement){var c=t,d=l;d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)}for(var v=getComputedStyle(t),_=0;_<v.length;_++){var b=v[_];b.indexOf("transition")<0&&(l.style[b]=v[b])}l.style.pointerEvents="none";for(var _=0;_<t.children.length;_++)this._copyStyle(t.children[_],l.children[_])},o.prototype._dispatchEvent=function(t,l,c){if(t&&c){var d=document.createEvent("Event"),v=t.touches?t.touches[0]:t;return d.initEvent(l,!0,!0),d.button=0,d.which=d.buttons=1,this._copyProps(d,t,o._kbdProps),this._copyProps(d,v,o._ptProps),d.dataTransfer=this._dataTransfer,c.dispatchEvent(d),d.defaultPrevented}return!1},o.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},o}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=u})(Ke||(Ke={}));const Vt={class:"text-orange-14"},zt={__name:"WeekTimelineEntry",props:{tasks:{type:Array,required:!0},monday:{type:String,required:!0}},setup(e){const s=e,u=Ie(),o=S(()=>s.tasks.length?[...s.tasks].sort((_,b)=>b.target-_.target):null),t=S(()=>{const _=X.subtractFromDate(s.monday,{days:1}),b=X.addToDate(s.monday,{days:6}),x=q=>X.formatDate(q,"MMMM"),$=x(s.monday);return $!==x(_)||$!==x(b)}),l=X.formatDate(s.monday,"w-Q-YYYY-MMM D").split("-"),c=["Week "+l[0],"Q"+l[1],l[2],l[3]].join(" · ");function d(_,b){const x={id:b.id,day:X.getDayOfWeek(b.planned),week:l[0]};_.dataTransfer.setData("text",JSON.stringify(x)),_.dataTransfer.dropEffect="move"}function v(_){const b=JSON.parse(_.dataTransfer.getData("text"));if(b.week===l[0])return;const x={planned:X.addToDate(s.monday,{days:b.day-1}).toISOString()};u.updateItem(b.id+"/",x).then(()=>u.refetch())}return(_,b)=>(R(),F(Ot,{color:e.monday===I(u).currentWeek?"orange":"primary",subtitle:I(c),onDragover:b[0]||(b[0]=De(()=>{},["prevent"])),onDragenter:b[1]||(b[1]=De(()=>{},["prevent"])),onDrop:b[2]||(b[2]=De(x=>v(x),["prevent"]))},vt({default:p(()=>[I(o)?(R(),F(Ye,{key:0},{default:p(()=>[(R(!0),ze(je,null,Ue(I(o),x=>(R(),F(xt,{key:x.id,style:{"min-height":"51.19px"}},{default:p(()=>[k(Bt,{task:x,onOndragstart:d},null,8,["task"])]),_:2},1024))),128))]),_:1})):me("",!0)]),_:2},[I(t)?{name:"subtitle",fn:p(()=>[Pe("span",Vt,ge(I(c)),1)]),key:"0"}:void 0]),1032,["color","subtitle"]))}},ra={__name:"HomeView",setup(e){const s=Ie();return(u,o)=>(R(),F(pt,{padding:""},{default:p(()=>[k(et,null,{default:p(()=>[k(Je,null,{default:p(()=>[ce("Plan")]),_:1}),k(It,{modelValue:I(s).filter.goal,"onUpdate:modelValue":o[0]||(o[0]=t=>I(s).filter.goal=t),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),k(he,{flat:"",round:"",icon:"filter_list"},{default:p(()=>[k(We,null,{default:p(()=>[k(Ye,null,{default:p(()=>[k(Ce,null,{default:p(()=>[k(U,null,{default:p(()=>[k(ue,null,{default:p(()=>[ce("Hide passed done")]),_:1})]),_:1}),k(U,{side:""},{default:p(()=>[k(Qe,{modelValue:I(s).filter.done,"onUpdate:modelValue":o[1]||(o[1]=t=>I(s).filter.done=t)},null,8,["modelValue"])]),_:1})]),_:1}),k(Ce,null,{default:p(()=>[k(U,null,{default:p(()=>[k(ue,null,{default:p(()=>[ce("Hide passed recurring")]),_:1})]),_:1}),k(U,{side:""},{default:p(()=>[k(Qe,{modelValue:I(s).filter.recurring,"onUpdate:modelValue":o[2]||(o[2]=t=>I(s).filter.recurring=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I(s).calendar?(R(),F(Et,{key:0,layout:"dense",class:"q-px-md"},{default:p(()=>[(R(!0),ze(je,null,Ue(I(s).calendar,(t,l)=>(R(),F(zt,{key:l,tasks:t,monday:l},null,8,["tasks","monday"]))),128))]),_:1})):me("",!0)]),_:1}))}};export{ra as default};
