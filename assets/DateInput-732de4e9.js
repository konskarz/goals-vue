import{r as m,$ as g,w as h,f as k,a2 as I,Z as S,al as O,aZ as _,a$ as j}from"./index-ea912359.js";import{b as p}from"./api.client-1bb7f084.js";function y(c,u,e){const t=m(c),a=m(e+"/"),n=m(!1),f=g();let d=null;if(e){const{data:l}=p.read(u+e+"/"),o=r=>{t.value=r,d={...r}};l.value&&o(l.value),h(l,o)}function v(){e&&(n.value=!0,p.delete(u+a.value).then(()=>s()))}function b(){const l={...t.value},o=Object.keys(l).reduce((r,i)=>(l[i]!==d[i]&&(r[i]=l[i]),r),{});Object.keys(o).length?p.update(u+a.value,o).then(()=>s()):s()}function V(){n.value=!0,e?b():p.create(u,t.value).then(()=>s())}function s(){f.back()}return{item:t,path:a,persist:n,remove:v,save:V,back:s}}const B={__name:"DateInput",props:{label:{type:String,required:!0},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(c,{emit:u}){const e=c,t=k({get(){return e.modelValue?e.modelValue.slice(0,10):null},set(a){u("update:modelValue",a?new Date(a).toISOString():null)}});return(a,n)=>(I(),S(j,{modelValue:O(t),"onUpdate:modelValue":n[0]||(n[0]=f=>_(t)?t.value=f:null),type:"date",label:c.label,"stack-label":""},null,8,["modelValue","label"]))}};export{B as _,y as u};
