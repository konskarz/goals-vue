import{a as We,Q as Ue}from"./QToolbar-896af552.js";import{b as L,c as $,a as re,Q as be}from"./QList-653b4b37.js";import{c as z,D as Se,g as ie,E as De,d as T,h as C,S as ne,U as ze,ag as ke,e as te,f as Xe,ae as j,j as Ke,ah as Ze,ai as Ge,I as Je,r as Me,a2 as P,a3 as h,aj as w,ak as et,a4 as I,a5 as f,al as me,am as tt,a6 as Y,an as at,ao as rt,a7 as A,af as ge,ap as W,a8 as Ee,aa as Te,a9 as we,aq as ae,ar as ve}from"./index-ce6383c7.js";import{Q as nt}from"./QMenu-3d3960b2.js";import{Q as it}from"./GoalStore-e88f658c.js";import{u as oe}from"./TaskStore-69ac1c43.js";import{_ as ot}from"./GoalSelect-f1211f85.js";import{Q as st}from"./QIntersection-0746db8c.js";import{d as F}from"./date-ab8c3bb6.js";import{_ as lt,u as ut}from"./NumberInput-c8056529.js";import"./QSlideTransition-74a136f3.js";import"./format-8c778330.js";const ct=z({name:"QTimeline",props:{...Se,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:n=>["left","right"].includes(n)},layout:{type:String,default:"dense",validator:n=>["dense","comfortable","loose"].includes(n)}},setup(n,{slots:s}){const o=ie(),i=De(n,o.proxy.$q);ze(ke,n);const e=T(()=>`q-timeline q-timeline--${n.layout} q-timeline--${n.layout}--${n.side}`+(i.value===!0?" q-timeline--dark":""));return()=>C("ul",{class:e.value},ne(s.default))}}),dt=z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:n=>["left","right"].includes(n)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(n,{slots:s}){const o=Ke(ke,te);if(o===te)return console.error("QTimelineEntry needs to be child of QTimeline"),te;const i=T(()=>`q-timeline__entry q-timeline__entry--${n.side}`+(n.icon!==void 0||n.avatar!==void 0?" q-timeline__entry--icon":"")),e=T(()=>`q-timeline__dot text-${n.color||o.color}`),r=T(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const l=Xe(s.default,[]);if(n.body!==void 0&&l.unshift(n.body),n.heading===!0){const d=[C("div"),C("div"),C(n.tag,{class:"q-timeline__heading-title"},l)];return C("div",{class:"q-timeline__heading"},r.value===!0?d.reverse():d)}let u;n.icon!==void 0?u=[C(j,{class:"row items-center justify-center",name:n.icon})]:n.avatar!==void 0&&(u=[C("img",{class:"q-timeline__dot-img",src:n.avatar})]);const b=[C("div",{class:"q-timeline__subtitle"},[C("span",{},ne(s.subtitle,[n.subtitle]))]),C("div",{class:e.value},u),C("div",{class:"q-timeline__content"},[C("h6",{class:"q-timeline__title"},ne(s.title,[n.title]))].concat(l))];return C("li",{class:i.value},r.value===!0?b.reverse():b)}}}),ft={xs:2,sm:4,md:6,lg:10,xl:14};function _e(n,s,o){return{transform:s===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-n},1,1)`:`scale3d(${n},1,1)`}}const ht=z({name:"QLinearProgress",props:{...Se,...Ze,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(n,{slots:s}){const{proxy:o}=ie(),i=De(n,o.$q),e=Ge(n,ft),r=T(()=>n.indeterminate===!0||n.query===!0),l=T(()=>n.reverse!==n.query),u=T(()=>({...e.value!==null?e.value:{},"--q-linear-progress-speed":`${n.animationSpeed}ms`})),b=T(()=>"q-linear-progress"+(n.color!==void 0?` text-${n.color}`:"")+(n.reverse===!0||n.query===!0?" q-linear-progress--reverse":"")+(n.rounded===!0?" rounded-borders":"")),d=T(()=>_e(n.buffer!==void 0?n.buffer:1,l.value,o.$q)),c=T(()=>`with${n.instantFeedback===!0?"out":""}-transition`),m=T(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),q=T(()=>_e(r.value===!0?1:n.value,l.value,o.$q)),M=T(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${r.value===!0?"in":""}determinate`),X=T(()=>({width:`${n.value*100}%`})),K=T(()=>`q-linear-progress__stripe absolute-${n.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const Q=[C("div",{class:m.value,style:d.value}),C("div",{class:M.value,style:q.value})];return n.stripe===!0&&r.value===!1&&Q.push(C("div",{class:K.value,style:X.value})),C("div",{class:b.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":n.indeterminate===!0?void 0:n.value},Je(s.default,Q))}}});var se={};(function n(s,o,i,e){var r=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function l(){}function u(a){var t=o.exports.Promise,p=t!==void 0?t:s.Promise;return typeof p=="function"?new p(a):(a(l,l),null)}var b=function(){var a=Math.floor(16.666666666666668),t,p,g={},S=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(y){var v=Math.random();return g[v]=requestAnimationFrame(function _(E){S===E||S+a-1<E?(S=E,delete g[v],y()):g[v]=requestAnimationFrame(_)}),v},p=function(y){g[y]&&cancelAnimationFrame(g[y])}):(t=function(y){return setTimeout(y,a)},p=function(y){return clearTimeout(y)}),{frame:t,cancel:p}}(),d=function(){var a,t,p={};function g(S){function y(v,_){S.postMessage({options:v||{},callback:_})}S.init=function(_){var E=_.transferControlToOffscreen();S.postMessage({canvas:E},[E])},S.fire=function(_,E,H){if(t)return y(_,null),t;var D=Math.random().toString(36).slice(2);return t=u(function(x){function O(k){k.data.callback===D&&(delete p[D],S.removeEventListener("message",O),t=null,H(),x())}S.addEventListener("message",O),y(_,D),p[D]=O.bind(null,{data:{callback:D}})}),t},S.reset=function(){S.postMessage({reset:!0});for(var _ in p)p[_](),delete p[_]}}return function(){if(a)return a;if(!i&&r){var S=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([S])))}catch(y){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",y),null}g(a)}return a}}(),c={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function m(a,t){return t?t(a):a}function q(a){return a!=null}function M(a,t,p){return m(a&&q(a[t])?a[t]:c[t],p)}function X(a){return a<0?0:Math.floor(a)}function K(a,t){return Math.floor(Math.random()*(t-a))+a}function Q(a){return parseInt(a,16)}function Ie(a){return a.map(Pe)}function Pe(a){var t=String(a).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:Q(t.substring(0,2)),g:Q(t.substring(2,4)),b:Q(t.substring(4,6))}}function Oe(a){var t=M(a,"origin",Object);return t.x=M(t,"x",Number),t.y=M(t,"y",Number),t}function xe(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function qe(a){var t=a.getBoundingClientRect();a.width=t.width,a.height=t.height}function He(a){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=a,t}function Le(a,t,p,g,S,y,v,_,E){a.save(),a.translate(t,p),a.rotate(y),a.scale(g,S),a.arc(0,0,1,v,_,E),a.restore()}function Re(a){var t=a.angle*(Math.PI/180),p=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-t+(.5*p-Math.random()*p),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar}}function Fe(a,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var p=t.tick++/t.totalTicks,g=t.x+t.random*t.tiltCos,S=t.y+t.random*t.tiltSin,y=t.wobbleX+t.random*t.tiltCos,v=t.wobbleY+t.random*t.tiltSin;if(a.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-p)+")",a.beginPath(),t.shape==="circle")a.ellipse?a.ellipse(t.x,t.y,Math.abs(y-g)*t.ovalScalar,Math.abs(v-S)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Le(a,t.x,t.y,Math.abs(y-g)*t.ovalScalar,Math.abs(v-S)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var _=Math.PI/2*3,E=4*t.scalar,H=8*t.scalar,D=t.x,x=t.y,O=5,k=Math.PI/O;O--;)D=t.x+Math.cos(_)*H,x=t.y+Math.sin(_)*H,a.lineTo(D,x),_+=k,D=t.x+Math.cos(_)*E,x=t.y+Math.sin(_)*E,a.lineTo(D,x),_+=k;else a.moveTo(Math.floor(t.x),Math.floor(t.y)),a.lineTo(Math.floor(t.wobbleX),Math.floor(S)),a.lineTo(Math.floor(y),Math.floor(v)),a.lineTo(Math.floor(g),Math.floor(t.wobbleY));return a.closePath(),a.fill(),t.tick<t.totalTicks}function Qe(a,t,p,g,S){var y=t.slice(),v=a.getContext("2d"),_,E,H=u(function(D){function x(){_=E=null,v.clearRect(0,0,g.width,g.height),S(),D()}function O(){i&&!(g.width===e.width&&g.height===e.height)&&(g.width=a.width=e.width,g.height=a.height=e.height),!g.width&&!g.height&&(p(a),g.width=a.width,g.height=a.height),v.clearRect(0,0,g.width,g.height),y=y.filter(function(k){return Fe(v,k)}),y.length?_=b.frame(O):x()}_=b.frame(O),E=x});return{addFettis:function(D){return y=y.concat(D),H},canvas:a,promise:H,reset:function(){_&&b.cancel(_),E&&E()}}}function le(a,t){var p=!a,g=!!M(t||{},"resize"),S=M(t,"disableForReducedMotion",Boolean),y=r&&!!M(t||{},"useWorker"),v=y?d():null,_=p?xe:qe,E=a&&v?!!a.__confetti_initialized:!1,H=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,D;function x(k,G,J){for(var N=M(k,"particleCount",X),V=M(k,"angle",Number),B=M(k,"spread",Number),R=M(k,"startVelocity",Number),Ne=M(k,"decay",Number),$e=M(k,"gravity",Number),Ae=M(k,"drift",Number),ce=M(k,"colors",Ie),Ve=M(k,"ticks",Number),de=M(k,"shapes"),Be=M(k,"scalar"),fe=Oe(k),he=N,ee=[],je=a.width*fe.x,Ye=a.height*fe.y;he--;)ee.push(Re({x:je,y:Ye,angle:V,spread:B,startVelocity:R,color:ce[he%ce.length],shape:de[K(0,de.length)],ticks:Ve,decay:Ne,gravity:$e,drift:Ae,scalar:Be}));return D?D.addFettis(ee):(D=Qe(a,ee,_,G,J),D.promise)}function O(k){var G=S||M(k,"disableForReducedMotion",Boolean),J=M(k,"zIndex",Number);if(G&&H)return u(function(R){R()});p&&D?a=D.canvas:p&&!a&&(a=He(J),document.body.appendChild(a)),g&&!E&&_(a);var N={width:a.width,height:a.height};v&&!E&&v.init(a),E=!0,v&&(a.__confetti_initialized=!0);function V(){if(v){var R={getBoundingClientRect:function(){if(!p)return a.getBoundingClientRect()}};_(R),v.postMessage({resize:{width:R.width,height:R.height}});return}N.width=N.height=null}function B(){D=null,g&&s.removeEventListener("resize",V),p&&a&&(document.body.removeChild(a),a=null,E=!1)}return g&&s.addEventListener("resize",V,!1),v?v.fire(k,N,B):x(k,N,B)}return O.reset=function(){v&&v.reset(),D&&D.reset()},O}var Z;function ue(){return Z||(Z=le(null,{useWorker:!0,resize:!0})),Z}o.exports=function(){return ue().apply(this,arguments)},o.exports.reset=function(){ue().reset()},o.exports.create=le})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),se,!1);const pe=se.exports;se.exports.create;function mt(){var n=3e3,s=Date.now()+n,o={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function i(r,l){return Math.random()*(l-r)+r}var e=setInterval(function(){var r=s-Date.now();if(r<=0)return clearInterval(e);var l=100*(r/n);pe(Object.assign({},o,{particleCount:l,origin:{x:i(.1,.3),y:Math.random()-.2}})),pe(Object.assign({},o,{particleCount:l,origin:{x:i(.7,.9),y:Math.random()-.2}}))},250)}const gt=C("div",{class:"q-space"}),vt=z({name:"QSpace",setup(){return()=>gt}}),_t=()=>!0;function pt(n){const s={};return n.forEach(o=>{s[o]=_t}),s}function U(){const{emit:n,proxy:s}=ie(),o=Me(null);function i(){o.value.show()}function e(){o.value.hide()}function r(u){n("ok",u),e()}function l(){n("hide")}return Object.assign(s,{show:i,hide:e}),{dialogRef:o,onDialogHide:l,onDialogOK:r,onDialogCancel:e}}const Ce=["ok","hide"];U.emits=Ce;U.emitsObject=pt(Ce);const yt=rt("div",{class:"text-h6"},"Progress",-1),bt={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...U.emits],setup(n){const s=n,o=Me(s.task.performance),i=T(()=>{let c="of "+s.task.target;const m=s.task.performance_history;return m&&m.length&&(c+=" Â· changed "+F.formatDate(m[0].updated,"DD.MM.YYYY HH:mm")),c}),{dialogRef:e,onDialogHide:r,onDialogOK:l,onDialogCancel:u}=U(),b=T(()=>o.value===s.task.performance);function d(){l({performance:o.value})}return(c,m)=>(I(),P(et,{ref_key:"dialogRef",ref:e,onHide:w(r)},{default:h(()=>[f(at,{class:"q-dialog-plugin"},{default:h(()=>[f(me,null,{default:h(()=>[yt]),_:1}),f(me,null,{default:h(()=>[f(lt,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=q=>o.value=q),label:"Performance",hint:w(i)},null,8,["modelValue","hint"])]),_:1}),f(tt,{align:"right"},{default:h(()=>[f(Y,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:n.task.id}}},null,8,["to"]),f(vt),f(Y,{flat:"",label:"Cancel",class:"text-primary",onClick:w(u)},null,8,["onClick"]),f(Y,{disable:w(b),flat:"",label:"Submit",class:"text-primary",onClick:d},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},St={__name:"TaskListItem",props:{task:{type:Object,required:!0}},emits:["ondragstart"],setup(n,{emit:s}){const o=n,i=ut(),e=oe(),r=T(()=>o.task.target>1&&!o.task.done),l=T(()=>r.value?o.task.performance/o.task.target:0),u=T(()=>[o.task.performance,"of",o.task.target].join(" "));function b(){i.dialog({component:bt,componentProps:{task:o.task}}).onOk(c=>{c.performance>=o.task.target&&mt();const m={performance:c.performance};e.updateItem(o.task.id+"/",m).then(()=>e.refetch())})}function d(c){s("ondragstart",c,o.task)}return(c,m)=>(I(),P(re,{clickable:"",active:!!n.task.done,"active-class":"text-positive"},{default:h(()=>[n.task.done?(I(),P(L,{key:0,thumbnail:""},{default:h(()=>[f(j,{name:"done",color:"positive"})]),_:1})):n.task.group_id?(I(),P(L,{key:1,thumbnail:""},{default:h(()=>[f(j,{name:"event_repeat"})]),_:1})):(I(),P(L,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:d,"onTouchmove:native":m[0]||(m[0]=q=>{})},{default:h(()=>[f(j,{name:"drag_indicator"})]),_:1})),f(L,{onClick:b},{default:h(()=>[f($,null,{default:h(()=>[A(ge(n.task.name),1)]),_:1}),w(r)?(I(),P($,{key:0,caption:""},{default:h(()=>[A(ge(w(u)),1)]),_:1})):W("",!0),w(r)?(I(),P($,{key:1},{default:h(()=>[f(ht,{value:w(l),color:"positive"},null,8,["value"])]),_:1})):W("",!0)]),_:1})]),_:1},8,["active"]))}};var ye;(function(n){var s=function(){function i(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(i.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),i.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},i.prototype.getData=function(e){return this._data[e]||""},i.prototype.setData=function(e,r){this._data[e]=r},i.prototype.setDragImage=function(e,r,l){var u=o._instance;u._imgCustom=e,u._imgOffset={x:r,y:l}},i}();n.DataTransfer=s;var o=function(){function i(){if(this._lastClick=0,i._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var r=document,l=this._touchstart.bind(this),u=this._touchmove.bind(this),b=this._touchend.bind(this),d=e?{passive:!1,capture:!1}:!1;r.addEventListener("touchstart",l,d),r.addEventListener("touchmove",u,d),r.addEventListener("touchend",b),r.addEventListener("touchcancel",b)}}return i.getInstance=function(){return i._instance},i.prototype._touchstart=function(e){var r=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<i._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){r._dragSource==l&&r._img==null&&r._dispatchEvent(e,"contextmenu",l)&&r._reset()},i._CTXMENU),i._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){r._isDragEnabled=!0,r._touchmove(e)},i._PRESSHOLDAWAIT)))}},i.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var r=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",r)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",r)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),r!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",r),this._lastTarget=r),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",r))}},i.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},i.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},i.prototype._shouldHandleMove=function(e){return!i._ISPRESSHOLDMODE&&this._shouldHandle(e)},i.prototype._shouldHandlePressHoldMove=function(e){return i._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},i.prototype._shouldCancelPressHoldMove=function(e){return i._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>i._PRESSHOLDMARGIN},i.prototype._shouldStartDragging=function(e){var r=this._getDelta(e);return r>i._THRESHOLD||i._ISPRESSHOLDMODE&&r>=i._PRESSHOLDTHRESHOLD},i.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},i.prototype._getPoint=function(e,r){return e&&e.touches&&(e=e.touches[0]),{x:r?e.pageX:e.clientX,y:r?e.pageY:e.clientY}},i.prototype._getDelta=function(e){if(i._ISPRESSHOLDMODE&&!this._ptDown)return 0;var r=this._getPoint(e);return Math.abs(r.x-this._ptDown.x)+Math.abs(r.y-this._ptDown.y)},i.prototype._getTarget=function(e){for(var r=this._getPoint(e),l=document.elementFromPoint(r.x,r.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},i.prototype._createImage=function(e){this._img&&this._destroyImage();var r=this._imgCustom||this._dragSource;if(this._img=r.cloneNode(!0),this._copyStyle(r,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=r.getBoundingClientRect(),u=this._getPoint(e);this._imgOffset={x:u.x-l.left,y:u.y-l.top},this._img.style.opacity=i._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},i.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},i.prototype._moveImage=function(e){var r=this;requestAnimationFrame(function(){if(r._img){var l=r._getPoint(e,!0),u=r._img.style;u.position="absolute",u.pointerEvents="none",u.zIndex="999999",u.left=Math.round(l.x-r._imgOffset.x)+"px",u.top=Math.round(l.y-r._imgOffset.y)+"px"}})},i.prototype._copyProps=function(e,r,l){for(var u=0;u<l.length;u++){var b=l[u];e[b]=r[b]}},i.prototype._copyStyle=function(e,r){if(i._rmvAtts.forEach(function(m){r.removeAttribute(m)}),e instanceof HTMLCanvasElement){var l=e,u=r;u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)}for(var b=getComputedStyle(e),d=0;d<b.length;d++){var c=b[d];c.indexOf("transition")<0&&(r.style[c]=b[c])}r.style.pointerEvents="none";for(var d=0;d<e.children.length;d++)this._copyStyle(e.children[d],r.children[d])},i.prototype._dispatchEvent=function(e,r,l){if(e&&l){var u=document.createEvent("Event"),b=e.touches?e.touches[0]:e;return u.initEvent(r,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,e,i._kbdProps),this._copyProps(u,b,i._ptProps),u.dataTransfer=this._dataTransfer,l.dispatchEvent(u),u.defaultPrevented}return!1},i.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},i}();o._instance=new o,o._THRESHOLD=5,o._OPACITY=.5,o._DBLCLICK=500,o._CTXMENU=900,o._ISPRESSHOLDMODE=!1,o._PRESSHOLDAWAIT=400,o._PRESSHOLDMARGIN=25,o._PRESSHOLDTHRESHOLD=0,o._rmvAtts="id,class,style,draggable".split(","),o._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),o._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),n.DragDropTouch=o})(ye||(ye={}));const Dt={__name:"WeekTimelineEntry",props:{tasks:{type:Array,required:!0},monday:{type:String,required:!0}},setup(n){const s=n,o=oe(),i=T(()=>s.tasks.length?[...s.tasks].sort((d,c)=>c.target-d.target):null),e=T(()=>{const d=F.subtractFromDate(s.monday,{days:1}),c=F.addToDate(s.monday,{days:6}),m=M=>F.formatDate(M,"MMMM"),q=m(s.monday);return q!==m(d)||q!==m(c)}),r=F.formatDate(s.monday,"w-Q-YYYY-MMM D").split("-"),l=["Week "+r[0],"Q"+r[1],r[2],r[3]].join(" Â· ");function u(d,c){const m={id:c.id,day:F.getDayOfWeek(c.planned),week:r[0]};d.dataTransfer.setData("text",JSON.stringify(m)),d.dataTransfer.dropEffect="move"}function b(d){const c=JSON.parse(d.dataTransfer.getData("text"));if(c.week===r[0])return;const m={planned:F.addToDate(s.monday,{days:c.day-1}).toISOString()};o.updateItem(c.id+"/",m).then(()=>o.refetch())}return(d,c)=>(I(),P(dt,{color:n.monday===w(o).currentWeek?"orange":"primary",subtitle:w(l),icon:w(e)?"calendar_month":void 0,onDragover:c[0]||(c[0]=ae(()=>{},["prevent"])),onDragenter:c[1]||(c[1]=ae(()=>{},["prevent"])),onDrop:c[2]||(c[2]=ae(m=>b(m),["prevent"]))},{default:h(()=>[w(i)?(I(),P(be,{key:0},{default:h(()=>[(I(!0),Ee(Te,null,we(w(i),m=>(I(),P(st,{key:m.id,style:{"min-height":"51.19px"}},{default:h(()=>[f(St,{task:m,onOndragstart:u},null,8,["task"])]),_:2},1024))),128))]),_:1})):W("",!0)]),_:1},8,["color","subtitle","icon"]))}},Lt={__name:"HomeView",setup(n){const s=oe();return(o,i)=>(I(),P(it,{padding:""},{default:h(()=>[f(Ue,null,{default:h(()=>[f(We,null,{default:h(()=>[A("Plan")]),_:1}),f(ot,{modelValue:w(s).filter.goal,"onUpdate:modelValue":i[0]||(i[0]=e=>w(s).filter.goal=e),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),f(Y,{flat:"",round:"",icon:"filter_list"},{default:h(()=>[f(nt,null,{default:h(()=>[f(be,null,{default:h(()=>[f(re,null,{default:h(()=>[f(L,null,{default:h(()=>[f($,null,{default:h(()=>[A("Hide passed done")]),_:1})]),_:1}),f(L,{side:""},{default:h(()=>[f(ve,{modelValue:w(s).filter.done,"onUpdate:modelValue":i[1]||(i[1]=e=>w(s).filter.done=e)},null,8,["modelValue"])]),_:1})]),_:1}),f(re,null,{default:h(()=>[f(L,null,{default:h(()=>[f($,null,{default:h(()=>[A("Hide passed recurring")]),_:1})]),_:1}),f(L,{side:""},{default:h(()=>[f(ve,{modelValue:w(s).filter.recurring,"onUpdate:modelValue":i[2]||(i[2]=e=>w(s).filter.recurring=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),w(s).calendar?(I(),P(ct,{key:0,layout:"dense",class:"q-px-md"},{default:h(()=>[(I(!0),Ee(Te,null,we(w(s).calendar,(e,r)=>(I(),P(Dt,{key:r,tasks:e,monday:r},null,8,["tasks","monday"]))),128))]),_:1})):W("",!0)]),_:1}))}};export{Lt as default};
