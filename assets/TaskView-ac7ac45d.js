import{Z as n,_ as i,a0 as q,a2 as u,a3 as t,aj as e,aD as w,ap as d,a5 as C,a4 as m,ao as v,ax as y,aE as D,ar as N}from"./index-ee49e85a.js";import{Q as P,a as $}from"./api.client-4f1613d5.js";import{Q as B}from"./QForm-d2eb2285.js";import{Q as O}from"./QPage-4ebdf1c4.js";import{u as S,_ as Q}from"./NumberInput-adfcdda3.js";import{u as A,_ as p}from"./DateInput-8433818f.js";import{_ as I}from"./ParentSelect-f1e071b7.js";import{_ as K}from"./DurationInput-fd1c95c4.js";import"./format-30bf4482.js";import"./QItemLabel-90e823b9.js";import"./selection-103ca8d4.js";const F={class:"q-pa-md"},R={class:"row q-col-gutter-lg"},h={__name:"TaskView",setup(j){const T=q(),c=S(),s=parseInt(T.params.id),f="recurring/",{item:l,path:V,persist:b,remove:g,save:_,back:k}=A({name:"",goal:null,planned:null,recurring_until:null,target:1,performance:0,planned_total_time:null,done:null,description:""},"/tasks/",s);function U(){l.value.group_id?c.dialog({title:"Delete recurring task",cancel:!0,ok:"Delete",options:{type:"radio",model:"this",items:[{label:"This task",value:"this"},{label:"All tasks",value:"all"}]}}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),g()}):g()}function x(){l.value.group_id?c.dialog({title:"Save recurring task",cancel:!0,ok:"Save",options:{type:"radio",model:"this",items:[{label:"This task",value:"this"},{label:"All tasks",value:"all"}]}}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),_()}):_()}return(r,o)=>(u(),n(O,{padding:""},{default:i(()=>[t(B,{onSubmit:N(x,["prevent"])},{default:i(()=>[t(P,null,{default:i(()=>[e(l).group_id?(u(),n(w,{key:0,icon:"event_repeat"})):d("",!0),t($,null,{default:i(()=>[C("Task")]),_:1}),e(s)?(u(),n(m,{key:1,type:"button",flat:"",round:"",icon:"delete",disable:e(b),onClick:U},null,8,["disable"])):d("",!0),t(m,{type:"submit",flat:"",round:"",icon:"save",disable:!e(l).name||e(b)},null,8,["disable"]),t(m,{type:"button",flat:"",round:"",icon:"clear",onClick:e(k)},null,8,["onClick"])]),_:1}),v("div",F,[t(y,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),label:"Name","stack-label":"",autofocus:!e(s),rules:[a=>!!a||"Field is required"],onKeyup:D(e(k),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),v("div",R,[t(I,{modelValue:e(l).goal,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).goal=a),label:"Goal",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(p,{modelValue:e(l).planned,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).planned=a),label:"Planned",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(s)?d("",!0):(u(),n(p,{key:0,modelValue:e(l).recurring_until,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).recurring_until=a),label:"Recurring until",class:"col-12 col-sm-6"},null,8,["modelValue"])),t(Q,{modelValue:e(l).target,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).target=a),label:"Target",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(s)?(u(),n(Q,{key:1,modelValue:e(l).performance,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).performance=a),label:"Performance",class:"col-12 col-sm-6"},null,8,["modelValue"])):d("",!0),t(K,{modelValue:e(l).planned_total_time,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).planned_total_time=a),label:"Planned total time",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(p,{modelValue:e(l).done,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).done=a),label:"Done",class:"col-12 col-sm-6"},null,8,["modelValue"])]),t(y,{modelValue:e(l).description,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).description=a),type:"textarea",label:"Description","stack-label":"",class:"q-pt-md"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),_:1}))}};export{h as default};
