import{Z as s,_ as i,a0 as w,a2 as u,a3 as t,aj as e,aD as C,ap as d,a5 as D,a4 as m,ao as y,ax as Q,aE as N,ar as P}from"./index-970caa1b.js";import{Q as $,a as B}from"./api.client-48f47ead.js";import{Q as O}from"./QForm-8c5f07e3.js";import{Q as S}from"./QPage-943b563a.js";import{u as I,_ as U}from"./NumberInput-413dc7c5.js";import{u as K,_ as p}from"./DateInput-8cfd7805.js";import{_ as A}from"./ParentSelect-975b47e9.js";import{_ as F}from"./DurationInput-1b394fe6.js";import"./format-11f24863.js";import"./QItemLabel-366132ab.js";import"./selection-ef044d3f.js";const R={class:"q-pa-md"},j={class:"row q-col-gutter-lg"},ee={__name:"TaskView",setup(E){const T=w(),c=I(),n=parseInt(T.params.id),f="recurring/",{item:l,path:V,persist:g,remove:_,save:b,back:k}=K({name:"",goal:null,planned:null,recurring_until:null,target:1,performance:0,planned_total_time:null,done:null,description:""},"/tasks/",n),v={type:"radio",model:"this",items:[{label:"This task",value:"this"},{label:"All tasks",value:"all"}]};function x(){l.value.group_id?c.dialog({title:"Delete recurring task",cancel:!0,ok:"Delete",options:v}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),_()}):_()}function q(){l.value.group_id?c.dialog({title:"Save recurring task",cancel:!0,ok:"Save",options:v}).onOk(r=>{r==="all"&&(V.value=f+l.value.group_id+"/"),b()}):b()}return(r,o)=>(u(),s(S,{padding:""},{default:i(()=>[t(O,{onSubmit:P(q,["prevent"])},{default:i(()=>[t($,null,{default:i(()=>[e(l).group_id?(u(),s(C,{key:0,icon:"event_repeat"})):d("",!0),t(B,null,{default:i(()=>[D("Task")]),_:1}),e(n)?(u(),s(m,{key:1,type:"button",flat:"",round:"",icon:"delete",disable:e(g),onClick:x},null,8,["disable"])):d("",!0),t(m,{type:"submit",flat:"",round:"",icon:"save",disable:!e(l).name||e(g)},null,8,["disable"]),t(m,{type:"button",flat:"",round:"",icon:"clear",onClick:e(k)},null,8,["onClick"])]),_:1}),y("div",R,[t(Q,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),label:"Name","stack-label":"",autofocus:!e(n),rules:[a=>!!a||"Field is required"],onKeyup:N(e(k),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),y("div",j,[t(A,{modelValue:e(l).goal,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).goal=a),label:"Goal",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(p,{modelValue:e(l).planned,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).planned=a),label:"Planned",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(n)?d("",!0):(u(),s(p,{key:0,modelValue:e(l).recurring_until,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).recurring_until=a),label:"Recurring until",class:"col-12 col-sm-6"},null,8,["modelValue"])),t(U,{modelValue:e(l).target,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).target=a),label:"Target",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(U,{modelValue:e(l).performance,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).performance=a),label:"Performance",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(F,{modelValue:e(l).planned_total_time,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).planned_total_time=a),label:"Planned total time",class:"col-12 col-sm-6"},null,8,["modelValue"]),e(n)?(u(),s(p,{key:1,modelValue:e(l).done,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).done=a),label:"Done",class:"col-12 col-sm-6"},null,8,["modelValue"])):d("",!0)]),t(Q,{modelValue:e(l).description,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).description=a),type:"textarea",label:"Description","stack-label":"",class:"q-pt-md"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),_:1}))}};export{ee as default};
