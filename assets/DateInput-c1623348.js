import{r as m,a0 as v,j as V,P as I,R as k,W as j,ac as y}from"./index-11efb6b3.js";import{Q as O}from"./QForm-6dee6b6a.js";function _(t,e,u){const l=m(t?{...e.getItem(t)}:u),n=m(t+"/"),a=m(!1),r=t?{...l.value}:null,f=v();function i(s,c){return Object.fromEntries(Object.entries(c).filter(([g,h])=>s[g]!==h))}function p(s,c){return Object.keys(i(s,c)).length}function o(){f.back()}function d(){a.value=!0,e.deleteItem(n.value).then(()=>{e.refetch(),o()})}function b(){a.value=!0,t?e.updateItem(n.value,i(r,{...l.value})).then(()=>{e.refetch(),o()}):e.createItem(l.value).then(()=>{e.refetch(),o()})}return{item:l,original:r,path:n,persist:a,changed:p,remove:d,save:b,back:o}}const x={__name:"DateInput",props:{label:{type:String,required:!0},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(t,{emit:e}){const u=t,l=V({get(){return u.modelValue?u.modelValue.slice(0,10):null},set(n){e("update:modelValue",n?new Date(n).toISOString():null)}});return(n,a)=>(I(),k(O,{modelValue:j(l),"onUpdate:modelValue":a[0]||(a[0]=r=>y(l)?l.value=r:null),type:"date",label:t.label,"stack-label":""},null,8,["modelValue","label"]))}};export{x as _,_ as u};
