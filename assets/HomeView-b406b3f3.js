import{b as V,a as Ye,Q as Be}from"./api.client-d572f20a.js";import{c as z,D as be,E as Se,U as je,f as D,h as M,S as ie,g as ue,ai as ke,d as Ve,e as te,j as We,a9 as B,aj as Ue,ak as ze,I as Xe,r as W,Z as C,_ as w,al as I,am as Ke,a2 as T,a3 as E,an as ae,ao as Ze,a4 as j,ap as Ge,aq as Je,ar as $,a5 as oe,aa as _e,a6 as se,a8 as le,a7 as De,as as re,o as et,w as tt}from"./index-dbffb901.js";import{Q as at}from"./QPage-ca8744e3.js";import{d as Q}from"./date-75f7554a.js";import{_ as rt}from"./GoalSelect-8a0c1c3b.js";import{Q as nt}from"./QList-3e79784b.js";import{a as Y,Q as it}from"./format-15de9fd0.js";import{Q as ne}from"./QItemLabel-bafae335.js";import{_ as ot,u as st}from"./NumberInput-44450606.js";import{_ as lt}from"./DurationInput-ae2813cc.js";import"./selection-183a36e7.js";const ut=z({name:"QTimeline",props:{...be,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},layout:{type:String,default:"dense",validator:r=>["dense","comfortable","loose"].includes(r)}},setup(r,{slots:c}){const o=ue(),n=Se(r,o.proxy.$q);je(ke,r);const e=D(()=>`q-timeline q-timeline--${r.layout} q-timeline--${r.layout}--${r.side}`+(n.value===!0?" q-timeline--dark":""));return()=>M("ul",{class:e.value},ie(c.default))}}),ct=z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(r,{slots:c}){const o=Ve(ke,te);if(o===te)return console.error("QTimelineEntry needs to be child of QTimeline"),te;const n=D(()=>`q-timeline__entry q-timeline__entry--${r.side}`+(r.icon!==void 0||r.avatar!==void 0?" q-timeline__entry--icon":"")),e=D(()=>`q-timeline__dot text-${r.color||o.color}`),i=D(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const l=We(c.default,[]);if(r.body!==void 0&&l.unshift(r.body),r.heading===!0){const u=[M("div"),M("div"),M(r.tag,{class:"q-timeline__heading-title"},l)];return M("div",{class:"q-timeline__heading"},i.value===!0?u.reverse():u)}let s;r.icon!==void 0?s=[M(B,{class:"row items-center justify-center",name:r.icon})]:r.avatar!==void 0&&(s=[M("img",{class:"q-timeline__dot-img",src:r.avatar})]);const d=[M("div",{class:"q-timeline__subtitle"},[M("span",{},ie(c.subtitle,[r.subtitle]))]),M("div",{class:e.value},s),M("div",{class:"q-timeline__content"},[M("h6",{class:"q-timeline__title"},ie(c.title,[r.title]))].concat(l))];return M("li",{class:n.value},i.value===!0?d.reverse():d)}}});var pe;(function(r){var c=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,i){this._data[e]=i},n.prototype.setDragImage=function(e,i,l){var s=o._instance;s._imgCustom=e,s._imgOffset={x:i,y:l}},n}();r.DataTransfer=c;var o=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var i=document,l=this._touchstart.bind(this),s=this._touchmove.bind(this),d=this._touchend.bind(this),u=e?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",l,u),i.addEventListener("touchmove",s,u),i.addEventListener("touchend",d),i.addEventListener("touchcancel",d)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var i=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){i._dragSource==l&&i._img==null&&i._dispatchEvent(e,"contextmenu",l)&&i._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var i=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",i)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",i)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",i),this._lastTarget=i),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",i))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var i=this._getDelta(e);return i>n._THRESHOLD||n._ISPRESSHOLDMODE&&i>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new c,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,i){return e&&e.touches&&(e=e.touches[0]),{x:i?e.pageX:e.clientX,y:i?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(e);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var i=this._getPoint(e),l=document.elementFromPoint(i.x,i.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},n.prototype._createImage=function(e){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=i.getBoundingClientRect(),s=this._getPoint(e);this._imgOffset={x:s.x-l.left,y:s.y-l.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var i=this;requestAnimationFrame(function(){if(i._img){var l=i._getPoint(e,!0),s=i._img.style;s.position="absolute",s.pointerEvents="none",s.zIndex="999999",s.left=Math.round(l.x-i._imgOffset.x)+"px",s.top=Math.round(l.y-i._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,i,l){for(var s=0;s<l.length;s++){var d=l[s];e[d]=i[d]}},n.prototype._copyStyle=function(e,i){if(n._rmvAtts.forEach(function(L){i.removeAttribute(L)}),e instanceof HTMLCanvasElement){var l=e,s=i;s.width=l.width,s.height=l.height,s.getContext("2d").drawImage(l,0,0)}for(var d=getComputedStyle(e),u=0;u<d.length;u++){var _=d[u];_.indexOf("transition")<0&&(i.style[_]=d[_])}i.style.pointerEvents="none";for(var u=0;u<e.children.length;u++)this._copyStyle(e.children[u],i.children[u])},n.prototype._dispatchEvent=function(e,i,l){if(e&&l){var s=document.createEvent("Event"),d=e.touches?e.touches[0]:e;return s.initEvent(i,!0,!0),s.button=0,s.which=s.buttons=1,this._copyProps(s,e,n._kbdProps),this._copyProps(s,d,n._ptProps),s.dataTransfer=this._dataTransfer,l.dispatchEvent(s),s.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();o._instance=new o,o._THRESHOLD=5,o._OPACITY=.5,o._DBLCLICK=500,o._CTXMENU=900,o._ISPRESSHOLDMODE=!1,o._PRESSHOLDAWAIT=400,o._PRESSHOLDMARGIN=25,o._PRESSHOLDTHRESHOLD=0,o._rmvAtts="id,class,style,draggable".split(","),o._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),o._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),r.DragDropTouch=o})(pe||(pe={}));const dt={xs:2,sm:4,md:6,lg:10,xl:14};function ye(r,c,o){return{transform:c===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-r},1,1)`:`scale3d(${r},1,1)`}}const ht=z({name:"QLinearProgress",props:{...be,...Ue,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(r,{slots:c}){const{proxy:o}=ue(),n=Se(r,o.$q),e=ze(r,dt),i=D(()=>r.indeterminate===!0||r.query===!0),l=D(()=>r.reverse!==r.query),s=D(()=>({...e.value!==null?e.value:{},"--q-linear-progress-speed":`${r.animationSpeed}ms`})),d=D(()=>"q-linear-progress"+(r.color!==void 0?` text-${r.color}`:"")+(r.reverse===!0||r.query===!0?" q-linear-progress--reverse":"")+(r.rounded===!0?" rounded-borders":"")),u=D(()=>ye(r.buffer!==void 0?r.buffer:1,l.value,o.$q)),_=D(()=>`with${r.instantFeedback===!0?"out":""}-transition`),L=D(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${_.value} q-linear-progress__track--${n.value===!0?"dark":"light"}`+(r.trackColor!==void 0?` bg-${r.trackColor}`:"")),P=D(()=>ye(i.value===!0?1:r.value,l.value,o.$q)),p=D(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${_.value} q-linear-progress__model--${i.value===!0?"in":""}determinate`),X=D(()=>({width:`${r.value*100}%`})),K=D(()=>`q-linear-progress__stripe absolute-${r.reverse===!0?"right":"left"} q-linear-progress__stripe--${_.value}`);return()=>{const R=[M("div",{class:L.value,style:u.value}),M("div",{class:p.value,style:P.value})];return r.stripe===!0&&i.value===!1&&R.push(M("div",{class:K.value,style:X.value})),M("div",{class:d.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":r.indeterminate===!0?void 0:r.value},Xe(c.default,R))}}});var ce={};(function r(c,o,n,e){var i=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL);function l(){}function s(a){var t=o.exports.Promise,g=t!==void 0?t:c.Promise;return typeof g=="function"?new g(a):(a(l,l),null)}var d=function(){var a=Math.floor(16.666666666666668),t,g,h={},y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(v){var f=Math.random();return h[f]=requestAnimationFrame(function m(k){y===k||y+a-1<k?(y=k,delete h[f],v()):h[f]=requestAnimationFrame(m)}),f},g=function(v){h[v]&&cancelAnimationFrame(h[v])}):(t=function(v){return setTimeout(v,a)},g=function(v){return clearTimeout(v)}),{frame:t,cancel:g}}(),u=function(){var a,t,g={};function h(y){function v(f,m){y.postMessage({options:f||{},callback:m})}y.init=function(m){var k=m.transferControlToOffscreen();y.postMessage({canvas:k},[k])},y.fire=function(m,k,q){if(t)return v(m,null),t;var b=Math.random().toString(36).slice(2);return t=s(function(x){function O(S){S.data.callback===b&&(delete g[b],y.removeEventListener("message",O),t=null,q(),x())}y.addEventListener("message",O),v(m,b),g[b]=O.bind(null,{data:{callback:b}})}),t},y.reset=function(){y.postMessage({reset:!0});for(var m in g)g[m](),delete g[m]}}return function(){if(a)return a;if(!n&&i){var y=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([y])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",v),null}h(a)}return a}}(),_={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(a,t){return t?t(a):a}function P(a){return a!=null}function p(a,t,g){return L(a&&P(a[t])?a[t]:_[t],g)}function X(a){return a<0?0:Math.floor(a)}function K(a,t){return Math.floor(Math.random()*(t-a))+a}function R(a){return parseInt(a,16)}function we(a){return a.map(Me)}function Me(a){var t=String(a).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:R(t.substring(0,2)),g:R(t.substring(2,4)),b:R(t.substring(4,6))}}function Te(a){var t=p(a,"origin",Object);return t.x=p(t,"x",Number),t.y=p(t,"y",Number),t}function Ce(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function Ie(a){var t=a.getBoundingClientRect();a.width=t.width,a.height=t.height}function Pe(a){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=a,t}function Oe(a,t,g,h,y,v,f,m,k){a.save(),a.translate(t,g),a.rotate(v),a.scale(h,y),a.arc(0,0,1,f,m,k),a.restore()}function xe(a){var t=a.angle*(Math.PI/180),g=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-t+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar}}function Le(a,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var g=t.tick++/t.totalTicks,h=t.x+t.random*t.tiltCos,y=t.y+t.random*t.tiltSin,v=t.wobbleX+t.random*t.tiltCos,f=t.wobbleY+t.random*t.tiltSin;if(a.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-g)+")",a.beginPath(),t.shape==="circle")a.ellipse?a.ellipse(t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-y)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Oe(a,t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-y)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var m=Math.PI/2*3,k=4*t.scalar,q=8*t.scalar,b=t.x,x=t.y,O=5,S=Math.PI/O;O--;)b=t.x+Math.cos(m)*q,x=t.y+Math.sin(m)*q,a.lineTo(b,x),m+=S,b=t.x+Math.cos(m)*k,x=t.y+Math.sin(m)*k,a.lineTo(b,x),m+=S;else a.moveTo(Math.floor(t.x),Math.floor(t.y)),a.lineTo(Math.floor(t.wobbleX),Math.floor(y)),a.lineTo(Math.floor(v),Math.floor(f)),a.lineTo(Math.floor(h),Math.floor(t.wobbleY));return a.closePath(),a.fill(),t.tick<t.totalTicks}function qe(a,t,g,h,y){var v=t.slice(),f=a.getContext("2d"),m,k,q=s(function(b){function x(){m=k=null,f.clearRect(0,0,h.width,h.height),y(),b()}function O(){n&&!(h.width===e.width&&h.height===e.height)&&(h.width=a.width=e.width,h.height=a.height=e.height),!h.width&&!h.height&&(g(a),h.width=a.width,h.height=a.height),f.clearRect(0,0,h.width,h.height),v=v.filter(function(S){return Le(f,S)}),v.length?m=d.frame(O):x()}m=d.frame(O),k=x});return{addFettis:function(b){return v=v.concat(b),q},canvas:a,promise:q,reset:function(){m&&d.cancel(m),k&&k()}}}function de(a,t){var g=!a,h=!!p(t||{},"resize"),y=p(t,"disableForReducedMotion",Boolean),v=i&&!!p(t||{},"useWorker"),f=v?u():null,m=g?Ce:Ie,k=a&&f?!!a.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,b;function x(S,G,J){for(var F=p(S,"particleCount",X),A=p(S,"angle",Number),N=p(S,"spread",Number),H=p(S,"startVelocity",Number),He=p(S,"decay",Number),Re=p(S,"gravity",Number),Fe=p(S,"drift",Number),fe=p(S,"colors",we),$e=p(S,"ticks",Number),me=p(S,"shapes"),Qe=p(S,"scalar"),ge=Te(S),ve=F,ee=[],Ae=a.width*ge.x,Ne=a.height*ge.y;ve--;)ee.push(xe({x:Ae,y:Ne,angle:A,spread:N,startVelocity:H,color:fe[ve%fe.length],shape:me[K(0,me.length)],ticks:$e,decay:He,gravity:Re,drift:Fe,scalar:Qe}));return b?b.addFettis(ee):(b=qe(a,ee,m,G,J),b.promise)}function O(S){var G=y||p(S,"disableForReducedMotion",Boolean),J=p(S,"zIndex",Number);if(G&&q)return s(function(H){H()});g&&b?a=b.canvas:g&&!a&&(a=Pe(J),document.body.appendChild(a)),h&&!k&&m(a);var F={width:a.width,height:a.height};f&&!k&&f.init(a),k=!0,f&&(a.__confetti_initialized=!0);function A(){if(f){var H={getBoundingClientRect:function(){if(!g)return a.getBoundingClientRect()}};m(H),f.postMessage({resize:{width:H.width,height:H.height}});return}F.width=F.height=null}function N(){b=null,h&&c.removeEventListener("resize",A),g&&a&&(document.body.removeChild(a),a=null,k=!1)}return h&&c.addEventListener("resize",A,!1),f?f.fire(S,F,N):x(S,F,N)}return O.reset=function(){f&&f.reset(),b&&b.reset()},O}var Z;function he(){return Z||(Z=de(null,{useWorker:!0,resize:!0})),Z}o.exports=function(){return he().apply(this,arguments)},o.exports.reset=function(){he().reset()},o.exports.create=de})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ce,!1);const ft=ce.exports;ce.exports.create;const mt=M("div",{class:"q-space"}),gt=z({name:"QSpace",setup(){return()=>mt}}),vt=()=>!0;function _t(r){const c={};return r.forEach(o=>{c[o]=vt}),c}function U(){const{emit:r,proxy:c}=ue(),o=W(null);function n(){o.value.show()}function e(){o.value.hide()}function i(s){r("ok",s),e()}function l(){r("hide")}return Object.assign(c,{show:n,hide:e}),{dialogRef:o,onDialogHide:l,onDialogOK:i,onDialogCancel:e}}const Ee=["ok","hide"];U.emits=Ee;U.emitsObject=_t(Ee);const pt=Je("div",{class:"text-h6"},"Progress",-1),yt={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...U.emits],setup(r){const c=r,o=W(c.task.performance),n=W(null),e=D(()=>{let L="of "+c.task.target;const P=c.task.performance_history;return P&&P.length&&(L+=" · last updated "+Q.formatDate(P[0].updated,"DD.MM.YYYY HH:mm")),L}),{dialogRef:i,onDialogHide:l,onDialogOK:s,onDialogCancel:d}=U(),u=D(()=>o.value===c.task.performance&&!n.value);function _(){s({performance:o.value,duration:n.value})}return(L,P)=>(T(),C(Ke,{ref_key:"dialogRef",ref:i,onHide:I(l)},{default:w(()=>[E(Ge,{class:"q-dialog-plugin"},{default:w(()=>[E(ae,null,{default:w(()=>[pt]),_:1}),E(ae,null,{default:w(()=>[E(ot,{modelValue:o.value,"onUpdate:modelValue":P[0]||(P[0]=p=>o.value=p),label:"Performance",hint:I(e)},null,8,["modelValue","hint"])]),_:1}),E(ae,null,{default:w(()=>[E(lt,{modelValue:n.value,"onUpdate:modelValue":P[1]||(P[1]=p=>n.value=p),label:"Time spent"},null,8,["modelValue"])]),_:1}),E(Ze,{align:"right"},{default:w(()=>[E(j,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:r.task.id}}},null,8,["to"]),E(gt),E(j,{flat:"",label:"Cancel",class:"text-primary",onClick:I(d)},null,8,["onClick"]),E(j,{disable:I(u),flat:"",label:"Submit",class:"text-primary",onClick:_},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},bt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},emits:["mutate","ondragstart"],setup(r,{emit:c}){const o=r,n=st(),e=D(()=>o.task.target>1&&!o.task.done),i=D(()=>e.value?o.task.performance/o.task.target:0),l=D(()=>[o.task.performance,"of",o.task.target].join(" "));function s(){n.dialog({component:yt,componentProps:{task:o.task}}).onOk(d=>{d.performance!==o.task.performance&&(d.performance>=o.task.target&&ft(),V.update("/tasks/"+o.task.id+"/",{performance:d.performance}).then(()=>c("mutate"))),d.duration&&V.create("/times/",{task:o.task.id,start:new Date().toISOString(),end:null,duration:d.duration,description:""}).then(()=>c("mutate"))})}return(d,u)=>(T(),C(it,{clickable:"",active:Boolean(r.task.done),"active-class":"text-positive"},{default:w(()=>[r.task.done?(T(),C(Y,{key:0,thumbnail:""},{default:w(()=>[E(B,{name:"done",color:"positive"})]),_:1})):(T(),C(Y,{key:1,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:u[0]||(u[0]=_=>d.$emit("ondragstart",_,r.task)),"onTouchmove:native":u[1]||(u[1]=_=>{})},{default:w(()=>[E(B,{name:"drag_indicator"})]),_:1})),r.task.group_id&&!r.task.done?(T(),C(Y,{key:2,thumbnail:""},{default:w(()=>[E(B,{name:"event_repeat"})]),_:1})):$("",!0),E(Y,{onClick:s},{default:w(()=>[E(ne,null,{default:w(()=>[oe(_e(r.task.name),1)]),_:1}),I(e)?(T(),C(ne,{key:0,caption:""},{default:w(()=>[oe(_e(I(l)),1)]),_:1})):$("",!0),I(e)?(T(),C(ne,{key:1},{default:w(()=>[E(ht,{value:I(i),color:"positive"},null,8,["value"])]),_:1})):$("",!0)]),_:1})]),_:1},8,["active"]))}},St={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0}},emits:["mutate"],setup(r,{emit:c}){const o=r,n=new Date(o.week.day),e=Q.formatDate(n,"w-YYYY-Q-MMM D").split("-"),i=["Week "+e[0],e[1]+" / Q"+e[2],e[3]].join(" · ");function l(d,u){const _={id:u.id,day:Q.getDayOfWeek(u.planned),week:e[0]};d.dataTransfer.setData("text",JSON.stringify(_)),d.dataTransfer.dropEffect="move"}function s(d){const u=JSON.parse(d.dataTransfer.getData("text"));if(u.week===e[0])return;const _=Q.addToDate(n,{days:u.day-1});V.update("/tasks/"+u.id+"/",{planned:_.toISOString()}).then(()=>c("mutate"))}return(d,u)=>(T(),C(ct,{subtitle:I(i),onDragover:u[1]||(u[1]=re(()=>{},["prevent"])),onDragenter:u[2]||(u[2]=re(()=>{},["prevent"])),onDrop:u[3]||(u[3]=re(_=>s(_),["prevent"]))},{default:w(()=>[r.week.tasks&&r.week.tasks.length?(T(),C(nt,{key:0},{default:w(()=>[(T(!0),se(le,null,De(r.week.tasks,_=>(T(),C(bt,{key:_.id,task:_,onOndragstart:l,onMutate:u[0]||(u[0]=L=>d.$emit("mutate"))},null,8,["task"]))),128))]),_:1})):$("",!0)]),_:1},8,["subtitle"]))}},Lt={__name:"HomeView",setup(r){const c="Goal-Filter",o=Q.formatDate(new Date,"YYYY-w"),n=W(null),e=D(()=>n.value?"/plan/?goal="+n.value:"/plan/"),{data:i,mutate:l}=V.read(e);return et(()=>{const s=localStorage.getItem(c);s&&(n.value=parseInt(s))}),tt(n,s=>{s?localStorage.setItem(c,s):localStorage.removeItem(c)}),(s,d)=>(T(),C(at,{padding:""},{default:w(()=>[E(Be,null,{default:w(()=>[E(Ye,null,{default:w(()=>[oe("Plan")]),_:1}),E(rt,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=u=>n.value=u),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),E(j,{to:{name:"task",params:{id:"create"}},icon:"assignment_add",flat:"",round:""})]),_:1}),I(i)?(T(),C(ut,{key:0,layout:"dense",class:"q-px-md"},{default:w(()=>[(T(!0),se(le,null,De(I(i),(u,_)=>(T(),se(le,{key:_},[u.day?(T(),C(St,{key:0,color:_===I(o)?"orange":"",week:u,onMutate:I(l)},null,8,["color","week","onMutate"])):$("",!0)],64))),128))]),_:1})):$("",!0)]),_:1}))}};export{Lt as default};
