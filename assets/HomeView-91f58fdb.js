import{a as Je,Q as et}from"./QToolbar-c75ec141.js";import{a as U,c as se,Q as Ce}from"./format-2a95f3c1.js";import{c as Z,D as ve,E as _e,U as tt,f as k,h as y,S as ee,g as te,aw as Ke,r as Y,ax as at,w as De,b as nt,ay as rt,az as it,ae as X,aA as lt,C as He,J as ot,aB as st,aC as Me,aD as Be,a7 as R,a1 as F,a2 as p,aE as Ve,af as qe,aF as I,a8 as b,aG as Ae,d as ut,e as Ee,j as ct,aH as dt,aI as ft,I as ht,aJ as Re,aK as gt,a9 as fe,aL as mt,aa as ue,aM as ge,ab as ze,ad as je,ac as Ue,aN as we,aO as Fe}from"./index-b0aafda0.js";import{Q as Ye}from"./QList-d4aa5a3f.js";import{u as vt,a as _t,Q as We}from"./QMenu-d5694648.js";import{u as yt,Q as bt}from"./GoalStore-3cb77b0c.js";import{u as Pe}from"./TaskStore-9d0926a3.js";import{Q as pt}from"./QSlideTransition-92b5da7c.js";import{Q as kt}from"./QField-9302a5a1.js";import{Q as St}from"./QIntersection-e246a6d6.js";import{d as he}from"./date-750dc31e.js";import{_ as xt,u as Tt}from"./NumberInput-8e82cb47.js";const Et=Z({name:"QTimeline",props:{...ve,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:s}){const u=te(),l=_e(t,u.proxy.$q);tt(Ke,t);const e=k(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(l.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:e.value},ee(s.default))}}),wt=["none","strict","leaf","leaf-filtered"],Ct=Z({name:"QTree",props:{...ve,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>wt.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:s,emit:u}){const{proxy:l}=te(),{$q:e}=l,o=_e(t,e),c=Y({}),d=Y(t.ticked||[]),m=Y(t.expanded||[]);let v={};at(()=>{v={}});const w=k(()=>`q-tree q-tree--${t.dense===!0?"dense":"standard"}`+(t.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),L=k(()=>t.selected!==void 0),V=k(()=>t.icon||e.iconSet.tree.icon),q=k(()=>t.controlColor||t.color),N=k(()=>t.textColor!==void 0?` text-${t.textColor}`:""),H=k(()=>{const r=t.selectedColor||t.color;return r?` text-${r}`:""}),$=k(()=>t.filterMethod!==void 0?t.filterMethod:(r,f)=>{const n=f.toLowerCase();return r[t.labelKey]&&r[t.labelKey].toLowerCase().indexOf(n)>-1}),Q=k(()=>{const r={},f=(n,_)=>{const h=n.tickStrategy||(_?_.tickStrategy:t.tickStrategy),g=n[t.nodeKey],P=n[t.childrenKey]&&n[t.childrenKey].length>0,K=n.disabled!==!0&&L.value===!0&&n.selectable!==!1,O=n.disabled!==!0&&n.expandable!==!1,J=h!=="none",z=h==="strict",B=h==="leaf-filtered",ie=h==="leaf"||h==="leaf-filtered";let le=n.disabled!==!0&&n.tickable!==!1;ie===!0&&le===!0&&_&&_.tickable!==!0&&(le=!1);let j=n.lazy;j===!0&&c.value[g]!==void 0&&Array.isArray(n[t.childrenKey])===!0&&(j=c.value[g]);const x={key:g,parent:_,isParent:P,lazy:j,disabled:n.disabled,link:n.disabled!==!0&&(K===!0||O===!0&&(P===!0||j===!0)),children:[],matchesFilter:t.filter?$.value(n,t.filter):!0,selected:g===t.selected&&K===!0,selectable:K,expanded:P===!0?m.value.includes(g):!1,expandable:O,noTick:n.noTick===!0||z!==!0&&j&&j!=="loaded",tickable:le,tickStrategy:h,hasTicking:J,strictTicking:z,leafFilteredTicking:B,leafTicking:ie,ticked:z===!0?d.value.includes(g):P===!0?!1:d.value.includes(g)};if(r[g]=x,P===!0&&(x.children=n[t.childrenKey].map(A=>f(A,x)),t.filter&&(x.matchesFilter!==!0?x.matchesFilter=x.children.some(A=>A.matchesFilter):x.noTick!==!0&&x.disabled!==!0&&x.tickable===!0&&B===!0&&x.children.every(A=>A.matchesFilter!==!0||A.noTick===!0||A.tickable!==!0)===!0&&(x.tickable=!1)),x.matchesFilter===!0&&(x.noTick!==!0&&z!==!0&&x.children.every(A=>A.noTick)===!0&&(x.noTick=!0),ie))){if(x.ticked=!1,x.indeterminate=x.children.some(A=>A.indeterminate===!0),x.tickable=x.tickable===!0&&x.children.some(A=>A.tickable),x.indeterminate!==!0){const A=x.children.reduce((oe,xe)=>xe.ticked===!0?oe+1:oe,0);A===x.children.length?x.ticked=!0:A>0&&(x.indeterminate=!0)}x.indeterminate===!0&&(x.indeterminateNextState=x.children.every(A=>A.tickable!==!0||A.ticked!==!0))}return x};return t.nodes.forEach(n=>f(n,null)),r});De(()=>t.ticked,r=>{d.value=r}),De(()=>t.expanded,r=>{m.value=r});function G(r){const f=[].reduce,n=(_,h)=>{if(_||!h)return _;if(Array.isArray(h)===!0)return f.call(Object(h),n,_);if(h[t.nodeKey]===r)return h;if(h[t.childrenKey])return n(null,h[t.childrenKey])};return n(null,t.nodes)}function ye(){return d.value.map(r=>G(r))}function be(){return m.value.map(r=>G(r))}function pe(r){return r&&Q.value[r]?Q.value[r].expanded:!1}function ke(){t.expanded!==void 0?u("update:expanded",[]):m.value=[]}function ce(){const r=m.value,f=n=>{n[t.childrenKey]&&n[t.childrenKey].length>0&&n.expandable!==!1&&n.disabled!==!0&&(r.push(n[t.nodeKey]),n[t.childrenKey].forEach(f))};t.nodes.forEach(f),t.expanded!==void 0?u("update:expanded",r):m.value=r}function ae(r,f,n=G(r),_=Q.value[r]){if(_.lazy&&_.lazy!=="loaded"){if(_.lazy==="loading")return;c.value[r]="loading",Array.isArray(n[t.childrenKey])!==!0&&(n[t.childrenKey]=[]),u("lazyLoad",{node:n,key:r,done:h=>{c.value[r]="loaded",n[t.childrenKey]=Array.isArray(h)===!0?h:[],nt(()=>{const g=Q.value[r];g&&g.isParent===!0&&de(r,!0)})},fail:()=>{delete c.value[r],n[t.childrenKey].length===0&&delete n[t.childrenKey]}})}else _.isParent===!0&&_.expandable===!0&&de(r,f)}function de(r,f){let n=m.value;const _=t.expanded!==void 0;if(_===!0&&(n=n.slice()),f){if(t.accordion&&Q.value[r]){const h=[];Q.value[r].parent?Q.value[r].parent.children.forEach(g=>{g.key!==r&&g.expandable===!0&&h.push(g.key)}):t.nodes.forEach(g=>{const P=g[t.nodeKey];P!==r&&h.push(P)}),h.length>0&&(n=n.filter(g=>h.includes(g)===!1))}n=n.concat([r]).filter((h,g,P)=>P.indexOf(h)===g)}else n=n.filter(h=>h!==r);_===!0?u("update:expanded",n):m.value=n}function Se(r){return r&&Q.value[r]?Q.value[r].ticked:!1}function W(r,f){let n=d.value;const _=t.ticked!==void 0;_===!0&&(n=n.slice()),f?n=n.concat(r).filter((h,g,P)=>P.indexOf(h)===g):n=n.filter(h=>r.includes(h)===!1),_===!0&&u("update:ticked",n)}function ne(r,f,n){const _={tree:l,node:r,key:n,color:t.color,dark:o.value};return Me(_,"expanded",()=>f.expanded,h=>{h!==f.expanded&&ae(n,h)}),Me(_,"ticked",()=>f.ticked,h=>{h!==f.ticked&&W([n],h)}),_}function re(r){return(t.filter?r.filter(f=>Q.value[f[t.nodeKey]].matchesFilter):r).map(f=>T(f))}function i(r){if(r.icon!==void 0)return y(X,{class:"q-tree__icon q-mr-sm",name:r.icon,color:r.iconColor});const f=r.img||r.avatar;if(f)return y("img",{class:`q-tree__${r.img?"img":"avatar"} q-mr-sm`,src:f})}function a(){u("afterShow")}function C(){u("afterHide")}function T(r){const f=r[t.nodeKey],n=Q.value[f],_=r.header&&s[`header-${r.header}`]||s["default-header"],h=n.isParent===!0?re(r[t.childrenKey]):[],g=h.length>0||n.lazy&&n.lazy!=="loaded";let P=r.body&&s[`body-${r.body}`]||s["default-body"];const K=_!==void 0||P!==void 0?ne(r,n,f):null;return P!==void 0&&(P=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:N.value},[P(K)])])),y("div",{key:f,class:`q-tree__node relative-position q-tree__node--${g===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(n.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(n.selected===!0?" q-tree__node--selected":"")+(n.disabled===!0?" q-tree__node--disabled":""),tabindex:n.link===!0?0:-1,onClick:O=>{D(r,n,O)},onKeypress(O){rt(O)!==!0&&(O.keyCode===13?D(r,n,O,!0):O.keyCode===32&&S(r,n,O,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:O=>{v[n.key]=O}}),n.lazy==="loading"?y(it,{class:"q-tree__spinner",color:q.value}):g===!0?y(X,{class:"q-tree__arrow"+(n.expanded===!0?" q-tree__arrow--rotate":""),name:V.value,onClick(O){S(r,n,O)}}):null,n.hasTicking===!0&&n.noTick!==!0?y(lt,{class:"q-tree__tickbox",modelValue:n.indeterminate===!0?null:n.ticked,color:q.value,dark:o.value,dense:!0,keepColor:!0,disable:n.tickable!==!0,onKeydown:He,"onUpdate:modelValue":O=>{E(n,O)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(n.selected===!0?H.value:N.value)},[_?_(K):[i(r),y("div",r[t.labelKey])]])]),g===!0?t.noTransition===!0?y("div",{class:"q-tree__node-collapsible"+N.value,key:`${f}__q`},[P,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},n.expanded?h:null)]):y(pt,{duration:t.duration,onShow:a,onHide:C},()=>ot(y("div",{class:"q-tree__node-collapsible"+N.value,key:`${f}__q`},[P,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},h)]),[[st,n.expanded]])):P])}function M(r){const f=v[r];f&&f.focus()}function D(r,f,n,_){_!==!0&&M(f.key),L.value&&f.selectable?t.noSelectionUnset===!1?u("update:selected",f.key!==t.selected?f.key:null):f.key!==t.selected&&u("update:selected",f.key===void 0?null:f.key):S(r,f,n,_),typeof r.handler=="function"&&r.handler(r)}function S(r,f,n,_){n!==void 0&&He(n),_!==!0&&M(f.key),ae(f.key,!f.expanded,r,f)}function E(r,f){if(r.indeterminate===!0&&(f=r.indeterminateNextState),r.strictTicking)W([r.key],f);else if(r.leafTicking){const n=[],_=h=>{h.isParent?(f!==!0&&h.noTick!==!0&&h.tickable===!0&&n.push(h.key),h.leafTicking===!0&&h.children.forEach(_)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&n.push(h.key)};_(r),W(n,f)}}return t.defaultExpandAll===!0&&ce(),Object.assign(l,{getNodeByKey:G,getTickedNodes:ye,getExpandedNodes:be,isExpanded:pe,collapseAll:ke,expandAll:ce,setExpanded:ae,isTicked:Se,setTicked:W}),()=>{const r=re(t.nodes);return y("div",{class:w.value},r.length===0?t.filter?t.noResultsLabel||e.lang.tree.noResults:t.noNodesLabel||e.lang.tree.noNodes:r)}}}),Dt=Z({name:"QBanner",props:{...ve,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:s}){const{proxy:{$q:u}}=te(),l=_e(t,u),e=k(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(l.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=k(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const c=[y("div",{class:"q-banner__avatar col-auto row items-center self-start"},ee(s.avatar)),y("div",{class:"q-banner__content col text-body2"},ee(s.default))],d=ee(s.action);return d!==void 0&&c.push(y("div",{class:o.value},d)),y("div",{class:e.value+(t.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},c)}}}),Mt=Z({name:"QPopupProxy",props:{...vt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:s,emit:u,attrs:l}){const{proxy:e}=te(),{$q:o}=e,c=Y(!1),d=Y(null),m=k(()=>parseInt(t.breakpoint,10)),{canShow:v}=_t({showing:c});function w(){return o.screen.width<m.value||o.screen.height<m.value?"dialog":"menu"}const L=Y(w()),V=k(()=>L.value==="menu"?{maxHeight:"99vh"}:{});De(()=>w(),H=>{c.value!==!0&&(L.value=H)});function q(H){c.value=!0,u("show",H)}function N(H){c.value=!1,L.value=w(),u("hide",H)}return Object.assign(e,{show(H){v(H)===!0&&d.value.show(H)},hide(H){d.value.hide(H)},toggle(H){d.value.toggle(H)}}),Me(e,"currentComponent",()=>({type:L.value,ref:d.value})),()=>{const H={ref:d,...V.value,...l,onShow:q,onHide:N};let $;return L.value==="dialog"?$=Be:($=We,Object.assign(H,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y($,H,s.default)}}}),qt={class:"self-center full-width no-outline ellipsis",tabindex:"0"},Pt={__name:"GoalTreeSelect",props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],setup(t,{emit:s}){const u=t,l=k({get(){return u.modelValue},set(c){s("update:modelValue",c)}}),e=yt(),o=k(()=>u.modelValue?e.getItem(u.modelValue).name:null);return(c,d)=>(R(),F(kt,{modelValue:I(l),"onUpdate:modelValue":d[1]||(d[1]=m=>Ae(l)?l.value=m:null),clearable:"","clear-icon":"close"},{control:p(()=>[Ve("div",qt,qe(I(o)),1)]),append:p(()=>[b(X,{name:"keyboard_arrow_down"})]),default:p(()=>[b(Mt,{fit:"","auto-close":""},{default:p(()=>[b(Dt,null,{default:p(()=>[b(Ct,{selected:I(l),"onUpdate:selected":d[0]||(d[0]=m=>Ae(l)?l.value=m:null),nodes:I(e).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},It=Z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:s}){const u=ut(Ke,Ee);if(u===Ee)return console.error("QTimelineEntry needs to be child of QTimeline"),Ee;const l=k(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),e=k(()=>`q-timeline__dot text-${t.color||u.color}`),o=k(()=>u.layout==="comfortable"&&u.side==="left");return()=>{const c=ct(s.default,[]);if(t.body!==void 0&&c.unshift(t.body),t.heading===!0){const v=[y("div"),y("div"),y(t.tag,{class:"q-timeline__heading-title"},c)];return y("div",{class:"q-timeline__heading"},o.value===!0?v.reverse():v)}let d;t.icon!==void 0?d=[y(X,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(d=[y("img",{class:"q-timeline__dot-img",src:t.avatar})]);const m=[y("div",{class:"q-timeline__subtitle"},[y("span",{},ee(s.subtitle,[t.subtitle]))]),y("div",{class:e.value},d),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},ee(s.title,[t.title]))].concat(c))];return y("li",{class:l.value},o.value===!0?m.reverse():m)}}}),Ot={xs:2,sm:4,md:6,lg:10,xl:14};function Qe(t,s,u){return{transform:s===!0?`translateX(${u.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}const Lt=Z({name:"QLinearProgress",props:{...ve,...dt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(t,{slots:s}){const{proxy:u}=te(),l=_e(t,u.$q),e=ft(t,Ot),o=k(()=>t.indeterminate===!0||t.query===!0),c=k(()=>t.reverse!==t.query),d=k(()=>({...e.value!==null?e.value:{},"--q-linear-progress-speed":`${t.animationSpeed}ms`})),m=k(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),v=k(()=>Qe(t.buffer!==void 0?t.buffer:1,c.value,u.$q)),w=k(()=>`with${t.instantFeedback===!0?"out":""}-transition`),L=k(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${w.value} q-linear-progress__track--${l.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),V=k(()=>Qe(o.value===!0?1:t.value,c.value,u.$q)),q=k(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${w.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),N=k(()=>({width:`${t.value*100}%`})),H=k(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"} q-linear-progress__stripe--${w.value}`);return()=>{const $=[y("div",{class:L.value,style:v.value}),y("div",{class:q.value,style:V.value})];return t.stripe===!0&&o.value===!1&&$.push(y("div",{class:H.value,style:N.value})),y("div",{class:m.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},ht(s.default,$))}}});var Ie={};(function t(s,u,l,e){var o=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function c(){}function d(i){var a=u.exports.Promise,C=a!==void 0?a:s.Promise;return typeof C=="function"?new C(i):(i(c,c),null)}var m=function(){var i=Math.floor(16.666666666666668),a,C,T={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(D){var S=Math.random();return T[S]=requestAnimationFrame(function E(r){M===r||M+i-1<r?(M=r,delete T[S],D()):T[S]=requestAnimationFrame(E)}),S},C=function(D){T[D]&&cancelAnimationFrame(T[D])}):(a=function(D){return setTimeout(D,i)},C=function(D){return clearTimeout(D)}),{frame:a,cancel:C}}(),v=function(){var i,a,C={};function T(M){function D(S,E){M.postMessage({options:S||{},callback:E})}M.init=function(E){var r=E.transferControlToOffscreen();M.postMessage({canvas:r},[r])},M.fire=function(E,r,f){if(a)return D(E,null),a;var n=Math.random().toString(36).slice(2);return a=d(function(_){function h(g){g.data.callback===n&&(delete C[n],M.removeEventListener("message",h),a=null,f(),_())}M.addEventListener("message",h),D(E,n),C[n]=h.bind(null,{data:{callback:n}})}),a},M.reset=function(){M.postMessage({reset:!0});for(var E in C)C[E](),delete C[E]}}return function(){if(i)return i;if(!l&&o){var M=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([M])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",D),null}T(i)}return i}}(),w={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(i,a){return a?a(i):i}function V(i){return i!=null}function q(i,a,C){return L(i&&V(i[a])?i[a]:w[a],C)}function N(i){return i<0?0:Math.floor(i)}function H(i,a){return Math.floor(Math.random()*(a-i))+i}function $(i){return parseInt(i,16)}function Q(i){return i.map(G)}function G(i){var a=String(i).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:$(a.substring(0,2)),g:$(a.substring(2,4)),b:$(a.substring(4,6))}}function ye(i){var a=q(i,"origin",Object);return a.x=q(a,"x",Number),a.y=q(a,"y",Number),a}function be(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function pe(i){var a=i.getBoundingClientRect();i.width=a.width,i.height=a.height}function ke(i){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=i,a}function ce(i,a,C,T,M,D,S,E,r){i.save(),i.translate(a,C),i.rotate(D),i.scale(T,M),i.arc(0,0,1,S,E,r),i.restore()}function ae(i){var a=i.angle*(Math.PI/180),C=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-a+(.5*C-Math.random()*C),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar}}function de(i,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.wobble+=a.wobbleSpeed,a.velocity*=a.decay,a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble);var C=a.tick++/a.totalTicks,T=a.x+a.random*a.tiltCos,M=a.y+a.random*a.tiltSin,D=a.wobbleX+a.random*a.tiltCos,S=a.wobbleY+a.random*a.tiltSin;if(i.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-C)+")",i.beginPath(),a.shape==="circle")i.ellipse?i.ellipse(a.x,a.y,Math.abs(D-T)*a.ovalScalar,Math.abs(S-M)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):ce(i,a.x,a.y,Math.abs(D-T)*a.ovalScalar,Math.abs(S-M)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var E=Math.PI/2*3,r=4*a.scalar,f=8*a.scalar,n=a.x,_=a.y,h=5,g=Math.PI/h;h--;)n=a.x+Math.cos(E)*f,_=a.y+Math.sin(E)*f,i.lineTo(n,_),E+=g,n=a.x+Math.cos(E)*r,_=a.y+Math.sin(E)*r,i.lineTo(n,_),E+=g;else i.moveTo(Math.floor(a.x),Math.floor(a.y)),i.lineTo(Math.floor(a.wobbleX),Math.floor(M)),i.lineTo(Math.floor(D),Math.floor(S)),i.lineTo(Math.floor(T),Math.floor(a.wobbleY));return i.closePath(),i.fill(),a.tick<a.totalTicks}function Se(i,a,C,T,M){var D=a.slice(),S=i.getContext("2d"),E,r,f=d(function(n){function _(){E=r=null,S.clearRect(0,0,T.width,T.height),M(),n()}function h(){l&&!(T.width===e.width&&T.height===e.height)&&(T.width=i.width=e.width,T.height=i.height=e.height),!T.width&&!T.height&&(C(i),T.width=i.width,T.height=i.height),S.clearRect(0,0,T.width,T.height),D=D.filter(function(g){return de(S,g)}),D.length?E=m.frame(h):_()}E=m.frame(h),r=_});return{addFettis:function(n){return D=D.concat(n),f},canvas:i,promise:f,reset:function(){E&&m.cancel(E),r&&r()}}}function W(i,a){var C=!i,T=!!q(a||{},"resize"),M=q(a,"disableForReducedMotion",Boolean),D=o&&!!q(a||{},"useWorker"),S=D?v():null,E=C?be:pe,r=i&&S?!!i.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,n;function _(g,P,K){for(var O=q(g,"particleCount",N),J=q(g,"angle",Number),z=q(g,"spread",Number),B=q(g,"startVelocity",Number),ie=q(g,"decay",Number),le=q(g,"gravity",Number),j=q(g,"drift",Number),x=q(g,"colors",Q),A=q(g,"ticks",Number),oe=q(g,"shapes"),xe=q(g,"scalar"),Oe=ye(g),Le=O,Te=[],Ze=i.width*Oe.x,Ge=i.height*Oe.y;Le--;)Te.push(ae({x:Ze,y:Ge,angle:J,spread:z,startVelocity:B,color:x[Le%x.length],shape:oe[H(0,oe.length)],ticks:A,decay:ie,gravity:le,drift:j,scalar:xe}));return n?n.addFettis(Te):(n=Se(i,Te,E,P,K),n.promise)}function h(g){var P=M||q(g,"disableForReducedMotion",Boolean),K=q(g,"zIndex",Number);if(P&&f)return d(function(B){B()});C&&n?i=n.canvas:C&&!i&&(i=ke(K),document.body.appendChild(i)),T&&!r&&E(i);var O={width:i.width,height:i.height};S&&!r&&S.init(i),r=!0,S&&(i.__confetti_initialized=!0);function J(){if(S){var B={getBoundingClientRect:function(){if(!C)return i.getBoundingClientRect()}};E(B),S.postMessage({resize:{width:B.width,height:B.height}});return}O.width=O.height=null}function z(){n=null,T&&s.removeEventListener("resize",J),C&&i&&(document.body.removeChild(i),i=null,r=!1)}return T&&s.addEventListener("resize",J,!1),S?S.fire(g,O,z):_(g,O,z)}return h.reset=function(){S&&S.reset(),n&&n.reset()},h}var ne;function re(){return ne||(ne=W(null,{useWorker:!0,resize:!0})),ne}u.exports=function(){return re().apply(this,arguments)},u.exports.reset=function(){re().reset()},u.exports.create=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ie,!1);const $e=Ie.exports;Ie.exports.create;function Ht(){var t=3e3,s=Date.now()+t,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function l(o,c){return Math.random()*(c-o)+o}var e=setInterval(function(){var o=s-Date.now();if(o<=0)return clearInterval(e);var c=100*(o/t);$e(Object.assign({},u,{particleCount:c,origin:{x:l(.1,.3),y:Math.random()-.2}})),$e(Object.assign({},u,{particleCount:c,origin:{x:l(.7,.9),y:Math.random()-.2}}))},250)}const At=y("div",{class:"q-space"}),Rt=Z({name:"QSpace",setup(){return()=>At}}),Ft=()=>!0;function Qt(t){const s={};return t.forEach(u=>{s[u]=Ft}),s}function me(){const{emit:t,proxy:s}=te(),u=Y(null);function l(){u.value.show()}function e(){u.value.hide()}function o(d){t("ok",d),e()}function c(){t("hide")}return Object.assign(s,{show:l,hide:e}),{dialogRef:u,onDialogHide:c,onDialogOK:o,onDialogCancel:e}}const Xe=["ok","hide"];me.emits=Xe;me.emitsObject=Qt(Xe);const $t=Ve("div",{class:"text-h6"},"Progress",-1),Nt={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...me.emits],setup(t){const s=t,u=Y(s.task.performance),l=k(()=>{let w="of "+s.task.target;const L=s.task.performance_history;return L&&L.length&&(w+=" Â· changed "+he.formatDate(L[0].updated,"DD.MM.YYYY HH:mm")),w}),{dialogRef:e,onDialogHide:o,onDialogOK:c,onDialogCancel:d}=me(),m=k(()=>u.value===s.task.performance);function v(){c({performance:u.value})}return(w,L)=>(R(),F(Be,{ref_key:"dialogRef",ref:e,onHide:I(o)},{default:p(()=>[b(mt,{class:"q-dialog-plugin"},{default:p(()=>[b(Re,null,{default:p(()=>[$t]),_:1}),b(Re,null,{default:p(()=>[b(xt,{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=V=>u.value=V),label:"Performance",hint:I(l)},null,8,["modelValue","hint"])]),_:1}),b(gt,{align:"right"},{default:p(()=>[b(fe,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:t.task.id}}},null,8,["to"]),b(Rt),b(fe,{flat:"",label:"Cancel",class:"text-primary",onClick:I(d)},null,8,["onClick"]),b(fe,{disable:I(m),flat:"",label:"Submit",class:"text-primary",onClick:v},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Kt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(t){const s=t,u=Tt(),l=Pe(),e=k(()=>s.task.target>1&&!s.task.done),o=k(()=>e.value?s.task.performance/s.task.target:0),c=k(()=>[s.task.performance,"of",s.task.target].join(" "));function d(){u.dialog({component:Nt,componentProps:{task:s.task}}).onOk(m=>{m.performance>=s.task.target&&Ht();const v={performance:m.performance};l.updateItem(s.task.id+"/",v).then(()=>l.refetch())})}return(m,v)=>(R(),F(Ce,{clickable:"",active:Boolean(t.task.done),"active-class":"text-positive"},{default:p(()=>[t.task.done?(R(),F(U,{key:0,thumbnail:""},{default:p(()=>[b(X,{name:"done",color:"positive"})]),_:1})):t.task.group_id?(R(),F(U,{key:1,thumbnail:""},{default:p(()=>[b(X,{name:"event_repeat"})]),_:1})):(R(),F(U,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:v[0]||(v[0]=w=>m.$emit("ondragstart",w,t.task)),"onTouchmove:native":v[1]||(v[1]=w=>{})},{default:p(()=>[b(X,{name:"drag_indicator"})]),_:1})),b(U,{onClick:d},{default:p(()=>[b(se,null,{default:p(()=>[ue(qe(t.task.name),1)]),_:1}),I(e)?(R(),F(se,{key:0,caption:""},{default:p(()=>[ue(qe(I(c)),1)]),_:1})):ge("",!0),I(e)?(R(),F(se,{key:1},{default:p(()=>[b(Lt,{value:I(o),color:"positive"},null,8,["value"])]),_:1})):ge("",!0)]),_:1})]),_:1},8,["active"]))}};var Ne;(function(t){var s=function(){function l(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(l.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),l.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},l.prototype.getData=function(e){return this._data[e]||""},l.prototype.setData=function(e,o){this._data[e]=o},l.prototype.setDragImage=function(e,o,c){var d=u._instance;d._imgCustom=e,d._imgOffset={x:o,y:c}},l}();t.DataTransfer=s;var u=function(){function l(){if(this._lastClick=0,l._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var o=document,c=this._touchstart.bind(this),d=this._touchmove.bind(this),m=this._touchend.bind(this),v=e?{passive:!1,capture:!1}:!1;o.addEventListener("touchstart",c,v),o.addEventListener("touchmove",d,v),o.addEventListener("touchend",m),o.addEventListener("touchcancel",m)}}return l.getInstance=function(){return l._instance},l.prototype._touchstart=function(e){var o=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<l._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(e.target);c&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=c,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){o._dragSource==c&&o._img==null&&o._dispatchEvent(e,"contextmenu",c)&&o._reset()},l._CTXMENU),l._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){o._isDragEnabled=!0,o._touchmove(e)},l._PRESSHOLDAWAIT)))}},l.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var o=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",o)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",o)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),o!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",o),this._lastTarget=o),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",o))}},l.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},l.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},l.prototype._shouldHandleMove=function(e){return!l._ISPRESSHOLDMODE&&this._shouldHandle(e)},l.prototype._shouldHandlePressHoldMove=function(e){return l._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},l.prototype._shouldCancelPressHoldMove=function(e){return l._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>l._PRESSHOLDMARGIN},l.prototype._shouldStartDragging=function(e){var o=this._getDelta(e);return o>l._THRESHOLD||l._ISPRESSHOLDMODE&&o>=l._PRESSHOLDTHRESHOLD},l.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},l.prototype._getPoint=function(e,o){return e&&e.touches&&(e=e.touches[0]),{x:o?e.pageX:e.clientX,y:o?e.pageY:e.clientY}},l.prototype._getDelta=function(e){if(l._ISPRESSHOLDMODE&&!this._ptDown)return 0;var o=this._getPoint(e);return Math.abs(o.x-this._ptDown.x)+Math.abs(o.y-this._ptDown.y)},l.prototype._getTarget=function(e){for(var o=this._getPoint(e),c=document.elementFromPoint(o.x,o.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},l.prototype._createImage=function(e){this._img&&this._destroyImage();var o=this._imgCustom||this._dragSource;if(this._img=o.cloneNode(!0),this._copyStyle(o,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=o.getBoundingClientRect(),d=this._getPoint(e);this._imgOffset={x:d.x-c.left,y:d.y-c.top},this._img.style.opacity=l._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},l.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},l.prototype._moveImage=function(e){var o=this;requestAnimationFrame(function(){if(o._img){var c=o._getPoint(e,!0),d=o._img.style;d.position="absolute",d.pointerEvents="none",d.zIndex="999999",d.left=Math.round(c.x-o._imgOffset.x)+"px",d.top=Math.round(c.y-o._imgOffset.y)+"px"}})},l.prototype._copyProps=function(e,o,c){for(var d=0;d<c.length;d++){var m=c[d];e[m]=o[m]}},l.prototype._copyStyle=function(e,o){if(l._rmvAtts.forEach(function(L){o.removeAttribute(L)}),e instanceof HTMLCanvasElement){var c=e,d=o;d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)}for(var m=getComputedStyle(e),v=0;v<m.length;v++){var w=m[v];w.indexOf("transition")<0&&(o.style[w]=m[w])}o.style.pointerEvents="none";for(var v=0;v<e.children.length;v++)this._copyStyle(e.children[v],o.children[v])},l.prototype._dispatchEvent=function(e,o,c){if(e&&c){var d=document.createEvent("Event"),m=e.touches?e.touches[0]:e;return d.initEvent(o,!0,!0),d.button=0,d.which=d.buttons=1,this._copyProps(d,e,l._kbdProps),this._copyProps(d,m,l._ptProps),d.dataTransfer=this._dataTransfer,c.dispatchEvent(d),d.defaultPrevented}return!1},l.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},l}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=u})(Ne||(Ne={}));const Bt={__name:"WeekTimelineEntry",props:{tasks:{type:Array,required:!0},monday:{type:String,required:!0}},setup(t){const s=t,u=Pe(),l=k(()=>s.tasks.length?[...s.tasks].sort((m,v)=>v.target-m.target):null),e=he.formatDate(s.monday,"w-Q-YYYY-MMM D").split("-"),o=["Week "+e[0],"Q"+e[1],e[2],e[3]].join(" Â· ");function c(m,v){const w={id:v.id,day:he.getDayOfWeek(v.planned),week:e[0]};m.dataTransfer.setData("text",JSON.stringify(w)),m.dataTransfer.dropEffect="move"}function d(m){const v=JSON.parse(m.dataTransfer.getData("text"));if(v.week===e[0])return;const w={planned:he.addToDate(s.monday,{days:v.day-1}).toISOString()};u.updateItem(v.id+"/",w).then(()=>u.refetch())}return(m,v)=>(R(),F(It,{color:t.monday===I(u).currentWeek?"orange":"",subtitle:I(o),onDragover:v[0]||(v[0]=we(()=>{},["prevent"])),onDragenter:v[1]||(v[1]=we(()=>{},["prevent"])),onDrop:v[2]||(v[2]=we(w=>d(w),["prevent"]))},{default:p(()=>[I(l)?(R(),F(Ye,{key:0},{default:p(()=>[(R(!0),ze(je,null,Ue(I(l),w=>(R(),F(St,{key:w.id,style:{"min-height":"51.19px"}},{default:p(()=>[b(Kt,{task:w,onOndragstart:c},null,8,["task"])]),_:2},1024))),128))]),_:1})):ge("",!0)]),_:1},8,["color","subtitle"]))}},aa={__name:"HomeView",setup(t){const s=Pe();return(u,l)=>(R(),F(bt,{padding:""},{default:p(()=>[b(et,null,{default:p(()=>[b(Je,null,{default:p(()=>[ue("Plan")]),_:1}),b(Pt,{modelValue:I(s).filter.goal,"onUpdate:modelValue":l[0]||(l[0]=e=>I(s).filter.goal=e),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),b(fe,{flat:"",round:"",icon:"filter_list"},{default:p(()=>[b(We,null,{default:p(()=>[b(Ye,null,{default:p(()=>[b(Ce,null,{default:p(()=>[b(U,null,{default:p(()=>[b(se,null,{default:p(()=>[ue("Hide passed done")]),_:1})]),_:1}),b(U,{side:""},{default:p(()=>[b(Fe,{modelValue:I(s).filter.done,"onUpdate:modelValue":l[1]||(l[1]=e=>I(s).filter.done=e)},null,8,["modelValue"])]),_:1})]),_:1}),b(Ce,null,{default:p(()=>[b(U,null,{default:p(()=>[b(se,null,{default:p(()=>[ue("Hide passed recurring")]),_:1})]),_:1}),b(U,{side:""},{default:p(()=>[b(Fe,{modelValue:I(s).filter.recurring,"onUpdate:modelValue":l[2]||(l[2]=e=>I(s).filter.recurring=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I(s).calendar?(R(),F(Et,{key:0,layout:"dense",class:"q-px-md"},{default:p(()=>[(R(!0),ze(je,null,Ue(I(s).calendar,(e,o)=>(R(),F(Bt,{key:o,tasks:e,monday:o},null,8,["tasks","monday"]))),128))]),_:1})):ge("",!0)]),_:1}))}};export{aa as default};
