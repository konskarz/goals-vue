import{Q as Qe,b as $e}from"./use-dark-49206753.js";import{Q as D,X as A,R as O,a2 as B,a0 as U,Y as z,r as ve,U as k,S as x,W as V,a3 as ue,a1 as P,$,m as ze,a5 as Ye,c as Ze,i as ce,j,h as G,T as Xe,F as Ke,G as Ge,Z as Je,V as Q,_ as et,a4 as tt,a6 as J,E as rt,a7 as at}from"./index-325c1935.js";import{Q as nt}from"./QSlideTransition-1c57a7c3.js";import{u as Y,a as it,d as ot}from"./TaskStore-f75c6b0c.js";import{b as W,a as ee,Q as st}from"./QItemLabel-3044a0c7.js";import{Q as lt,a as ut}from"./QTree-e4907360.js";import{_ as te}from"./ProgressLabel-bb8bd6e0.js";import{_ as ct}from"./HeatmapLabel-c529cf88.js";import"./format-8c778330.js";import"./private.use-form-89e81e97.js";const dt={__name:"ReportPane",props:{item:{type:Object,required:!0},showSeries:{type:Boolean,default:!1}},setup(o){return(a,u)=>(D(),A("div",null,[o.item.target>0?(D(),O(te,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,color:"positive","label-icon":"event",caption:""},null,8,["value","label"])):B("",!0),o.item.rperformance!==null?(D(),O(te,{key:1,value:o.item.rperformance/o.item.rtarget,label:(o.item.rperformance/o.item.rtarget*100).toFixed(2)+"% for "+o.item.rtarget,color:"primary","label-icon":"event_repeat",caption:""},null,8,["value","label"])):B("",!0),o.showSeries&&o.item.series?(D(!0),A(U,{key:2},z(o.item.series,(n,t)=>(D(),O(ct,{key:t,series:[{name:t,data:n}],height:26,label:t,caption:"",class:"q-pt-sm"},null,8,["series","label"]))),128)):B("",!0)]))}},ht={class:"q-pt-sm q-pb-md q-px-lg q-gutter-sm"},ft={class:"q-pl-xs q-pr-lg"},mt={__name:"SupportPane",setup(o){const a=Y(),u=it(),n=[{label:"Past done",icon:"event_available",target:"pastDone"},{label:"Past recurring",icon:"free_cancellation",target:"pastRecurring"},{label:"Future recurring",icon:"date_range",target:"futureRecurring"},{label:"Empty weeks",icon:"calendar_today",target:"emptyWeeks"}],t=ve(null);function i(l,s){l.push({name:"goal",params:{id:s}})}return(l,s)=>(D(),A("div",null,[k(W,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:x(()=>[V("Show")]),_:1}),ue("div",ht,[(D(),A(U,null,z(n,(f,y)=>k(lt,{key:y,modelValue:P(a).filter[f.target],"onUpdate:modelValue":w=>P(a).filter[f.target]=w,label:f.label,dense:"",class:"q-mb-xs q-mr-xs"},null,8,["modelValue","onUpdate:modelValue","label"])),64))]),P(u).tree?(D(),A(U,{key:0},[k(W,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:x(()=>[V("Filter by goal")]),_:1}),k(ut,{selected:t.value,"onUpdate:selected":[s[0]||(s[0]=f=>t.value=f),s[3]||(s[3]=f=>i(l.$router,f))],ticked:P(u).treeTicked,"onUpdate:ticked":s[1]||(s[1]=f=>P(u).treeTicked=f),expanded:P(u).treeExpanded,"onUpdate:expanded":s[2]||(s[2]=f=>P(u).treeExpanded=f),"tick-strategy":"strict",nodes:P(u).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","selected-color":"primary",class:"q-pb-lg"},{"default-header":x(f=>[ue("div",ft,$(f.node.name),1)]),_:1},8,["selected","ticked","expanded","nodes"])],64)):B("",!0),P(a).report?(D(),O(dt,{key:1,item:P(a).report,"show-series":!1,class:"q-pb-lg q-px-lg"},null,8,["item"])):B("",!0)]))}},de={threshold:0,root:null,rootMargin:"0px"};function he(o,a,u){let n,t,i;typeof u=="function"?(n=u,t=de,i=a.cfg===void 0):(n=u.handler,t=Object.assign({},de,u.cfg),i=a.cfg===void 0||Ye(a.cfg,t)===!1),a.handler!==n&&(a.handler=n),i===!0&&(a.cfg=t,a.observer!==void 0&&a.observer.unobserve(o),a.observer=new IntersectionObserver(([l])=>{if(typeof a.handler=="function"){if(l.rootBounds===null&&document.body.contains(o)===!0){a.observer.unobserve(o),a.observer.observe(o);return}(a.handler(l,a.observer)===!1||a.once===!0&&l.isIntersecting===!0)&&pe(o)}},t),a.observer.observe(o))}function pe(o){const a=o.__qvisible;a!==void 0&&(a.observer!==void 0&&a.observer.unobserve(o),delete o.__qvisible)}const gt=ze({name:"intersection",mounted(o,{modifiers:a,value:u}){const n={once:a.once===!0};he(o,n,u),o.__qvisible=n},updated(o,a){const u=o.__qvisible;u!==void 0&&he(o,u,a.value)},beforeUnmount:pe}),vt=Ze({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(o,{slots:a,emit:u}){const n=ve(ce.value===!0?o.ssrPrerender:!1),t=j(()=>o.root!==void 0||o.margin!==void 0||o.threshold!==void 0?{handler:f,cfg:{root:o.root,rootMargin:o.margin,threshold:o.threshold}}:f),i=j(()=>o.disable!==!0&&(ce.value!==!0||o.once!==!0||o.ssrPrerender!==!0)),l=j(()=>[[gt,t.value,void 0,{once:o.once}]]),s=j(()=>`--q-transition-duration: ${o.transitionDuration}ms`);function f(w){n.value!==w.isIntersecting&&(n.value=w.isIntersecting,o.onVisibility!==void 0&&u("visibility",n.value))}function y(){if(n.value===!0)return[G("div",{key:"content",style:s.value},Ge(a.default))];if(a.hidden!==void 0)return[G("div",{key:"hidden",style:s.value},a.hidden())]}return()=>{const w=o.transition?[G(Xe,{name:"q-transition--"+o.transition},y)]:y();return Ke(o.tag,{class:"q-intersection"},w,"main",i.value,()=>l.value)}}});var re={};(function o(a,u,n,t){var i=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",s=function(){if(!a.OffscreenCanvas)return!1;var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var c=r.transferToImageBitmap();try{e.createPattern(c,"no-repeat")}catch{return!1}return!0}();function f(){}function y(r){var e=u.exports.Promise,c=e!==void 0?e:a.Promise;return typeof c=="function"?new c(r):(r(f,f),null)}var w=function(r,e){return{transform:function(c){if(r)return c;if(e.has(c))return e.get(c);var h=new OffscreenCanvas(c.width,c.height),m=h.getContext("2d");return m.drawImage(c,0,0),e.set(c,h),h},clear:function(){e.clear()}}}(s,new Map),q=function(){var r=Math.floor(16.666666666666668),e,c,h={},m=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(g){var v=Math.random();return h[v]=requestAnimationFrame(function d(p){m===p||m+r-1<p?(m=p,delete h[v],g()):h[v]=requestAnimationFrame(d)}),v},c=function(g){h[g]&&cancelAnimationFrame(h[g])}):(e=function(g){return setTimeout(g,r)},c=function(g){return clearTimeout(g)}),{frame:e,cancel:c}}(),ye=function(){var r,e,c={};function h(m){function g(v,d){m.postMessage({options:v||{},callback:d})}m.init=function(d){var p=d.transferControlToOffscreen();m.postMessage({canvas:p},[p])},m.fire=function(d,p,b){if(e)return g(d,null),e;var E=Math.random().toString(36).slice(2);return e=y(function(M){function S(I){I.data.callback===E&&(delete c[E],m.removeEventListener("message",S),e=null,w.clear(),b(),M())}m.addEventListener("message",S),g(d,E),c[E]=S.bind(null,{data:{callback:E}})}),e},m.reset=function(){m.postMessage({reset:!0});for(var d in c)c[d](),delete c[d]}}return function(){if(r)return r;if(!n&&i){var m=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([m])))}catch(g){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",g),null}h(r)}return r}}(),_e={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function be(r,e){return e?e(r):r}function Me(r){return r!=null}function T(r,e,c){return be(r&&Me(r[e])?r[e]:_e[e],c)}function we(r){return r<0?0:Math.floor(r)}function Ee(r,e){return Math.floor(Math.random()*(e-r))+r}function Z(r){return parseInt(r,16)}function Se(r){return r.map(De)}function De(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:Z(e.substring(0,2)),g:Z(e.substring(2,4)),b:Z(e.substring(4,6))}}function Te(r){var e=T(r,"origin",Object);return e.x=T(e,"x",Number),e.y=T(e,"y",Number),e}function Ie(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function ke(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function Pe(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function Ce(r,e,c,h,m,g,v,d,p){r.save(),r.translate(e,c),r.rotate(g),r.scale(h,m),r.arc(0,0,1,v,d,p),r.restore()}function xe(r){var e=r.angle*(Math.PI/180),c=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*c-Math.random()*c),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function Oe(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var c=e.tick++/e.totalTicks,h=e.x+e.random*e.tiltCos,m=e.y+e.random*e.tiltSin,g=e.wobbleX+e.random*e.tiltCos,v=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-c)+")",r.beginPath(),l&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(He(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(g-h)*.1,Math.abs(v-m)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var d=Math.PI/10*e.wobble,p=Math.abs(g-h)*.1,b=Math.abs(v-m)*.1,E=e.shape.bitmap.width*e.scalar,M=e.shape.bitmap.height*e.scalar,S=new DOMMatrix([Math.cos(d)*p,Math.sin(d)*p,-Math.sin(d)*b,Math.cos(d)*b,e.x,e.y]);S.multiplySelf(new DOMMatrix(e.shape.matrix));var I=r.createPattern(w.transform(e.shape.bitmap),"no-repeat");I.setTransform(S),r.globalAlpha=1-c,r.fillStyle=I,r.fillRect(e.x-E/2,e.y-M/2,E,M),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(g-h)*e.ovalScalar,Math.abs(v-m)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Ce(r,e.x,e.y,Math.abs(g-h)*e.ovalScalar,Math.abs(v-m)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var _=Math.PI/2*3,C=4*e.scalar,R=8*e.scalar,H=e.x,F=e.y,N=5,L=Math.PI/N;N--;)H=e.x+Math.cos(_)*R,F=e.y+Math.sin(_)*R,r.lineTo(H,F),_+=L,H=e.x+Math.cos(_)*C,F=e.y+Math.sin(_)*C,r.lineTo(H,F),_+=L;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(m)),r.lineTo(Math.floor(g),Math.floor(v)),r.lineTo(Math.floor(h),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function Re(r,e,c,h,m){var g=e.slice(),v=r.getContext("2d"),d,p,b=y(function(E){function M(){d=p=null,v.clearRect(0,0,h.width,h.height),w.clear(),m(),E()}function S(){n&&!(h.width===t.width&&h.height===t.height)&&(h.width=r.width=t.width,h.height=r.height=t.height),!h.width&&!h.height&&(c(r),h.width=r.width,h.height=r.height),v.clearRect(0,0,h.width,h.height),g=g.filter(function(I){return Oe(v,I)}),g.length?d=q.frame(S):M()}d=q.frame(S),p=M});return{addFettis:function(E){return g=g.concat(E),b},canvas:r,promise:b,reset:function(){d&&q.cancel(d),p&&p()}}}function ae(r,e){var c=!r,h=!!T(e||{},"resize"),m=!1,g=T(e,"disableForReducedMotion",Boolean),v=i&&!!T(e||{},"useWorker"),d=v?ye():null,p=c?Ie:ke,b=r&&d?!!r.__confetti_initialized:!1,E=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,M;function S(_,C,R){for(var H=T(_,"particleCount",we),F=T(_,"angle",Number),N=T(_,"spread",Number),L=T(_,"startVelocity",Number),Fe=T(_,"decay",Number),Ae=T(_,"gravity",Number),Be=T(_,"drift",Number),ie=T(_,"colors",Se),Ne=T(_,"ticks",Number),oe=T(_,"shapes"),je=T(_,"scalar"),Ue=!!T(_,"flat"),se=Te(_),le=H,K=[],Ve=r.width*se.x,We=r.height*se.y;le--;)K.push(xe({x:Ve,y:We,angle:F,spread:N,startVelocity:L,color:ie[le%ie.length],shape:oe[Ee(0,oe.length)],ticks:Ne,decay:Fe,gravity:Ae,drift:Be,scalar:je,flat:Ue}));return M?M.addFettis(K):(M=Re(r,K,p,C,R),M.promise)}function I(_){var C=g||T(_,"disableForReducedMotion",Boolean),R=T(_,"zIndex",Number);if(C&&E)return y(function(L){L()});c&&M?r=M.canvas:c&&!r&&(r=Pe(R),document.body.appendChild(r)),h&&!b&&p(r);var H={width:r.width,height:r.height};d&&!b&&d.init(r),b=!0,d&&(r.__confetti_initialized=!0);function F(){if(d){var L={getBoundingClientRect:function(){if(!c)return r.getBoundingClientRect()}};p(L),d.postMessage({resize:{width:L.width,height:L.height}});return}H.width=H.height=null}function N(){M=null,h&&(m=!1,a.removeEventListener("resize",F)),c&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,b=!1)}return h&&!m&&(m=!0,a.addEventListener("resize",F,!1)),d?d.fire(_,H,N):S(_,H,N)}return I.reset=function(){d&&d.reset(),M&&M.reset()},I}var X;function ne(){return X||(X=ae(null,{useWorker:!0,resize:!0})),X}function He(r,e,c,h,m,g,v){var d=new Path2D(r),p=new Path2D;p.addPath(d,new DOMMatrix(e));var b=new Path2D;return b.addPath(p,new DOMMatrix([Math.cos(v)*m,Math.sin(v)*m,-Math.sin(v)*g,Math.cos(v)*g,c,h])),b}function Le(r){if(!l)throw new Error("path confetti are not supported in this browser");var e,c;typeof r=="string"?e=r:(e=r.path,c=r.matrix);var h=new Path2D(e),m=document.createElement("canvas"),g=m.getContext("2d");if(!c){for(var v=1e3,d=v,p=v,b=0,E=0,M,S,I=0;I<v;I+=2)for(var _=0;_<v;_+=2)g.isPointInPath(h,I,_,"nonzero")&&(d=Math.min(d,I),p=Math.min(p,_),b=Math.max(b,I),E=Math.max(E,_));M=b-d,S=E-p;var C=10,R=Math.min(C/M,C/S);c=[R,0,0,R,-Math.round(M/2+d)*R,-Math.round(S/2+p)*R]}return{type:"path",path:e,matrix:c}}function qe(r){var e,c=1,h="#000000",m='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,c="scalar"in r?r.scalar:c,m="fontFamily"in r?r.fontFamily:m,h="color"in r?r.color:h);var g=10*c,v=""+g+"px "+m,d=new OffscreenCanvas(g,g),p=d.getContext("2d");p.font=v;var b=p.measureText(e),E=Math.ceil(b.actualBoundingBoxRight+b.actualBoundingBoxLeft),M=Math.ceil(b.actualBoundingBoxAscent+b.actualBoundingBoxDescent),S=2,I=b.actualBoundingBoxLeft+S,_=b.actualBoundingBoxAscent+S;E+=S+S,M+=S+S,d=new OffscreenCanvas(E,M),p=d.getContext("2d"),p.font=v,p.fillStyle=h,p.fillText(e,I,_);var C=1/c;return{type:"bitmap",bitmap:d.transferToImageBitmap(),matrix:[C,0,0,C,-E*C/2,-M*C/2]}}u.exports=function(){return ne().apply(this,arguments)},u.exports.reset=function(){ne().reset()},u.exports.create=ae,u.exports.shapeFromPath=Le,u.exports.shapeFromText=qe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),re,!1);const fe=re.exports;re.exports.create;function me(){var o=3e3,a=Date.now()+o,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function n(i,l){return Math.random()*(l-i)+i}var t=setInterval(function(){var i=a-Date.now();if(i<=0)return clearInterval(t);var l=100*(i/o);fe(Object.assign({},u,{particleCount:l,origin:{x:n(.1,.3),y:Math.random()-.2}})),fe(Object.assign({},u,{particleCount:l,origin:{x:n(.7,.9),y:Math.random()-.2}}))},250)}const pt={__name:"TaskListItem",props:{item:{type:Object,required:!0}},emits:["ondragstart"],setup(o){const a=o,u=Y(),n=j(()=>a.item.target>1&&!a.item.done),t=j(()=>!a.item.performanceHistory||!a.item.performanceHistory.length?null:ot.formatDate(a.item.performanceHistory[0].updated,"DD.MM.YYYY HH:mm"));function i(y,w){y.push({name:"task",params:{id:w}})}function l(){const y={done:null};a.item.performance>=a.item.target&&(y.performance=a.item.target-1),u.updateItem(a.item.id,y).then(()=>u.refetch())}function s(){const y={performance:a.item.performance+1};y.performance>=a.item.target&&me(),u.updateItem(a.item.id,y).then(()=>u.refetch())}function f(){const y={done:new Date().toISOString()};me(),u.updateItem(a.item.id,y).then(()=>u.refetch())}return(y,w)=>(D(),O(st,{clickable:"",active:!!o.item.done,"active-class":"text-positive"},{default:x(()=>[k(ee,{side:""},{default:x(()=>[k(Je,{name:o.item.groupId?"event_repeat":"event",style:{cursor:"grab"},draggable:"true",onDragstart:w[0]||(w[0]=q=>y.$emit("ondragstart",q,o.item)),"onTouchmove:native":w[1]||(w[1]=q=>{})},null,8,["name"])]),_:1}),k(ee,{class:"q-pl-sm",onClick:w[2]||(w[2]=q=>i(y.$router,o.item.id))},{default:x(()=>[k(W,null,{default:x(()=>[V($(o.item.name),1)]),_:1}),n.value?(D(),O(te,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,hint:t.value,color:"positive","label-icon":"track_changes","hint-icon":"update",caption:"",class:"q-mb-xs"},null,8,["value","label","hint"])):B("",!0)]),_:1}),k(ee,{side:""},{default:x(()=>[o.item.done?(D(),O(Q,{key:0,flat:"",round:"",dense:"",icon:"check_box",color:"positive",onClick:l})):n.value?(D(),O(Q,{key:1,flat:"",round:"",dense:"",icon:"plus_one",onClick:s})):(D(),O(Q,{key:2,flat:"",round:"",dense:"",icon:"check_box_outline_blank",onClick:f}))]),_:1})]),_:1},8,["active"]))}};var ge;(function(o){var a=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(t){t!=null?delete this._data[t]:this._data=null},n.prototype.getData=function(t){return this._data[t]||""},n.prototype.setData=function(t,i){this._data[t]=i},n.prototype.setDragImage=function(t,i,l){var s=u._instance;s._imgCustom=t,s._imgOffset={x:i,y:l}},n}();o.DataTransfer=a;var u=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",function(){},{get passive(){return t=!0,!0}}),"ontouchstart"in document){var i=document,l=this._touchstart.bind(this),s=this._touchmove.bind(this),f=this._touchend.bind(this),y=t?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",l,y),i.addEventListener("touchmove",s,y),i.addEventListener("touchend",f),i.addEventListener("touchcancel",f)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(t){var i=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(t.target);l&&!this._dispatchEvent(t,"mousemove",t.target)&&!this._dispatchEvent(t,"mousedown",t.target)&&(this._dragSource=l,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){i._dragSource==l&&i._img==null&&i._dispatchEvent(t,"contextmenu",l)&&i._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(t)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t)){this._reset();return}if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var i=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",i)){this._lastTouch=t,t.cancelable&&t.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",i)),this._img&&(this._lastTouch=t,t.cancelable&&t.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",i),this._lastTarget=i),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",i))}},n.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target)){t.cancelable&&t.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},n.prototype._shouldHandleMove=function(t){return!n._ISPRESSHOLDMODE&&this._shouldHandle(t)},n.prototype._shouldHandlePressHoldMove=function(t){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},n.prototype._shouldCancelPressHoldMove=function(t){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(t){var i=this._getDelta(t);return i>n._THRESHOLD||n._ISPRESSHOLDMODE&&i>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new a,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(t,i){return t&&t.touches&&(t=t.touches[0]),{x:i?t.pageX:t.clientX,y:i?t.pageY:t.clientY}},n.prototype._getDelta=function(t){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(t);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},n.prototype._getTarget=function(t){for(var i=this._getPoint(t),l=document.elementFromPoint(i.x,i.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},n.prototype._createImage=function(t){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=i.getBoundingClientRect(),s=this._getPoint(t);this._imgOffset={x:s.x-l.left,y:s.y-l.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(t){var i=this;requestAnimationFrame(function(){if(i._img){var l=i._getPoint(t,!0),s=i._img.style;s.position="absolute",s.pointerEvents="none",s.zIndex="999999",s.left=Math.round(l.x-i._imgOffset.x)+"px",s.top=Math.round(l.y-i._imgOffset.y)+"px"}})},n.prototype._copyProps=function(t,i,l){for(var s=0;s<l.length;s++){var f=l[s];t[f]=i[f]}},n.prototype._copyStyle=function(t,i){if(n._rmvAtts.forEach(function(q){i.removeAttribute(q)}),t instanceof HTMLCanvasElement){var l=t,s=i;s.width=l.width,s.height=l.height,s.getContext("2d").drawImage(l,0,0)}for(var f=getComputedStyle(t),y=0;y<f.length;y++){var w=f[y];w.indexOf("transition")<0&&(i.style[w]=f[w])}i.style.pointerEvents="none";for(var y=0;y<t.children.length;y++)this._copyStyle(t.children[y],i.children[y])},n.prototype._dispatchEvent=function(t,i,l){if(t&&l){var s=document.createEvent("Event"),f=t.touches?t.touches[0]:t;return s.initEvent(i,!0,!0),s.button=0,s.which=s.buttons=1,this._copyProps(s,t,n._kbdProps),this._copyProps(s,f,n._ptProps),s.dataTransfer=this._dataTransfer,l.dispatchEvent(s),s.defaultPrevented}return!1},n.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},n}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),o.DragDropTouch=u})(ge||(ge={}));const yt={__name:"WeekPane",props:{week:{type:Object,required:!0},monday:{type:String,required:!0}},setup(o){const a=o,u=Y(),n=j(()=>a.week.tasks.length?[...a.week.tasks].sort((l,s)=>s.target-l.target):null);function t(l,s){const f={id:s.id,planned:s.planned,monday:a.monday};l.dataTransfer.setData("text",JSON.stringify(f)),l.dataTransfer.dropEffect="move"}function i(l){const s=JSON.parse(l.dataTransfer.getData("text"));s.monday!==a.monday&&u.moveItem(s,a.monday)}return(l,s)=>(D(),A("div",{onDragover:s[0]||(s[0]=J(()=>{},["prevent"])),onDragenter:s[1]||(s[1]=J(()=>{},["prevent"])),onDrop:s[2]||(s[2]=J(f=>i(f),["prevent"]))},[o.week.start?(D(),O(W,{key:0,overline:"",class:"q-px-lg q-py-sm text-uppercase"},{default:x(()=>[V($(o.week.month),1)]),_:1})):B("",!0),k(W,{header:"",class:tt(["q-px-lg q-py-sm",o.week.current?"bg-blue-1":""])},{default:x(()=>[V($(o.week.title),1)]),_:1},8,["class"]),(D(!0),A(U,null,z(n.value,f=>(D(),O(vt,{key:f.id,class:"min-h",once:""},{default:x(()=>[k(pt,{item:f,class:"q-pl-lg",onOndragstart:t},null,8,["item"])]),_:2},1024))),128))],32))}},_t=et(yt,[["__scopeId","data-v-9f16368c"]]),Ct={__name:"HomeView",setup(o){const a=Y();return(u,n)=>(D(),A(U,null,[k(Qe,{class:"q-pl-lg"},{default:x(()=>[k($e,null,{default:x(()=>[V("Tasks")]),_:1}),k(Q,{flat:"",round:"",icon:"filter_list",onClick:n[0]||(n[0]=t=>P(a).filter.show=!P(a).filter.show)})]),_:1}),k(nt,null,{default:x(()=>[rt(k(mt,null,null,512),[[at,P(a).filter.show]])]),_:1}),P(a).calendar?(D(!0),A(U,{key:0},z(P(a).calendar,(t,i)=>(D(),O(_t,{key:i,week:t,monday:i,class:"q-pb-lg"},null,8,["week","monday"]))),128)):B("",!0)],64))}};export{Ct as default};
