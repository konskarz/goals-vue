import{Q as Fe,b as Ae}from"./use-dark-b8bc7aea.js";import{Q as E,X as O,R as I,a2 as x,a0 as F,Y,r as ge,U as w,S as k,W as A,a3 as le,a1 as M,$ as Q,m as Ne,a5 as Be,c as Ve,i as ue,j as H,h as K,T as We,F as Qe,G as Ye,Z as Ue,V as W,_ as je,a4 as Xe,a6 as G,E as $e,a7 as ze}from"./index-77aa797c.js";import{Q as Ze}from"./QSlideTransition-e4d21466.js";import{u as U,a as Ke,d as Ge}from"./TaskStore-3e73f515.js";import{b as N,a as J,Q as Je}from"./QItemLabel-8a3f6f98.js";import{Q as et,a as tt}from"./QTree-653121eb.js";import{_ as ee}from"./ProgressLabel-6132d85a.js";import{_ as rt}from"./HeatmapLabel-a3a49868.js";import"./format-8c778330.js";import"./use-form-618a309d.js";const nt={__name:"ReportPane",props:{item:{type:Object,required:!0},showSeries:{type:Boolean,default:!1}},setup(o){return(a,u)=>(E(),O("div",null,[o.item.target>0?(E(),I(ee,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,color:"positive","label-icon":"event",caption:""},null,8,["value","label"])):x("",!0),o.item.rperformance!==null?(E(),I(ee,{key:1,value:o.item.rperformance/o.item.rtarget,label:(o.item.rperformance/o.item.rtarget*100).toFixed(2)+"% for "+o.item.rtarget,color:"primary","label-icon":"event_repeat",caption:""},null,8,["value","label"])):x("",!0),o.showSeries&&o.item.series?(E(!0),O(F,{key:2},Y(o.item.series,(n,e)=>(E(),I(rt,{key:e,series:[{name:e,data:n}],height:26,label:e,caption:"",class:"q-pt-sm"},null,8,["series","label"]))),128)):x("",!0)]))}},at={class:"q-pt-sm q-pb-md q-px-lg q-gutter-sm"},it={class:"q-pl-xs q-pr-lg"},ot={__name:"SupportPane",setup(o){const a=U(),u=Ke(),n=[{label:"Past done",icon:"event_available",target:"pastDone"},{label:"Past recurring",icon:"free_cancellation",target:"pastRecurring"},{label:"Future recurring",icon:"date_range",target:"futureRecurring"},{label:"Empty weeks",icon:"calendar_today",target:"emptyWeeks"}],e=ge(null);function i(l,s){l.push({name:"goal",params:{id:s}})}return(l,s)=>(E(),O("div",null,[w(N,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:k(()=>[A("Show")]),_:1}),le("div",at,[(E(),O(F,null,Y(n,(c,d)=>w(et,{key:d,modelValue:M(a).filter[c.target],"onUpdate:modelValue":D=>M(a).filter[c.target]=D,label:c.label,dense:"",class:"q-mb-xs q-mr-xs"},null,8,["modelValue","onUpdate:modelValue","label"])),64))]),M(u).tree?(E(),O(F,{key:0},[w(N,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:k(()=>[A("Filter by goal")]),_:1}),w(tt,{selected:e.value,"onUpdate:selected":[s[0]||(s[0]=c=>e.value=c),s[3]||(s[3]=c=>i(l.$router,c))],ticked:M(u).treeTicked,"onUpdate:ticked":s[1]||(s[1]=c=>M(u).treeTicked=c),expanded:M(u).treeExpanded,"onUpdate:expanded":s[2]||(s[2]=c=>M(u).treeExpanded=c),"tick-strategy":"strict",nodes:M(u).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","selected-color":"primary",class:"q-pb-lg"},{"default-header":k(c=>[le("div",it,Q(c.node.name),1)]),_:1},8,["selected","ticked","expanded","nodes"])],64)):x("",!0),M(a).report?(E(),I(nt,{key:1,item:M(a).report,"show-series":!1,class:"q-pb-lg q-px-lg"},null,8,["item"])):x("",!0)]))}},ce={threshold:0,root:null,rootMargin:"0px"};function de(o,a,u){let n,e,i;typeof u=="function"?(n=u,e=ce,i=a.cfg===void 0):(n=u.handler,e=Object.assign({},ce,u.cfg),i=a.cfg===void 0||Be(a.cfg,e)===!1),a.handler!==n&&(a.handler=n),i===!0&&(a.cfg=e,a.observer!==void 0&&a.observer.unobserve(o),a.observer=new IntersectionObserver(([l])=>{if(typeof a.handler=="function"){if(l.rootBounds===null&&document.body.contains(o)===!0){a.observer.unobserve(o),a.observer.observe(o);return}(a.handler(l,a.observer)===!1||a.once===!0&&l.isIntersecting===!0)&&ve(o)}},e),a.observer.observe(o))}function ve(o){const a=o.__qvisible;a!==void 0&&(a.observer!==void 0&&a.observer.unobserve(o),delete o.__qvisible)}const st=Ne({name:"intersection",mounted(o,{modifiers:a,value:u}){const n={once:a.once===!0};de(o,n,u),o.__qvisible=n},updated(o,a){const u=o.__qvisible;u!==void 0&&de(o,u,a.value)},beforeUnmount:ve}),lt=Ve({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(o,{slots:a,emit:u}){const n=ge(ue.value===!0?o.ssrPrerender:!1),e=H(()=>o.root!==void 0||o.margin!==void 0||o.threshold!==void 0?{handler:c,cfg:{root:o.root,rootMargin:o.margin,threshold:o.threshold}}:c),i=H(()=>o.disable!==!0&&(ue.value!==!0||o.once!==!0||o.ssrPrerender!==!0)),l=H(()=>[[st,e.value,void 0,{once:o.once}]]),s=H(()=>`--q-transition-duration: ${o.transitionDuration}ms`);function c(D){n.value!==D.isIntersecting&&(n.value=D.isIntersecting,o.onVisibility!==void 0&&u("visibility",n.value))}function d(){if(n.value===!0)return[K("div",{key:"content",style:s.value},Ye(a.default))];if(a.hidden!==void 0)return[K("div",{key:"hidden",style:s.value},a.hidden())]}return()=>{const D=o.transition?[K(We,{name:"q-transition--"+o.transition},d)]:d();return Qe(o.tag,{class:"q-intersection"},D,"main",i.value,()=>l.value)}}});var te={};(function o(a,u,n,e){var i=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL);function l(){}function s(r){var t=u.exports.Promise,g=t!==void 0?t:a.Promise;return typeof g=="function"?new g(r):(r(l,l),null)}var c=function(){var r=Math.floor(16.666666666666668),t,g,h={},p=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(v){var f=Math.random();return h[f]=requestAnimationFrame(function m(b){p===b||p+r-1<b?(p=b,delete h[f],v()):h[f]=requestAnimationFrame(m)}),f},g=function(v){h[v]&&cancelAnimationFrame(h[v])}):(t=function(v){return setTimeout(v,r)},g=function(v){return clearTimeout(v)}),{frame:t,cancel:g}}(),d=function(){var r,t,g={};function h(p){function v(f,m){p.postMessage({options:f||{},callback:m})}p.init=function(m){var b=m.transferControlToOffscreen();p.postMessage({canvas:b},[b])},p.fire=function(m,b,C){if(t)return v(m,null),t;var _=Math.random().toString(36).slice(2);return t=s(function(P){function T(y){y.data.callback===_&&(delete g[_],p.removeEventListener("message",T),t=null,C(),P())}p.addEventListener("message",T),v(m,_),g[_]=T.bind(null,{data:{callback:_}})}),t},p.reset=function(){p.postMessage({reset:!0});for(var m in g)g[m](),delete g[m]}}return function(){if(r)return r;if(!n&&i){var p=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([p])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",v),null}h(r)}return r}}(),D={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function R(r,t){return t?t(r):r}function pe(r){return r!=null}function S(r,t,g){return R(r&&pe(r[t])?r[t]:D[t],g)}function _e(r){return r<0?0:Math.floor(r)}function ye(r,t){return Math.floor(Math.random()*(t-r))+r}function j(r){return parseInt(r,16)}function be(r){return r.map(De)}function De(r){var t=String(r).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:j(t.substring(0,2)),g:j(t.substring(2,4)),b:j(t.substring(4,6))}}function Ee(r){var t=S(r,"origin",Object);return t.x=S(t,"x",Number),t.y=S(t,"y",Number),t}function Se(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function we(r){var t=r.getBoundingClientRect();r.width=t.width,r.height=t.height}function Me(r){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=r,t}function ke(r,t,g,h,p,v,f,m,b){r.save(),r.translate(t,g),r.rotate(v),r.scale(h,p),r.arc(0,0,1,f,m,b),r.restore()}function Te(r){var t=r.angle*(Math.PI/180),g=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-t+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar}}function Ie(r,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var g=t.tick++/t.totalTicks,h=t.x+t.random*t.tiltCos,p=t.y+t.random*t.tiltSin,v=t.wobbleX+t.random*t.tiltCos,f=t.wobbleY+t.random*t.tiltSin;if(r.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-g)+")",r.beginPath(),t.shape==="circle")r.ellipse?r.ellipse(t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):ke(r,t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var m=Math.PI/2*3,b=4*t.scalar,C=8*t.scalar,_=t.x,P=t.y,T=5,y=Math.PI/T;T--;)_=t.x+Math.cos(m)*C,P=t.y+Math.sin(m)*C,r.lineTo(_,P),m+=y,_=t.x+Math.cos(m)*b,P=t.y+Math.sin(m)*b,r.lineTo(_,P),m+=y;else r.moveTo(Math.floor(t.x),Math.floor(t.y)),r.lineTo(Math.floor(t.wobbleX),Math.floor(p)),r.lineTo(Math.floor(v),Math.floor(f)),r.lineTo(Math.floor(h),Math.floor(t.wobbleY));return r.closePath(),r.fill(),t.tick<t.totalTicks}function Pe(r,t,g,h,p){var v=t.slice(),f=r.getContext("2d"),m,b,C=s(function(_){function P(){m=b=null,f.clearRect(0,0,h.width,h.height),p(),_()}function T(){n&&!(h.width===e.width&&h.height===e.height)&&(h.width=r.width=e.width,h.height=r.height=e.height),!h.width&&!h.height&&(g(r),h.width=r.width,h.height=r.height),f.clearRect(0,0,h.width,h.height),v=v.filter(function(y){return Ie(f,y)}),v.length?m=c.frame(T):P()}m=c.frame(T),b=P});return{addFettis:function(_){return v=v.concat(_),C},canvas:r,promise:C,reset:function(){m&&c.cancel(m),b&&b()}}}function re(r,t){var g=!r,h=!!S(t||{},"resize"),p=S(t,"disableForReducedMotion",Boolean),v=i&&!!S(t||{},"useWorker"),f=v?d():null,m=g?Se:we,b=r&&f?!!r.__confetti_initialized:!1,C=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_;function P(y,$,z){for(var q=S(y,"particleCount",_e),B=S(y,"angle",Number),V=S(y,"spread",Number),L=S(y,"startVelocity",Number),Ce=S(y,"decay",Number),Oe=S(y,"gravity",Number),xe=S(y,"drift",Number),ae=S(y,"colors",be),Re=S(y,"ticks",Number),ie=S(y,"shapes"),Le=S(y,"scalar"),oe=Ee(y),se=q,Z=[],He=r.width*oe.x,qe=r.height*oe.y;se--;)Z.push(Te({x:He,y:qe,angle:B,spread:V,startVelocity:L,color:ae[se%ae.length],shape:ie[ye(0,ie.length)],ticks:Re,decay:Ce,gravity:Oe,drift:xe,scalar:Le}));return _?_.addFettis(Z):(_=Pe(r,Z,m,$,z),_.promise)}function T(y){var $=p||S(y,"disableForReducedMotion",Boolean),z=S(y,"zIndex",Number);if($&&C)return s(function(L){L()});g&&_?r=_.canvas:g&&!r&&(r=Me(z),document.body.appendChild(r)),h&&!b&&m(r);var q={width:r.width,height:r.height};f&&!b&&f.init(r),b=!0,f&&(r.__confetti_initialized=!0);function B(){if(f){var L={getBoundingClientRect:function(){if(!g)return r.getBoundingClientRect()}};m(L),f.postMessage({resize:{width:L.width,height:L.height}});return}q.width=q.height=null}function V(){_=null,h&&a.removeEventListener("resize",B),g&&r&&(document.body.removeChild(r),r=null,b=!1)}return h&&a.addEventListener("resize",B,!1),f?f.fire(y,q,V):P(y,q,V)}return T.reset=function(){f&&f.reset(),_&&_.reset()},T}var X;function ne(){return X||(X=re(null,{useWorker:!0,resize:!0})),X}u.exports=function(){return ne().apply(this,arguments)},u.exports.reset=function(){ne().reset()},u.exports.create=re})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),te,!1);const he=te.exports;te.exports.create;function fe(){var o=3e3,a=Date.now()+o,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function n(i,l){return Math.random()*(l-i)+i}var e=setInterval(function(){var i=a-Date.now();if(i<=0)return clearInterval(e);var l=100*(i/o);he(Object.assign({},u,{particleCount:l,origin:{x:n(.1,.3),y:Math.random()-.2}})),he(Object.assign({},u,{particleCount:l,origin:{x:n(.7,.9),y:Math.random()-.2}}))},250)}const ut={__name:"TaskListItem",props:{item:{type:Object,required:!0}},emits:["ondragstart"],setup(o){const a=o,u=U(),n=H(()=>a.item.target>1&&!a.item.done),e=H(()=>!a.item.performance_history||!a.item.performance_history.length?null:Ge.formatDate(a.item.performance_history[0].updated,"DD.MM.YYYY HH:mm"));function i(d,D){d.push({name:"task",params:{id:D}})}function l(){const d={done:null};a.item.performance>=a.item.target&&(d.performance=a.item.target-1),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}function s(){const d={performance:a.item.performance+1};d.performance>=a.item.target&&fe(),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}function c(){const d={done:new Date().toISOString()};fe(),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}return(d,D)=>(E(),I(Je,{clickable:"",active:!!o.item.done,"active-class":"text-positive"},{default:k(()=>[w(J,{side:""},{default:k(()=>[w(Ue,{name:o.item.group_id?"event_repeat":"event",style:{cursor:"grab"},draggable:"true",onDragstart:D[0]||(D[0]=R=>d.$emit("ondragstart",R,o.item)),"onTouchmove:native":D[1]||(D[1]=R=>{})},null,8,["name"])]),_:1}),w(J,{class:"q-pl-sm",onClick:D[2]||(D[2]=R=>i(d.$router,o.item.id))},{default:k(()=>[w(N,null,{default:k(()=>[A(Q(o.item.name),1)]),_:1}),n.value?(E(),I(ee,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,hint:e.value,color:"positive","label-icon":"track_changes","hint-icon":"update",caption:"",class:"q-mb-xs"},null,8,["value","label","hint"])):x("",!0)]),_:1}),w(J,{side:""},{default:k(()=>[o.item.done?(E(),I(W,{key:0,flat:"",round:"",dense:"",icon:"check_box",color:"positive",onClick:l})):n.value?(E(),I(W,{key:1,flat:"",round:"",dense:"",icon:"plus_one",onClick:s})):(E(),I(W,{key:2,flat:"",round:"",dense:"",icon:"check_box_outline_blank",onClick:c}))]),_:1})]),_:1},8,["active"]))}};var me;(function(o){var a=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,i){this._data[e]=i},n.prototype.setDragImage=function(e,i,l){var s=u._instance;s._imgCustom=e,s._imgOffset={x:i,y:l}},n}();o.DataTransfer=a;var u=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var i=document,l=this._touchstart.bind(this),s=this._touchmove.bind(this),c=this._touchend.bind(this),d=e?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",l,d),i.addEventListener("touchmove",s,d),i.addEventListener("touchend",c),i.addEventListener("touchcancel",c)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var i=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){i._dragSource==l&&i._img==null&&i._dispatchEvent(e,"contextmenu",l)&&i._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var i=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",i)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",i)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",i),this._lastTarget=i),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",i))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var i=this._getDelta(e);return i>n._THRESHOLD||n._ISPRESSHOLDMODE&&i>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new a,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,i){return e&&e.touches&&(e=e.touches[0]),{x:i?e.pageX:e.clientX,y:i?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(e);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var i=this._getPoint(e),l=document.elementFromPoint(i.x,i.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},n.prototype._createImage=function(e){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=i.getBoundingClientRect(),s=this._getPoint(e);this._imgOffset={x:s.x-l.left,y:s.y-l.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var i=this;requestAnimationFrame(function(){if(i._img){var l=i._getPoint(e,!0),s=i._img.style;s.position="absolute",s.pointerEvents="none",s.zIndex="999999",s.left=Math.round(l.x-i._imgOffset.x)+"px",s.top=Math.round(l.y-i._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,i,l){for(var s=0;s<l.length;s++){var c=l[s];e[c]=i[c]}},n.prototype._copyStyle=function(e,i){if(n._rmvAtts.forEach(function(R){i.removeAttribute(R)}),e instanceof HTMLCanvasElement){var l=e,s=i;s.width=l.width,s.height=l.height,s.getContext("2d").drawImage(l,0,0)}for(var c=getComputedStyle(e),d=0;d<c.length;d++){var D=c[d];D.indexOf("transition")<0&&(i.style[D]=c[D])}i.style.pointerEvents="none";for(var d=0;d<e.children.length;d++)this._copyStyle(e.children[d],i.children[d])},n.prototype._dispatchEvent=function(e,i,l){if(e&&l){var s=document.createEvent("Event"),c=e.touches?e.touches[0]:e;return s.initEvent(i,!0,!0),s.button=0,s.which=s.buttons=1,this._copyProps(s,e,n._kbdProps),this._copyProps(s,c,n._ptProps),s.dataTransfer=this._dataTransfer,l.dispatchEvent(s),s.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),o.DragDropTouch=u})(me||(me={}));const ct={__name:"WeekPane",props:{week:{type:Object,required:!0},monday:{type:String,required:!0}},setup(o){const a=o,u=U(),n=H(()=>a.week.tasks.length?[...a.week.tasks].sort((l,s)=>s.target-l.target):null);function e(l,s){const c={id:s.id,planned:s.planned,monday:a.monday};l.dataTransfer.setData("text",JSON.stringify(c)),l.dataTransfer.dropEffect="move"}function i(l){const s=JSON.parse(l.dataTransfer.getData("text"));s.monday!==a.monday&&u.moveItem(s,a.monday)}return(l,s)=>(E(),O("div",{onDragover:s[0]||(s[0]=G(()=>{},["prevent"])),onDragenter:s[1]||(s[1]=G(()=>{},["prevent"])),onDrop:s[2]||(s[2]=G(c=>i(c),["prevent"]))},[o.week.start?(E(),I(N,{key:0,overline:"",class:"q-px-lg q-py-sm text-uppercase"},{default:k(()=>[A(Q(o.week.month),1)]),_:1})):x("",!0),w(N,{header:"",class:Xe(["q-px-lg q-py-sm",o.week.current?"bg-blue-1":""])},{default:k(()=>[A(Q(o.week.title),1)]),_:1},8,["class"]),(E(!0),O(F,null,Y(n.value,c=>(E(),I(lt,{key:c.id,class:"min-h",once:""},{default:k(()=>[w(ut,{item:c,class:"q-pl-lg",onOndragstart:e},null,8,["item"])]),_:2},1024))),128))],32))}},dt=je(ct,[["__scopeId","data-v-9f16368c"]]),Et={__name:"HomeView",setup(o){const a=U();return(u,n)=>(E(),O(F,null,[w(Fe,{class:"q-pl-lg"},{default:k(()=>[w(Ae,null,{default:k(()=>[A("Tasks")]),_:1}),w(W,{flat:"",round:"",icon:"filter_list",onClick:n[0]||(n[0]=e=>M(a).filter.show=!M(a).filter.show)})]),_:1}),w(Ze,null,{default:k(()=>[$e(w(ot,null,null,512),[[ze,M(a).filter.show]])]),_:1}),M(a).calendar?(E(!0),O(F,{key:0},Y(M(a).calendar,(e,i)=>(E(),I(dt,{key:i,week:e,monday:i,class:"q-pb-lg"},null,8,["week","monday"]))),128)):x("",!0)],64))}};export{Et as default};
