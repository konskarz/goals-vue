import{at as Q,au as A,av as _,a as Y,aw as I,g as U,w as W,ax as G,o as J,b as z,x as b,l as v,F as K,ay as Z,H as ee,ao as te,r as oe,az as ne,ah as ie,j as le,c as re,h as se,ab as ae}from"./index-4bd22d4d.js";const ue=[null,document,document.body,document.scrollingElement,document.documentElement];function ve(e,t){let o=Q(t);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return ue.includes(o)?window:o}function j(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function k(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function B(e,t,o=0){const n=arguments[3]===void 0?performance.now():arguments[3],i=j(e);if(o<=0){i!==t&&q(e,t);return}requestAnimationFrame(c=>{const r=c-n,a=i+(t-i)/Math.max(r,o)*r;q(e,a),a!==t&&B(e,t,o-r,c)})}function R(e,t,o=0){const n=arguments[3]===void 0?performance.now():arguments[3],i=k(e);if(o<=0){i!==t&&M(e,t);return}requestAnimationFrame(c=>{const r=c-n,a=i+(t-i)/Math.max(r,o)*r;M(e,a),a!==t&&R(e,t,o-r,c)})}function q(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function M(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function he(e,t,o){if(o){B(e,t,o);return}q(e,t)}function ge(e,t,o){if(o){R(e,t,o);return}M(e,t)}let H;function ye(){if(H!==void 0)return H;const e=document.createElement("p"),t=document.createElement("div");A(e,{width:"100%",height:"200px"}),A(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const o=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return o===n&&(n=t.clientWidth),t.remove(),H=o-n,H}function ce(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}function be(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),_.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function Te(e,t,o){let n;function i(){n!==void 0&&(I.remove(n),n=void 0)}return Y(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){n={condition:()=>o.value===!0,handler:t},I.add(n)}}}const Se={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Le=["beforeShow","show","beforeHide","hide"];function Ee({showing:e,canShow:t,hideOnRouteChange:o,handleShow:n,handleHide:i,processOnMount:c}){const r=U(),{props:a,emit:u,proxy:d}=r;let f;function g(l){e.value===!0?T(l):p(l)}function p(l){if(a.disable===!0||l!==void 0&&l.qAnchorHandled===!0||t!==void 0&&t(l)!==!0)return;const y=a["onUpdate:modelValue"]!==void 0;y===!0&&(u("update:modelValue",!0),f=l,z(()=>{f===l&&(f=void 0)})),(a.modelValue===null||y===!1)&&E(l)}function E(l){e.value!==!0&&(e.value=!0,u("beforeShow",l),n!==void 0?n(l):u("show",l))}function T(l){if(a.disable===!0)return;const y=a["onUpdate:modelValue"]!==void 0;y===!0&&(u("update:modelValue",!1),f=l,z(()=>{f===l&&(f=void 0)})),(a.modelValue===null||y===!1)&&s(l)}function s(l){e.value!==!1&&(e.value=!1,u("beforeHide",l),i!==void 0?i(l):u("hide",l))}function m(l){a.disable===!0&&l===!0?a["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):l===!0!==e.value&&(l===!0?E:s)(f)}W(()=>a.modelValue,m),o!==void 0&&G(r)===!0&&W(()=>d.$route.fullPath,()=>{o.value===!0&&e.value===!0&&T()}),c===!0&&J(()=>{m(a.modelValue)});const w={show:p,hide:T,toggle:g};return Object.assign(d,w),w}let S=0,V,P,L,C=!1,O,X,F,h=null;function de(e){fe(e)&&K(e)}function fe(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Z(e),o=e.shiftKey&&!e.deltaX,n=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=o||n?e.deltaY:e.deltaX;for(let c=0;c<t.length;c++){const r=t[c];if(ce(r,n))return n?i<0&&r.scrollTop===0?!0:i>0&&r.scrollTop+r.clientHeight===r.scrollHeight:i<0&&r.scrollLeft===0?!0:i>0&&r.scrollLeft+r.clientWidth===r.scrollWidth}return!0}function $(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function x(e){C!==!0&&(C=!0,requestAnimationFrame(()=>{C=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:n}=document.scrollingElement;(L===void 0||t!==window.innerHeight)&&(L=o-t,document.scrollingElement.scrollTop=n),n>L&&(document.scrollingElement.scrollTop-=Math.ceil((n-L)/8))}))}function N(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:n,overflowX:i}=window.getComputedStyle(t);V=k(window),P=j(window),O=t.style.left,X=t.style.top,F=window.location.href,t.style.left=`-${V}px`,t.style.top=`-${P}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,b.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",x,v.passiveCapture),window.visualViewport.addEventListener("scroll",x,v.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",$,v.passiveCapture))}b.is.desktop===!0&&b.is.mac===!0&&window[`${e}EventListener`]("wheel",de,v.notPassive),e==="remove"&&(b.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",x,v.passiveCapture),window.visualViewport.removeEventListener("scroll",x,v.passiveCapture)):window.removeEventListener("scroll",$,v.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=O,t.style.top=X,window.location.href===F&&window.scrollTo(V,P),L=void 0)}function me(e){let t="add";if(e===!0){if(S++,h!==null){clearTimeout(h),h=null;return}if(S>1)return}else{if(S===0||(S--,S>0))return;if(t="remove",b.is.ios===!0&&b.is.nativeMobile===!0){h!==null&&clearTimeout(h),h=setTimeout(()=>{N(t),h=null},100);return}}N(t)}function He(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,me(t))}}}function xe(){let e=null;const t=U();function o(){e!==null&&(clearTimeout(e),e=null)}return ee(o),Y(o),{removeTimeout:o,registerTimeout(n,i){o(),te(t)===!1&&(e=setTimeout(n,i))}}}function pe(e){const{request:t,get:o}=ne(),n=oe(JSON.parse(localStorage.getItem(e)));function i(){o(e).then(d=>{n.value=d,localStorage.setItem(e,JSON.stringify(d))})}function c(d){return n.value.find(f=>f.id===d)}function r(d){return t({method:"post",url:e,data:d})}function a(d,f){return t({method:"patch",url:e+d,data:f})}function u(d){return t({method:"delete",url:e+d})}return i(),{data:n,refetch:i,getItem:c,createItem:r,updateItem:a,deleteItem:u}}const D=(e,t=null)=>e.filter(o=>o.parent===t).map(o=>({...o,children:D(e,o.id)})),Ve=ie("GoalStore",()=>{const{data:e,refetch:t,getItem:o,createItem:n,updateItem:i,deleteItem:c}=pe("/goals/"),r=le(()=>e.value?D(e.value):null);function a(u){const d=[u],f=g=>e.value.filter(p=>p.parent===g).forEach(p=>{d.push(p.id),f(p.id)});return f(u),d}return{data:e,refetch:t,getItem:o,createItem:n,updateItem:i,deleteItem:c,tree:r,getBranch:a}}),Pe=re({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:o}){let n=!1,i,c,r=null,a=null,u,d;function f(){i&&i(),i=null,n=!1,r!==null&&(clearTimeout(r),r=null),a!==null&&(clearTimeout(a),a=null),c!==void 0&&c.removeEventListener("transitionend",u),u=null}function g(s,m,w){m!==void 0&&(s.style.height=`${m}px`),s.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,i=w}function p(s,m){s.style.overflowY=null,s.style.height=null,s.style.transition=null,f(),m!==d&&o(m)}function E(s,m){let w=0;c=s,n===!0?(f(),w=s.offsetHeight===s.scrollHeight?0:void 0):(d="hide",s.style.overflowY="hidden"),g(s,w,m),r=setTimeout(()=>{r=null,s.style.height=`${s.scrollHeight}px`,u=l=>{a=null,(Object(l)!==l||l.target===s)&&p(s,"show")},s.addEventListener("transitionend",u),a=setTimeout(u,e.duration*1.1)},100)}function T(s,m){let w;c=s,n===!0?f():(d="show",s.style.overflowY="hidden",w=s.scrollHeight),g(s,w,m),r=setTimeout(()=>{r=null,s.style.height=0,u=l=>{a=null,(Object(l)!==l||l.target===s)&&p(s,"hide")},s.addEventListener("transitionend",u),a=setTimeout(u,e.duration*1.1)},100)}return Y(()=>{n===!0&&f()}),()=>se(ae,{css:!1,appear:e.appear,onEnter:E,onLeave:T},t.default)}});export{Pe as Q,j as a,k as b,ye as c,be as d,he as e,Le as f,ve as g,xe as h,Ee as i,Te as j,He as k,Ve as l,pe as m,ge as s,Se as u};
