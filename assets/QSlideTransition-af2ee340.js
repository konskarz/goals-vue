import{aP as pe,g as ne,r as C,D as Te,I as j,b as we,G as V,w as S,o as Se,a as M,L as Ee,l as B,aQ as X,E as Ce,v as He,c as oe,V as ke,N as Me,aR as We,W as qe,d as p,O as Le,aS as Pe,X as Oe,aT as Be,Y as Ae,aU as Re,aV as $e,K as ze,aW as Fe,aX as G,s as Ie,aY as De,h as A,m as Ke,au as le,aZ as Ne,a_ as Qe,a$ as Ye,M as je,b0 as Ve,aE as Xe}from"./index-43cddd7c.js";function Ge(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),pe.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const _e={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Je({showing:e,avoidEmit:o,configureAnchorEl:i}){const{props:t,proxy:l,emit:f}=ne(),n=C(null);let d=null;function s(u){return n.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const a={};i===void 0&&(Object.assign(a,{hide(u){l.hide(u)},toggle(u){l.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Te(u,13)===!0&&a.toggle(u)},contextClick(u){l.hide(u),j(u),we(()=>{l.show(u),u.qAnchorHandled=!0})},prevent:j,mobileTouch(u){if(a.mobileCleanup(u),s(u)!==!0)return;l.hide(u),n.value.classList.add("non-selectable");const g=u.target;V(a,"anchor",[[g,"touchmove","mobileCleanup","passive"],[g,"touchend","mobileCleanup","passive"],[g,"touchcancel","mobileCleanup","passive"],[n.value,"contextmenu","prevent","notPassive"]]),d=setTimeout(()=>{d=null,l.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){n.value.classList.remove("non-selectable"),d!==null&&(clearTimeout(d),d=null),e.value===!0&&u!==void 0&&Ge()}}),i=function(u=t.contextMenu){if(t.noParentEvent===!0||n.value===null)return;let g;u===!0?l.$q.platform.is.mobile===!0?g=[[n.value,"touchstart","mobileTouch","passive"]]:g=[[n.value,"mousedown","hide","passive"],[n.value,"contextmenu","contextClick","notPassive"]]:g=[[n.value,"click","toggle","passive"],[n.value,"keyup","toggleKey","passive"]],V(a,"anchor",g)});function r(){Ee(a,"anchor")}function v(u){for(n.value=u;n.value.classList.contains("q-anchor--skip");)n.value=n.value.parentNode;i()}function m(){if(t.target===!1||t.target===""||l.$el.parentNode===null)n.value=null;else if(t.target===!0)v(l.$el.parentNode);else{let u=t.target;if(typeof t.target=="string")try{u=document.querySelector(t.target)}catch{u=void 0}u!=null?(n.value=u.$el||u,i()):(n.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return S(()=>t.contextMenu,u=>{n.value!==null&&(r(),i(u))}),S(()=>t.target,()=>{n.value!==null&&r(),m()}),S(()=>t.noParentEvent,u=>{n.value!==null&&(u===!0?r():i())}),Se(()=>{m(),o!==!0&&t.modelValue===!0&&n.value===null&&f("update:modelValue",!1)}),M(()=>{d!==null&&clearTimeout(d),r()}),{anchorEl:n,canShow:s,anchorEvents:a}}function Ue(e,o){const i=C(null);let t;function l(d,s){const a=`${s!==void 0?"add":"remove"}EventListener`,r=s!==void 0?s:t;d!==window&&d[a]("scroll",r,B.passive),window[a]("scroll",r,B.passive),t=s}function f(){i.value!==null&&(l(i.value),i.value=null)}const n=S(()=>e.noParentEvent,()=>{i.value!==null&&(f(),o())});return M(n),{localScrollTarget:i,unconfigureScrollTarget:f,changeScrollEvent:l}}const{notPassiveCapture:H}=B,T=[];function k(e){const o=e.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let i=X.length-1;for(;i>=0;){const t=X[i].$;if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;i--}for(let t=T.length-1;t>=0;t--){const l=T[t];if((l.anchorEl.value===null||l.anchorEl.value.contains(o)===!1)&&(o===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(o)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function Ze(e){T.push(e),T.length===1&&(document.addEventListener("mousedown",k,H),document.addEventListener("touchstart",k,H))}function _(e){const o=T.findIndex(i=>i===e);o>-1&&(T.splice(o,1),T.length===0&&(document.removeEventListener("mousedown",k,H),document.removeEventListener("touchstart",k,H)))}let J,U;function Z(e){const o=e.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function et(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const R={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{R[`${e}#ltr`]=e,R[`${e}#rtl`]=e});function ee(e,o){const i=e.split(" ");return{vertical:i[0],horizontal:R[`${i[1]}#${o===!0?"rtl":"ltr"}`]}}function tt(e,o){let{top:i,left:t,right:l,bottom:f,width:n,height:d}=e.getBoundingClientRect();return o!==void 0&&(i-=o[1],t-=o[0],f+=o[1],l+=o[0],n+=o[0],d+=o[1]),{top:i,bottom:f,height:d,left:t,right:l,width:n,middle:t+(l-t)/2,center:i+(f-i)/2}}function nt(e,o,i){let{top:t,left:l}=e.getBoundingClientRect();return t+=o.top,l+=o.left,i!==void 0&&(t+=i[1],l+=i[0]),{top:t,bottom:t+1,height:1,left:l,right:l+1,width:1,middle:l,center:t}}function ot(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function te(e,o,i){return{top:e[i.anchorOrigin.vertical]-o[i.selfOrigin.vertical],left:e[i.anchorOrigin.horizontal]-o[i.selfOrigin.horizontal]}}function lt(e){if(Ce.is.ios===!0&&window.visualViewport!==void 0){const d=document.body.style,{offsetLeft:s,offsetTop:a}=window.visualViewport;s!==J&&(d.setProperty("--q-pe-left",s+"px"),J=s),a!==U&&(d.setProperty("--q-pe-top",a+"px"),U=a)}const{scrollLeft:o,scrollTop:i}=e.el,t=e.absoluteOffset===void 0?tt(e.anchorEl,e.cover===!0?[0,0]:e.offset):nt(e.anchorEl,e.absoluteOffset,e.offset);let l={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(l.minWidth=t.width+"px",e.cover===!0&&(l.minHeight=t.height+"px")),Object.assign(e.el.style,l);const f=ot(e.el);let n=te(t,f,e);if(e.absoluteOffset===void 0||e.offset===void 0)O(n,t,f,e.anchorOrigin,e.selfOrigin);else{const{top:d,left:s}=n;O(n,t,f,e.anchorOrigin,e.selfOrigin);let a=!1;if(n.top!==d){a=!0;const r=2*e.offset[1];t.center=t.top-=r,t.bottom-=r+2}if(n.left!==s){a=!0;const r=2*e.offset[0];t.middle=t.left-=r,t.right-=r+2}a===!0&&(n=te(t,f,e),O(n,t,f,e.anchorOrigin,e.selfOrigin))}l={top:n.top+"px",left:n.left+"px"},n.maxHeight!==void 0&&(l.maxHeight=n.maxHeight+"px",t.height>n.maxHeight&&(l.minHeight=l.maxHeight)),n.maxWidth!==void 0&&(l.maxWidth=n.maxWidth+"px",t.width>n.maxWidth&&(l.minWidth=l.maxWidth)),Object.assign(e.el.style,l),e.el.scrollTop!==i&&(e.el.scrollTop=i),e.el.scrollLeft!==o&&(e.el.scrollLeft=o)}function O(e,o,i,t,l){const f=i.bottom,n=i.right,d=He(),s=window.innerHeight-d,a=document.body.clientWidth;if(e.top<0||e.top+f>s)if(l.vertical==="center")e.top=o[t.vertical]>s/2?Math.max(0,s-f):0,e.maxHeight=Math.min(f,s);else if(o[t.vertical]>s/2){const r=Math.min(s,t.vertical==="center"?o.center:t.vertical===l.vertical?o.bottom:o.top);e.maxHeight=Math.min(f,r),e.top=Math.max(0,r-f)}else e.top=Math.max(0,t.vertical==="center"?o.center:t.vertical===l.vertical?o.top:o.bottom),e.maxHeight=Math.min(f,s-e.top);if(e.left<0||e.left+n>a)if(e.maxWidth=Math.min(n,a),l.horizontal==="middle")e.left=o[t.horizontal]>a/2?Math.max(0,a-n):0;else if(o[t.horizontal]>a/2){const r=Math.min(a,t.horizontal==="middle"?o.middle:t.horizontal===l.horizontal?o.right:o.left);e.maxWidth=Math.min(n,r),e.left=Math.max(0,r-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?o.middle:t.horizontal===l.horizontal?o.left:o.right),e.maxWidth=Math.min(n,a-e.left)}const ut=oe({name:"QMenu",inheritAttrs:!1,props:{..._e,...ke,...Me,...We,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Z},self:{type:String,validator:Z},offset:{type:Array,validator:et},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...qe,"click","escapeKey"],setup(e,{slots:o,emit:i,attrs:t}){let l=null,f,n,d;const s=ne(),{proxy:a}=s,{$q:r}=a,v=C(null),m=C(!1),u=p(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),g=Le(e,r),{registerTick:h,removeTick:x}=Pe(),{registerTimeout:y}=Oe(),{transitionProps:b,transitionStyle:ae}=Be(e),{localScrollTarget:$,changeScrollEvent:ue,unconfigureScrollTarget:re}=Ue(e,Q),{anchorEl:w,canShow:se}=Je({showing:m}),{hide:z}=Ae({showing:m,canShow:se,handleShow:me,handleHide:ve,hideOnRouteChange:u,processOnMount:!0}),{showPortal:F,hidePortal:I,renderPortal:ce}=Re(s,v,xe,"menu"),W={anchorEl:w,innerRef:v,onClickOutside(c){if(e.persistent!==!0&&m.value===!0)return z(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&je(c),!0}},D=p(()=>ee(e.anchor||(e.cover===!0?"center middle":"bottom start"),r.lang.rtl)),de=p(()=>e.cover===!0?D.value:ee(e.self||"top start",r.lang.rtl)),fe=p(()=>(e.square===!0?" q-menu--square":"")+(g.value===!0?" q-menu--dark q-dark":"")),he=p(()=>e.autoClose===!0?{onClick:ge}:{}),K=p(()=>m.value===!0&&e.persistent!==!0);S(K,c=>{c===!0?(Qe(L),Ze(W)):(G(L),_(W))});function q(){Ne(()=>{let c=v.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function me(c){if(l=e.noRefocus===!1?document.activeElement:null,$e(Y),F(),Q(),f=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const P=ze(c);if(P.left!==void 0){const{top:ye,left:be}=w.value.getBoundingClientRect();f={left:P.left-be,top:P.top-ye}}}n===void 0&&(n=S(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,E)),e.noFocus!==!0&&document.activeElement.blur(),h(()=>{E(),e.noFocus!==!0&&q()}),y(()=>{r.platform.is.ios===!0&&(d=e.autoClose,v.value.click()),E(),F(!0),i("show",c)},e.transitionDuration)}function ve(c){x(),I(),N(!0),l!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),y(()=>{I(!0),i("hide",c)},e.transitionDuration)}function N(c){f=void 0,n!==void 0&&(n(),n=void 0),(c===!0||m.value===!0)&&(Fe(Y),re(),_(W),G(L)),c!==!0&&(l=null)}function Q(){(w.value!==null||e.scrollTarget!==void 0)&&($.value=Ie(w.value,e.scrollTarget),ue($.value,E))}function ge(c){d!==!0?(De(a,c),i("click",c)):d=!1}function Y(c){K.value===!0&&e.noFocus!==!0&&Ye(v.value,c.target)!==!0&&q()}function L(c){i("escapeKey"),z(c)}function E(){const c=v.value;c===null||w.value===null||lt({el:c,offset:e.offset,anchorEl:w.value,anchorOrigin:D.value,selfOrigin:de.value,absoluteOffset:f,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function xe(){return A(le,b.value,()=>m.value===!0?A("div",{role:"menu",...t,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+fe.value,t.class],style:[t.style,ae.value],...he.value},Ke(o.default)):null)}return M(N),Object.assign(a,{focus:q,updatePosition:E}),ce}});function it(e){const{request:o,get:i}=Ve(),t=C(JSON.parse(localStorage.getItem(e)));function l(){i(e).then(a=>{t.value=a,localStorage.setItem(e,JSON.stringify(a))})}function f(a){return t.value.find(r=>r.id===a)}function n(a){return o({method:"post",url:e,data:a})}function d(a,r){return o({method:"patch",url:e+a,data:r})}function s(a){return o({method:"delete",url:e+a})}return l(),{data:t,refetch:l,getItem:f,createItem:n,updateItem:d,deleteItem:s}}const ie=(e,o=null)=>e.filter(i=>i.parent===o).map(i=>({...i,children:ie(e,i.id)})),rt=Xe("GoalStore",()=>{const{data:e,refetch:o,getItem:i,createItem:t,updateItem:l,deleteItem:f}=it("/goals/"),n=p(()=>e.value?ie(e.value):null);function d(s){const a=[s],r=v=>e.value.filter(m=>m.parent===v).forEach(m=>{a.push(m.id),r(m.id)});return r(s),a}return{data:e,refetch:o,getItem:i,createItem:t,updateItem:l,deleteItem:f,tree:n,getBranch:d}}),st=oe({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:i}){let t=!1,l,f,n=null,d=null,s,a;function r(){l&&l(),l=null,t=!1,n!==null&&(clearTimeout(n),n=null),d!==null&&(clearTimeout(d),d=null),f!==void 0&&f.removeEventListener("transitionend",s),s=null}function v(h,x,y){x!==void 0&&(h.style.height=`${x}px`),h.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,t=!0,l=y}function m(h,x){h.style.overflowY=null,h.style.height=null,h.style.transition=null,r(),x!==a&&i(x)}function u(h,x){let y=0;f=h,t===!0?(r(),y=h.offsetHeight===h.scrollHeight?0:void 0):(a="hide",h.style.overflowY="hidden"),v(h,y,x),n=setTimeout(()=>{n=null,h.style.height=`${h.scrollHeight}px`,s=b=>{d=null,(Object(b)!==b||b.target===h)&&m(h,"show")},h.addEventListener("transitionend",s),d=setTimeout(s,e.duration*1.1)},100)}function g(h,x){let y;f=h,t===!0?r():(a="show",h.style.overflowY="hidden",y=h.scrollHeight),v(h,y,x),n=setTimeout(()=>{n=null,h.style.height=0,s=b=>{d=null,(Object(b)!==b||b.target===h)&&m(h,"hide")},h.addEventListener("transitionend",s),d=setTimeout(s,e.duration*1.1)},100)}return M(()=>{t===!0&&r()}),()=>A(le,{css:!1,appear:e.appear,onEnter:u,onLeave:g},o.default)}});export{st as Q,ut as a,it as b,Ge as c,_e as d,Je as e,rt as u};
