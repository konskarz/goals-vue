import{c as F,d as x,e as l,f as I,h as $,S as P,g as S,k as j,V as q,aI as E,aJ as O}from"./index-716ec7b4.js";const k=F({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(n,{slots:s}){const{proxy:{$q:t}}=S(),r=x(j,l);if(r===l)return console.error("QPage needs to be a deep child of QLayout"),l;if(x(q,l)===l)return console.error("QPage needs to be child of QPageContainer"),l;const i=I(()=>{const a=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof n.styleFn=="function"){const u=r.isContainer.value===!0?r.containerHeight.value:t.screen.height;return n.styleFn(a,u)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-a+"px":t.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":t.screen.height-a+"px"}}),d=I(()=>`q-page${n.padding===!0?" q-layout-padding":""}`);return()=>$("main",{class:d.value,style:i.value},P(s.default))}});function H(n){const{query:s,mutation:t}=E(),{isLoading:r,isError:h,data:i,error:d,refetch:a}=s(n),{mutateAsync:u}=t();function p(e){return i.value.find(o=>o.id===e)}function m(e){return i.value.indexOf(e)}function y(e){return u({method:"post",url:n,data:e})}function C(e,o){return u({method:"patch",url:n+e,data:o})}function v(e){return u({method:"delete",url:n+e})}function g(e,o){return Object.fromEntries(Object.entries(o).filter(([c,b])=>e[c]!==b))}function f(e,o){return Object.keys(g(e,o)).length}return{isLoading:r,isError:h,data:i,error:d,refetch:a,getItem:p,getIndex:m,createItem:y,updateItem:C,deleteItem:v,getChanges:g,isChanged:f}}const Q=(n,s=null)=>n.filter(t=>t.parent===s).map(t=>({...t,children:Q(n,t.id)})),z=O("GoalStore",()=>{const{isLoading:n,isError:s,data:t,error:r,refetch:h,getItem:i,getIndex:d,createItem:a,updateItem:u,deleteItem:p,getChanges:m,isChanged:y}=H("/goals/"),C=I(()=>t.value?Q(t.value):null);function v(g){const f=[g],e=o=>t.value.filter(c=>c.parent===o).forEach(c=>{f.push(c.id),e(c.id)});return e(g),f}return{isLoading:n,isError:s,data:t,error:r,refetch:h,getItem:i,getIndex:d,createItem:a,updateItem:u,deleteItem:p,getChanges:m,isChanged:y,tree:C,getBranch:v}});export{k as Q,z as a,H as u};
