import{a as ie,Q as re}from"./QToolbar-407b0303.js";import{Q as P}from"./QList-acae403b.js";import{u as ue,Q as de}from"./GoalStore-c749be59.js";import{a$ as ce,c as se,ag as E,M as ge,D as fe,N as me,E as ve,r as A,b0 as N,P as he,f as l,w as y,a as be,h as a,b1 as O,g as xe,J as _e,aB as Se,S as Ie,ae as D,C as ke,a6 as Te,aF as b,a7 as c,a1 as h,a2 as i,a8 as v,ab as M,ad as j,ac as H,aa as q,af as G,aM as we}from"./index-2cd25144.js";import{Q as V,b as w,a as T}from"./QItem-1627cf3b.js";import{Q as Le}from"./QSlideTransition-b0e004ef.js";import{d as ye}from"./date-8e3a0f4a.js";import"./format-ff5bcb16.js";const f=ce({}),qe=Object.keys(E),Ce=se({name:"QExpansionItem",props:{...E,...ge,...fe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...me,"click","afterShow","afterHide"],setup(e,{slots:n,emit:s}){const{proxy:{$q:g}}=xe(),r=ve(e,g),o=A(e.modelValue!==null?e.modelValue:e.defaultOpened),x=A(null),_=N(),{show:S,hide:C,toggle:L}=he({showing:o});let d,m;const $=l(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),R=l(()=>e.contentInsetLevel===void 0?null:{["padding"+(g.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),I=l(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),Y=l(()=>{const t={};return qe.forEach(u=>{t[u]=e[u]}),t}),K=l(()=>I.value===!0||e.expandIconToggle!==!0),U=l(()=>e.expandedIcon!==void 0&&o.value===!0?e.expandedIcon:e.expandIcon||g.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),F=l(()=>e.disable!==!0&&(I.value===!0||e.expandIconToggle===!0)),J=l(()=>({expanded:o.value===!0,detailsId:e.targetUid,toggle:L,show:S,hide:C})),Q=l(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:g.lang.label[o.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":_,"aria-label":t}});y(()=>e.group,t=>{m!==void 0&&m(),t!==void 0&&p()});function z(t){I.value!==!0&&L(t),s("click",t)}function W(t){t.keyCode===13&&B(t,!0)}function B(t,u){u!==!0&&x.value!==null&&x.value.focus(),L(t),ke(t)}function X(){s("afterShow")}function Z(){s("afterHide")}function p(){d===void 0&&(d=N()),o.value===!0&&(f[e.group]=d);const t=y(o,k=>{k===!0?f[e.group]=d:f[e.group]===d&&delete f[e.group]}),u=y(()=>f[e.group],(k,le)=>{le===d&&k!==void 0&&k!==d&&C()});m=()=>{t(),u(),f[e.group]===d&&delete f[e.group],m=void 0}}function ee(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},u=[a(D,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:U.value})];return F.value===!0&&(Object.assign(t,{tabindex:0,...Q.value,onClick:B,onKeyup:W}),u.unshift(a("div",{ref:x,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),a(T,t,()=>u)}function te(){let t;return n.header!==void 0?t=[].concat(n.header(J.value)):(t=[a(T,()=>[a(w,{lines:e.labelLines},()=>e.label||""),e.caption?a(w,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](a(T,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>a(D,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](ee()),t}function ae(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:r.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return K.value===!0&&(t.clickable=!0,t.onClick=z,Object.assign(t,I.value===!0?Y.value:Q.value)),a(V,t,te)}function ne(){return _e(a("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:R.value,id:_},Ie(n.default)),[[Se,o.value]])}function oe(){const t=[ae(),a(Le,{duration:e.duration,onShow:X,onHide:Z},ne)];return e.expandSeparator===!0&&t.push(a(O,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),a(O,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),t}return e.group!==void 0&&p(),be(()=>{m!==void 0&&m()}),()=>a("div",{class:$.value},[a("div",{class:"q-expansion-item__container relative-position"},oe())])}}),Qe={__name:"GoalListItem",props:{goal:{type:Object,required:!0}},setup(e){const n=e,s={name:"goal",params:{id:n.goal.id}},g=l(()=>n.goal.children&&n.goal.children.length),r=l(()=>n.goal.planned?ye.formatDate(n.goal.planned,"ddd MMM DD YYYY"):null);return(o,x)=>{const _=Te("GoalListItem",!0);return b(g)?(c(),h(Ce,{key:0,to:s,label:e.goal.name,caption:b(r),"content-inset-level":.5,"default-opened":"","expand-icon-toggle":"","expand-icon":"keyboard_arrow_right","expanded-icon":"keyboard_arrow_down"},{default:i(()=>[v(P,null,{default:i(()=>[(c(!0),M(j,null,H(e.goal.children,S=>(c(),h(_,{key:S.id,goal:S},null,8,["goal"]))),128))]),_:1})]),_:1},8,["label","caption","content-inset-level"])):(c(),h(V,{key:1,to:s},{default:i(()=>[v(T,null,{default:i(()=>[v(w,null,{default:i(()=>[q(G(e.goal.name),1)]),_:1}),v(w,{caption:""},{default:i(()=>[q(G(b(r)),1)]),_:1})]),_:1})]),_:1}))}}},Ee={__name:"GoalsView",setup(e){const n=ue();return(s,g)=>(c(),h(de,{padding:""},{default:i(()=>[v(re,null,{default:i(()=>[v(ie,null,{default:i(()=>[q("Goals")]),_:1})]),_:1}),b(n).tree?(c(),h(P,{key:0},{default:i(()=>[(c(!0),M(j,null,H(b(n).tree,r=>(c(),h(Qe,{key:r.id,goal:r},null,8,["goal"]))),128))]),_:1})):we("",!0)]),_:1}))}};export{Ee as default};
