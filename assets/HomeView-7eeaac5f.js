import{u as Ue,a as We,b as Ye}from"./use-dark-d5154cc2.js";import{c as J,g as je,H as Xe,a2 as pe,j as O,h as w,G as B,Q as _,R as M,S as T,T as I,V as ee,a1 as te,a3 as ze,r as ye,a4 as be,Z as k,W as F,a0 as q,Y as ne,X as re,m as Ze,a5 as Ke,i as de,a6 as Ge,F as Je,d as et,e as z,k as tt,$ as K,U as $,_ as nt,a7 as Z,E as rt,a8 as at}from"./index-7c8e07cb.js";import{Q as it}from"./QSlideTransition-083bafaa.js";import{u as Se,a as V,d as ot,M as st}from"./MainPage-22d8efe5.js";import{Q as lt,a as ut}from"./QTree-daca805d.js";import{a as Q,b as Ee,Q as ct}from"./QItemLabel-32ce147c.js";import{Q as dt,_ as G}from"./ProgressLabel-65d5a058.js";import"./format-8c778330.js";import"./use-form-7e83eb5e.js";import"./use-model-toggle-851ecf97.js";import"./uid-6a237b22.js";const ht=J({name:"QTimeline",props:{...Ue,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},layout:{type:String,default:"dense",validator:r=>["dense","comfortable","loose"].includes(r)}},setup(r,{slots:a}){const u=je(),o=We(r,u.proxy.$q);Xe(pe,r);const e=O(()=>`q-timeline q-timeline--${r.layout} q-timeline--${r.layout}--${r.side}`+(o.value===!0?" q-timeline--dark":""));return()=>w("ul",{class:e.value},B(a.default))}}),he={__name:"SupportPaneItem",props:{label:{type:String,required:!0}},setup(r){return(a,u)=>(_(),M(dt,{"default-opened":"","hide-expand-icon":""},{header:T(()=>[I(Q,null,{default:T(()=>[I(Ee,{overline:"",class:"q-px-sm text-uppercase"},{default:T(()=>[ee(te(r.label),1)]),_:1})]),_:1})]),default:T(()=>[ze(a.$slots,"default")]),_:3}))}},ft={class:"q-pl-xs q-pr-lg"},mt={__name:"GoalTree",setup(r){const a=Se(),u=ye(null);function o(e,i){e.push({name:"goal",params:{id:i}})}return(e,i)=>(_(),M(lt,{selected:u.value,"onUpdate:selected":[i[0]||(i[0]=s=>u.value=s),i[3]||(i[3]=s=>o(e.$router,s))],ticked:k(a).treeTicked,"onUpdate:ticked":i[1]||(i[1]=s=>k(a).treeTicked=s),expanded:k(a).treeExpanded,"onUpdate:expanded":i[2]||(i[2]=s=>k(a).treeExpanded=s),"tick-strategy":"strict",nodes:k(a).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","selected-color":"primary"},{"default-header":T(s=>[be("div",ft,te(s.node.name),1)]),_:1},8,["selected","ticked","expanded","nodes"]))}},gt={__name:"ReportPane",props:{item:{type:Object,required:!0}},setup(r){return(a,u)=>(_(),F("div",null,[r.item.target>0?(_(),M(G,{key:0,value:r.item.performance/r.item.target,label:r.item.performance+" of "+r.item.target,color:"positive","label-icon":"event",caption:""},null,8,["value","label"])):q("",!0),r.item.rperformance!==null?(_(),M(G,{key:1,value:r.item.rperformance/r.item.rtarget,label:(r.item.rperformance/r.item.rtarget*100).toFixed(2)+"% for "+r.item.rtarget,color:"primary","label-icon":"event_repeat",caption:""},null,8,["value","label"])):q("",!0)]))}},vt={class:"q-pt-sm q-pb-lg q-px-lg q-gutter-md"},_t={__name:"SupportPane",setup(r){const a=V(),u=Se(),o=[{label:"Past done",icon:"event_available",target:"pastDone"},{label:"Past recurring",icon:"free_cancellation",target:"pastRecurring"}];return(e,i)=>(_(),F("div",null,[k(a).calendar?(_(),M(he,{key:0,label:"Show"},{default:T(()=>[be("div",vt,[(_(),F(ne,null,re(o,(s,l)=>I(ut,{key:l,modelValue:k(a).filter[s.target],"onUpdate:modelValue":c=>k(a).filter[s.target]=c,label:s.label,dense:""},null,8,["modelValue","onUpdate:modelValue","label"])),64))])]),_:1})):q("",!0),k(u).tree?(_(),M(he,{key:1,label:"Filter by goal"},{default:T(()=>[I(mt,{class:"q-pb-lg"})]),_:1})):q("",!0),k(a).report?(_(),M(gt,{key:2,item:k(a).report,class:"q-pb-lg q-px-lg"},null,8,["item"])):q("",!0)]))}},fe={threshold:0,root:null,rootMargin:"0px"};function me(r,a,u){let o,e,i;typeof u=="function"?(o=u,e=fe,i=a.cfg===void 0):(o=u.handler,e=Object.assign({},fe,u.cfg),i=a.cfg===void 0||Ke(a.cfg,e)===!1),a.handler!==o&&(a.handler=o),i===!0&&(a.cfg=e,a.observer!==void 0&&a.observer.unobserve(r),a.observer=new IntersectionObserver(([s])=>{if(typeof a.handler=="function"){if(s.rootBounds===null&&document.body.contains(r)===!0){a.observer.unobserve(r),a.observer.observe(r);return}(a.handler(s,a.observer)===!1||a.once===!0&&s.isIntersecting===!0)&&De(r)}},e),a.observer.observe(r))}function De(r){const a=r.__qvisible;a!==void 0&&(a.observer!==void 0&&a.observer.unobserve(r),delete r.__qvisible)}const pt=Ze({name:"intersection",mounted(r,{modifiers:a,value:u}){const o={once:a.once===!0};me(r,o,u),r.__qvisible=o},updated(r,a){const u=r.__qvisible;u!==void 0&&me(r,u,a.value)},beforeUnmount:De}),yt=J({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(r,{slots:a,emit:u}){const o=ye(de.value===!0?r.ssrPrerender:!1),e=O(()=>r.root!==void 0||r.margin!==void 0||r.threshold!==void 0?{handler:c,cfg:{root:r.root,rootMargin:r.margin,threshold:r.threshold}}:c),i=O(()=>r.disable!==!0&&(de.value!==!0||r.once!==!0||r.ssrPrerender!==!0)),s=O(()=>[[pt,e.value,void 0,{once:r.once}]]),l=O(()=>`--q-transition-duration: ${r.transitionDuration}ms`);function c(E){o.value!==E.isIntersecting&&(o.value=E.isIntersecting,r.onVisibility!==void 0&&u("visibility",o.value))}function d(){if(o.value===!0)return[w("div",{key:"content",style:l.value},B(a.default))];if(a.hidden!==void 0)return[w("div",{key:"hidden",style:l.value},a.hidden())]}return()=>{const E=r.transition?[w(Ge,{name:"q-transition--"+r.transition},d)]:d();return Je(r.tag,{class:"q-intersection"},E,"main",i.value,()=>s.value)}}}),bt=J({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:r=>["left","right"].includes(r)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(r,{slots:a}){const u=et(pe,z);if(u===z)return console.error("QTimelineEntry needs to be child of QTimeline"),z;const o=O(()=>`q-timeline__entry q-timeline__entry--${r.side}`+(r.icon!==void 0||r.avatar!==void 0?" q-timeline__entry--icon":"")),e=O(()=>`q-timeline__dot text-${r.color||u.color}`),i=O(()=>u.layout==="comfortable"&&u.side==="left");return()=>{const s=tt(a.default,[]);if(r.body!==void 0&&s.unshift(r.body),r.heading===!0){const d=[w("div"),w("div"),w(r.tag,{class:"q-timeline__heading-title"},s)];return w("div",{class:"q-timeline__heading"},i.value===!0?d.reverse():d)}let l;r.icon!==void 0?l=[w(K,{class:"row items-center justify-center",name:r.icon})]:r.avatar!==void 0&&(l=[w("img",{class:"q-timeline__dot-img",src:r.avatar})]);const c=[w("div",{class:"q-timeline__subtitle"},[w("span",{},B(a.subtitle,[r.subtitle]))]),w("div",{class:e.value},l),w("div",{class:"q-timeline__content"},[w("h6",{class:"q-timeline__title"},B(a.title,[r.title]))].concat(s))];return w("li",{class:o.value},i.value===!0?c.reverse():c)}}});var ae={};(function r(a,u,o,e){var i=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL);function s(){}function l(n){var t=u.exports.Promise,g=t!==void 0?t:a.Promise;return typeof g=="function"?new g(n):(n(s,s),null)}var c=function(){var n=Math.floor(16.666666666666668),t,g,h={},p=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(v){var f=Math.random();return h[f]=requestAnimationFrame(function m(S){p===S||p+n-1<S?(p=S,delete h[f],v()):h[f]=requestAnimationFrame(m)}),f},g=function(v){h[v]&&cancelAnimationFrame(h[v])}):(t=function(v){return setTimeout(v,n)},g=function(v){return clearTimeout(v)}),{frame:t,cancel:g}}(),d=function(){var n,t,g={};function h(p){function v(f,m){p.postMessage({options:f||{},callback:m})}p.init=function(m){var S=m.transferControlToOffscreen();p.postMessage({canvas:S},[S])},p.fire=function(m,S,x){if(t)return v(m,null),t;var y=Math.random().toString(36).slice(2);return t=l(function(C){function P(b){b.data.callback===y&&(delete g[y],p.removeEventListener("message",P),t=null,x(),C())}p.addEventListener("message",P),v(m,y),g[y]=P.bind(null,{data:{callback:y}})}),t},p.reset=function(){p.postMessage({reset:!0});for(var m in g)g[m](),delete g[m]}}return function(){if(n)return n;if(!o&&i){var p=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{n=new Worker(URL.createObjectURL(new Blob([p])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",v),null}h(n)}return n}}(),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function R(n,t){return t?t(n):n}function Me(n){return n!=null}function D(n,t,g){return R(n&&Me(n[t])?n[t]:E[t],g)}function Te(n){return n<0?0:Math.floor(n)}function we(n,t){return Math.floor(Math.random()*(t-n))+n}function U(n){return parseInt(n,16)}function ke(n){return n.map(Ie)}function Ie(n){var t=String(n).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:U(t.substring(0,2)),g:U(t.substring(2,4)),b:U(t.substring(4,6))}}function Pe(n){var t=D(n,"origin",Object);return t.x=D(t,"x",Number),t.y=D(t,"y",Number),t}function Ce(n){n.width=document.documentElement.clientWidth,n.height=document.documentElement.clientHeight}function Oe(n){var t=n.getBoundingClientRect();n.width=t.width,n.height=t.height}function xe(n){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=n,t}function qe(n,t,g,h,p,v,f,m,S){n.save(),n.translate(t,g),n.rotate(v),n.scale(h,p),n.arc(0,0,1,f,m,S),n.restore()}function Re(n){var t=n.angle*(Math.PI/180),g=n.spread*(Math.PI/180);return{x:n.x,y:n.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:n.startVelocity*.5+Math.random()*n.startVelocity,angle2D:-t+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:n.color,shape:n.shape,tick:0,totalTicks:n.ticks,decay:n.decay,drift:n.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:n.gravity*3,ovalScalar:.6,scalar:n.scalar}}function He(n,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var g=t.tick++/t.totalTicks,h=t.x+t.random*t.tiltCos,p=t.y+t.random*t.tiltSin,v=t.wobbleX+t.random*t.tiltCos,f=t.wobbleY+t.random*t.tiltSin;if(n.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-g)+")",n.beginPath(),t.shape==="circle")n.ellipse?n.ellipse(t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):qe(n,t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var m=Math.PI/2*3,S=4*t.scalar,x=8*t.scalar,y=t.x,C=t.y,P=5,b=Math.PI/P;P--;)y=t.x+Math.cos(m)*x,C=t.y+Math.sin(m)*x,n.lineTo(y,C),m+=b,y=t.x+Math.cos(m)*S,C=t.y+Math.sin(m)*S,n.lineTo(y,C),m+=b;else n.moveTo(Math.floor(t.x),Math.floor(t.y)),n.lineTo(Math.floor(t.wobbleX),Math.floor(p)),n.lineTo(Math.floor(v),Math.floor(f)),n.lineTo(Math.floor(h),Math.floor(t.wobbleY));return n.closePath(),n.fill(),t.tick<t.totalTicks}function Le(n,t,g,h,p){var v=t.slice(),f=n.getContext("2d"),m,S,x=l(function(y){function C(){m=S=null,f.clearRect(0,0,h.width,h.height),p(),y()}function P(){o&&!(h.width===e.width&&h.height===e.height)&&(h.width=n.width=e.width,h.height=n.height=e.height),!h.width&&!h.height&&(g(n),h.width=n.width,h.height=n.height),f.clearRect(0,0,h.width,h.height),v=v.filter(function(b){return He(f,b)}),v.length?m=c.frame(P):C()}m=c.frame(P),S=C});return{addFettis:function(y){return v=v.concat(y),x},canvas:n,promise:x,reset:function(){m&&c.cancel(m),S&&S()}}}function ie(n,t){var g=!n,h=!!D(t||{},"resize"),p=D(t,"disableForReducedMotion",Boolean),v=i&&!!D(t||{},"useWorker"),f=v?d():null,m=g?Ce:Oe,S=n&&f?!!n.__confetti_initialized:!1,x=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,y;function C(b,Y,j){for(var L=D(b,"particleCount",Te),A=D(b,"angle",Number),N=D(b,"spread",Number),H=D(b,"startVelocity",Number),Fe=D(b,"decay",Number),Ae=D(b,"gravity",Number),Ne=D(b,"drift",Number),se=D(b,"colors",ke),$e=D(b,"ticks",Number),le=D(b,"shapes"),Qe=D(b,"scalar"),ue=Pe(b),ce=L,X=[],Be=n.width*ue.x,Ve=n.height*ue.y;ce--;)X.push(Re({x:Be,y:Ve,angle:A,spread:N,startVelocity:H,color:se[ce%se.length],shape:le[we(0,le.length)],ticks:$e,decay:Fe,gravity:Ae,drift:Ne,scalar:Qe}));return y?y.addFettis(X):(y=Le(n,X,m,Y,j),y.promise)}function P(b){var Y=p||D(b,"disableForReducedMotion",Boolean),j=D(b,"zIndex",Number);if(Y&&x)return l(function(H){H()});g&&y?n=y.canvas:g&&!n&&(n=xe(j),document.body.appendChild(n)),h&&!S&&m(n);var L={width:n.width,height:n.height};f&&!S&&f.init(n),S=!0,f&&(n.__confetti_initialized=!0);function A(){if(f){var H={getBoundingClientRect:function(){if(!g)return n.getBoundingClientRect()}};m(H),f.postMessage({resize:{width:H.width,height:H.height}});return}L.width=L.height=null}function N(){y=null,h&&a.removeEventListener("resize",A),g&&n&&(document.body.removeChild(n),n=null,S=!1)}return h&&a.addEventListener("resize",A,!1),f?f.fire(b,L,N):C(b,L,N)}return P.reset=function(){f&&f.reset(),y&&y.reset()},P}var W;function oe(){return W||(W=ie(null,{useWorker:!0,resize:!0})),W}u.exports=function(){return oe().apply(this,arguments)},u.exports.reset=function(){oe().reset()},u.exports.create=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ae,!1);const ge=ae.exports;ae.exports.create;function ve(){var r=3e3,a=Date.now()+r,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function o(i,s){return Math.random()*(s-i)+i}var e=setInterval(function(){var i=a-Date.now();if(i<=0)return clearInterval(e);var s=100*(i/r);ge(Object.assign({},u,{particleCount:s,origin:{x:o(.1,.3),y:Math.random()-.2}})),ge(Object.assign({},u,{particleCount:s,origin:{x:o(.7,.9),y:Math.random()-.2}}))},250)}const St={__name:"TaskListItem",props:{item:{type:Object,required:!0}},emits:["ondragstart"],setup(r){const a=r,u=V(),o=O(()=>a.item.target>1&&!a.item.done),e=O(()=>!a.item.performance_history||!a.item.performance_history.length?null:ot.formatDate(a.item.performance_history[0].updated,"DD.MM.YYYY HH:mm"));function i(d,E){d.push({name:"task",params:{id:E}})}function s(){const d={done:null};a.item.performance>=a.item.target&&(d.performance=a.item.target-1),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}function l(){const d={performance:a.item.performance+1};d.performance>=a.item.target&&ve(),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}function c(){const d={done:new Date().toISOString()};ve(),u.updateItem(a.item.id+"/",d).then(()=>u.refetch())}return(d,E)=>(_(),M(ct,{clickable:"",active:!!r.item.done,"active-class":"text-positive"},{default:T(()=>[I(Q,{side:""},{default:T(()=>[r.item.group_id?(_(),M(K,{key:0,name:"event_repeat"})):(_(),M(K,{key:1,name:"drag_indicator",style:{cursor:"grab"},draggable:"true",onDragstart:E[0]||(E[0]=R=>d.$emit("ondragstart",R,r.item)),"onTouchmove:native":E[1]||(E[1]=R=>{})}))]),_:1}),I(Q,{class:"q-pl-sm",onClick:E[2]||(E[2]=R=>i(d.$router,r.item.id))},{default:T(()=>[I(Ee,null,{default:T(()=>[ee(te(r.item.name),1)]),_:1}),o.value?(_(),M(G,{key:0,value:r.item.performance/r.item.target,label:r.item.performance+" of "+r.item.target,hint:e.value,color:"positive","label-icon":"track_changes","hint-icon":"update",caption:"",class:"q-mb-xs"},null,8,["value","label","hint"])):q("",!0)]),_:1}),I(Q,{side:""},{default:T(()=>[r.item.done?(_(),M($,{key:0,flat:"",round:"",dense:"",icon:"check_box",color:"positive",onClick:s})):o.value?(_(),M($,{key:1,flat:"",round:"",dense:"",icon:"plus_one",onClick:l})):(_(),M($,{key:2,flat:"",round:"",dense:"",icon:"check_box_outline_blank",onClick:c}))]),_:1})]),_:1},8,["active"]))}};var _e;(function(r){var a=function(){function o(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(o.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),o.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},o.prototype.getData=function(e){return this._data[e]||""},o.prototype.setData=function(e,i){this._data[e]=i},o.prototype.setDragImage=function(e,i,s){var l=u._instance;l._imgCustom=e,l._imgOffset={x:i,y:s}},o}();r.DataTransfer=a;var u=function(){function o(){if(this._lastClick=0,o._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var i=document,s=this._touchstart.bind(this),l=this._touchmove.bind(this),c=this._touchend.bind(this),d=e?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",s,d),i.addEventListener("touchmove",l,d),i.addEventListener("touchend",c),i.addEventListener("touchcancel",c)}}return o.getInstance=function(){return o._instance},o.prototype._touchstart=function(e){var i=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<o._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var s=this._closestDraggable(e.target);s&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=s,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){i._dragSource==s&&i._img==null&&i._dispatchEvent(e,"contextmenu",s)&&i._reset()},o._CTXMENU),o._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(e)},o._PRESSHOLDAWAIT)))}},o.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var i=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",i)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",i)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",i),this._lastTarget=i),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",i))}},o.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},o.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},o.prototype._shouldHandleMove=function(e){return!o._ISPRESSHOLDMODE&&this._shouldHandle(e)},o.prototype._shouldHandlePressHoldMove=function(e){return o._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},o.prototype._shouldCancelPressHoldMove=function(e){return o._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>o._PRESSHOLDMARGIN},o.prototype._shouldStartDragging=function(e){var i=this._getDelta(e);return i>o._THRESHOLD||o._ISPRESSHOLDMODE&&i>=o._PRESSHOLDTHRESHOLD},o.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new a,clearInterval(this._pressHoldInterval)},o.prototype._getPoint=function(e,i){return e&&e.touches&&(e=e.touches[0]),{x:i?e.pageX:e.clientX,y:i?e.pageY:e.clientY}},o.prototype._getDelta=function(e){if(o._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(e);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},o.prototype._getTarget=function(e){for(var i=this._getPoint(e),s=document.elementFromPoint(i.x,i.y);s&&getComputedStyle(s).pointerEvents=="none";)s=s.parentElement;return s},o.prototype._createImage=function(e){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var s=i.getBoundingClientRect(),l=this._getPoint(e);this._imgOffset={x:l.x-s.left,y:l.y-s.top},this._img.style.opacity=o._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},o.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},o.prototype._moveImage=function(e){var i=this;requestAnimationFrame(function(){if(i._img){var s=i._getPoint(e,!0),l=i._img.style;l.position="absolute",l.pointerEvents="none",l.zIndex="999999",l.left=Math.round(s.x-i._imgOffset.x)+"px",l.top=Math.round(s.y-i._imgOffset.y)+"px"}})},o.prototype._copyProps=function(e,i,s){for(var l=0;l<s.length;l++){var c=s[l];e[c]=i[c]}},o.prototype._copyStyle=function(e,i){if(o._rmvAtts.forEach(function(R){i.removeAttribute(R)}),e instanceof HTMLCanvasElement){var s=e,l=i;l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0)}for(var c=getComputedStyle(e),d=0;d<c.length;d++){var E=c[d];E.indexOf("transition")<0&&(i.style[E]=c[E])}i.style.pointerEvents="none";for(var d=0;d<e.children.length;d++)this._copyStyle(e.children[d],i.children[d])},o.prototype._dispatchEvent=function(e,i,s){if(e&&s){var l=document.createEvent("Event"),c=e.touches?e.touches[0]:e;return l.initEvent(i,!0,!0),l.button=0,l.which=l.buttons=1,this._copyProps(l,e,o._kbdProps),this._copyProps(l,c,o._ptProps),l.dataTransfer=this._dataTransfer,s.dispatchEvent(l),l.defaultPrevented}return!1},o.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},o}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),r.DragDropTouch=u})(_e||(_e={}));const Et={key:0},Dt={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0},monday:{type:String,required:!0}},setup(r){const a=r,u=V(),o=O(()=>a.week.tasks.length?[...a.week.tasks].sort((s,l)=>l.target-s.target):null);function e(s,l){const c={id:l.id,planned:l.planned,monday:a.monday};s.dataTransfer.setData("text",JSON.stringify(c)),s.dataTransfer.dropEffect="move"}function i(s){const l=JSON.parse(s.dataTransfer.getData("text"));l.monday!==a.monday&&u.moveItem(l,a.monday)}return(s,l)=>(_(),M(bt,{subtitle:r.week.title,color:r.week.current?"orange":"primary",icon:r.week.start?"calendar_month":void 0,onDragover:l[0]||(l[0]=Z(()=>{},["prevent"])),onDragenter:l[1]||(l[1]=Z(()=>{},["prevent"])),onDrop:l[2]||(l[2]=Z(c=>i(c),["prevent"]))},{default:T(()=>[o.value?(_(),F("div",Et,[(_(!0),F(ne,null,re(o.value,c=>(_(),M(yt,{key:c.id,class:"min-h n-ml",once:""},{default:T(()=>[I(St,{item:c,onOndragstart:e},null,8,["item"])]),_:2},1024))),128))])):q("",!0)]),_:1},8,["subtitle","color","icon"]))}},Mt=nt(Dt,[["__scopeId","data-v-3ea8b568"]]),Lt={__name:"HomeView",setup(r){const a=V();return(u,o)=>(_(),M(st,null,{toolbar:T(()=>[I(Ye,null,{default:T(()=>[ee("Tasks")]),_:1}),I($,{flat:"",round:"",icon:"filter_list",onClick:o[0]||(o[0]=e=>k(a).filter.show=!k(a).filter.show)})]),default:T(()=>[I(it,null,{default:T(()=>[rt(I(_t,null,null,512),[[at,k(a).filter.show]])]),_:1}),k(a).calendar?(_(),M(ht,{key:0,class:"q-mt-sm q-pl-lg"},{default:T(()=>[(_(!0),F(ne,null,re(k(a).calendar,(e,i)=>(_(),M(Mt,{key:i,week:e,monday:i},null,8,["week","monday"]))),128))]),_:1})):q("",!0)]),_:1}))}};export{Lt as default};
