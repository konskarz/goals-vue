import{Q as Ae,b as Ne}from"./use-dark-f08bceb6.js";import{Q as b,X as x,R as P,a2 as R,a0 as A,Y as U,r as ve,U as M,S as T,W as N,a3 as ue,a1 as k,$ as Y,m as Be,a5 as Ve,c as We,i as ce,j as q,h as G,T as Qe,F as Ye,G as Ue,Z as je,V as Q,_ as Xe,a4 as $e,a6 as J,E as ze,a7 as Ze}from"./index-07676756.js";import{Q as Ke}from"./QSlideTransition-b8eed43c.js";import{u as j,a as Ge,d as Je}from"./TaskStore-a4fabcab.js";import{b as B,a as ee,Q as et}from"./QItemLabel-e793a73b.js";import{Q as tt,a as rt}from"./QTree-fb351775.js";import{_ as te}from"./ProgressLabel-60917c59.js";import{_ as nt}from"./HeatmapLabel-2fdb4ccd.js";import"./format-8c778330.js";import"./use-form-827e4009.js";const at={__name:"ReportPane",props:{item:{type:Object,required:!0},showSeries:{type:Boolean,default:!1}},setup(o){return(a,u)=>(b(),x("div",null,[o.item.target>0?(b(),P(te,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,color:"positive","label-icon":"event",caption:""},null,8,["value","label"])):R("",!0),o.item.rperformance!==null?(b(),P(te,{key:1,value:o.item.rperformance/o.item.rtarget,label:(o.item.rperformance/o.item.rtarget*100).toFixed(2)+"% for "+o.item.rtarget,color:"primary","label-icon":"event_repeat",caption:""},null,8,["value","label"])):R("",!0),o.showSeries&&o.item.series?(b(!0),x(A,{key:2},U(o.item.series,(n,e)=>(b(),P(nt,{key:e,series:[{name:e,data:n}],height:26,label:e,caption:"",class:"q-pt-sm"},null,8,["series","label"]))),128)):R("",!0)]))}},it={class:"q-pt-sm q-pb-md q-px-lg q-gutter-sm"},ot={class:"q-pl-xs q-pr-lg"},st={__name:"SupportPane",setup(o){const a=j(),u=Ge(),n=[{label:"Past done",icon:"event_available",target:"pastDone"},{label:"Past recurring",icon:"free_cancellation",target:"pastRecurring"},{label:"Future recurring",icon:"date_range",target:"futureRecurring"},{label:"Empty weeks",icon:"calendar_today",target:"emptyWeeks"}],e=ve(null);function i(l,s){l.push({name:"goal",params:{id:s}})}return(l,s)=>(b(),x("div",null,[M(B,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:T(()=>[N("Show")]),_:1}),ue("div",it,[(b(),x(A,null,U(n,(c,h)=>M(tt,{key:h,modelValue:k(a).filter[c.target],"onUpdate:modelValue":p=>k(a).filter[c.target]=p,label:c.label,dense:"",class:"q-mb-xs q-mr-xs"},null,8,["modelValue","onUpdate:modelValue","label"])),64))]),k(u).tree?(b(),x(A,{key:0},[M(B,{overline:"",class:"q-py-sm q-px-lg text-uppercase"},{default:T(()=>[N("Filter by goal")]),_:1}),M(rt,{selected:e.value,"onUpdate:selected":[s[0]||(s[0]=c=>e.value=c),s[3]||(s[3]=c=>i(l.$router,c))],ticked:k(u).treeTicked,"onUpdate:ticked":s[1]||(s[1]=c=>k(u).treeTicked=c),expanded:k(u).treeExpanded,"onUpdate:expanded":s[2]||(s[2]=c=>k(u).treeExpanded=c),"tick-strategy":"strict",nodes:k(u).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","selected-color":"primary",class:"q-pb-lg"},{"default-header":T(c=>[ue("div",ot,Y(c.node.name),1)]),_:1},8,["selected","ticked","expanded","nodes"])],64)):R("",!0),k(a).report?(b(),P(at,{key:1,item:k(a).report,"show-series":!1,class:"q-pb-lg q-px-lg"},null,8,["item"])):R("",!0)]))}},de={threshold:0,root:null,rootMargin:"0px"};function he(o,a,u){let n,e,i;typeof u=="function"?(n=u,e=de,i=a.cfg===void 0):(n=u.handler,e=Object.assign({},de,u.cfg),i=a.cfg===void 0||Ve(a.cfg,e)===!1),a.handler!==n&&(a.handler=n),i===!0&&(a.cfg=e,a.observer!==void 0&&a.observer.unobserve(o),a.observer=new IntersectionObserver(([l])=>{if(typeof a.handler=="function"){if(l.rootBounds===null&&document.body.contains(o)===!0){a.observer.unobserve(o),a.observer.observe(o);return}(a.handler(l,a.observer)===!1||a.once===!0&&l.isIntersecting===!0)&&pe(o)}},e),a.observer.observe(o))}function pe(o){const a=o.__qvisible;a!==void 0&&(a.observer!==void 0&&a.observer.unobserve(o),delete o.__qvisible)}const lt=Be({name:"intersection",mounted(o,{modifiers:a,value:u}){const n={once:a.once===!0};he(o,n,u),o.__qvisible=n},updated(o,a){const u=o.__qvisible;u!==void 0&&he(o,u,a.value)},beforeUnmount:pe}),ut=We({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(o,{slots:a,emit:u}){const n=ve(ce.value===!0?o.ssrPrerender:!1),e=q(()=>o.root!==void 0||o.margin!==void 0||o.threshold!==void 0?{handler:c,cfg:{root:o.root,rootMargin:o.margin,threshold:o.threshold}}:c),i=q(()=>o.disable!==!0&&(ce.value!==!0||o.once!==!0||o.ssrPrerender!==!0)),l=q(()=>[[lt,e.value,void 0,{once:o.once}]]),s=q(()=>`--q-transition-duration: ${o.transitionDuration}ms`);function c(p){n.value!==p.isIntersecting&&(n.value=p.isIntersecting,o.onVisibility!==void 0&&u("visibility",n.value))}function h(){if(n.value===!0)return[G("div",{key:"content",style:s.value},Ue(a.default))];if(a.hidden!==void 0)return[G("div",{key:"hidden",style:s.value},a.hidden())]}return()=>{const p=o.transition?[G(Qe,{name:"q-transition--"+o.transition},h)]:h();return Ye(o.tag,{class:"q-intersection"},p,"main",i.value,()=>l.value)}}});var re={};(function o(a,u,n,e){var i=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL);function l(){}function s(r){var t=u.exports.Promise,m=t!==void 0?t:a.Promise;return typeof m=="function"?new m(r):(r(l,l),null)}var c=function(){var r=Math.floor(16.666666666666668),t,m,f={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(g){var _=Math.random();return f[_]=requestAnimationFrame(function d(y){v===y||v+r-1<y?(v=y,delete f[_],g()):f[_]=requestAnimationFrame(d)}),_},m=function(g){f[g]&&cancelAnimationFrame(f[g])}):(t=function(g){return setTimeout(g,r)},m=function(g){return clearTimeout(g)}),{frame:t,cancel:m}}(),h=function(){var r,t,m={};function f(v){function g(_,d){v.postMessage({options:_||{},callback:d})}v.init=function(d){var y=d.transferControlToOffscreen();v.postMessage({canvas:y},[y])},v.fire=function(d,y,I){if(t)return g(d,null),t;var w=Math.random().toString(36).slice(2);return t=s(function(D){function C(O){O.data.callback===w&&(delete m[w],v.removeEventListener("message",C),t=null,I(),D())}v.addEventListener("message",C),g(d,w),m[w]=C.bind(null,{data:{callback:w}})}),t},v.reset=function(){v.postMessage({reset:!0});for(var d in m)m[d](),delete m[d]}}return function(){if(r)return r;if(!n&&i){var v=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([v])))}catch(g){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",g),null}f(r)}return r}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(r,t){return t?t(r):r}function _e(r){return r!=null}function E(r,t,m){return L(r&&_e(r[t])?r[t]:p[t],m)}function ye(r){return r<0?0:Math.floor(r)}function be(r,t){return Math.floor(Math.random()*(t-r))+r}function X(r){return parseInt(r,16)}function Ee(r){return r.map(De)}function De(r){var t=String(r).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:X(t.substring(0,2)),g:X(t.substring(2,4)),b:X(t.substring(4,6))}}function Se(r){var t=E(r,"origin",Object);return t.x=E(t,"x",Number),t.y=E(t,"y",Number),t}function we(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function Me(r){var t=r.getBoundingClientRect();r.width=t.width,r.height=t.height}function ke(r){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=r,t}function Te(r,t,m,f,v,g,_,d,y){r.save(),r.translate(t,m),r.rotate(g),r.scale(f,v),r.arc(0,0,1,_,d,y),r.restore()}function Ie(r){var t=r.angle*(Math.PI/180),m=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-t+(.5*m-Math.random()*m),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar}}function Pe(r,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var m=t.tick++/t.totalTicks,f=t.x+t.random*t.tiltCos,v=t.y+t.random*t.tiltSin,g=t.wobbleX+t.random*t.tiltCos,_=t.wobbleY+t.random*t.tiltSin;if(r.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-m)+")",r.beginPath(),t.shape==="circle")r.ellipse?r.ellipse(t.x,t.y,Math.abs(g-f)*t.ovalScalar,Math.abs(_-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Te(r,t.x,t.y,Math.abs(g-f)*t.ovalScalar,Math.abs(_-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var d=Math.PI/2*3,y=4*t.scalar,I=8*t.scalar,w=t.x,D=t.y,C=5,O=Math.PI/C;C--;)w=t.x+Math.cos(d)*I,D=t.y+Math.sin(d)*I,r.lineTo(w,D),d+=O,w=t.x+Math.cos(d)*y,D=t.y+Math.sin(d)*y,r.lineTo(w,D),d+=O;else r.moveTo(Math.floor(t.x),Math.floor(t.y)),r.lineTo(Math.floor(t.wobbleX),Math.floor(v)),r.lineTo(Math.floor(g),Math.floor(_)),r.lineTo(Math.floor(f),Math.floor(t.wobbleY));return r.closePath(),r.fill(),t.tick<t.totalTicks}function Ce(r,t,m,f,v){var g=t.slice(),_=r.getContext("2d"),d,y,I=s(function(w){function D(){d=y=null,_.clearRect(0,0,f.width,f.height),v(),w()}function C(){n&&!(f.width===e.width&&f.height===e.height)&&(f.width=r.width=e.width,f.height=r.height=e.height),!f.width&&!f.height&&(m(r),f.width=r.width,f.height=r.height),_.clearRect(0,0,f.width,f.height),g=g.filter(function(O){return Pe(_,O)}),g.length?d=c.frame(C):D()}d=c.frame(C),y=D});return{addFettis:function(w){return g=g.concat(w),I},canvas:r,promise:I,reset:function(){d&&c.cancel(d),y&&y()}}}function ne(r,t){var m=!r,f=!!E(t||{},"resize"),v=!1,g=E(t,"disableForReducedMotion",Boolean),_=i&&!!E(t||{},"useWorker"),d=_?h():null,y=m?we:Me,I=r&&d?!!r.__confetti_initialized:!1,w=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,D;function C(S,z,Z){for(var F=E(S,"particleCount",ye),V=E(S,"angle",Number),W=E(S,"spread",Number),H=E(S,"startVelocity",Number),Oe=E(S,"decay",Number),xe=E(S,"gravity",Number),Re=E(S,"drift",Number),ie=E(S,"colors",Ee),Le=E(S,"ticks",Number),oe=E(S,"shapes"),He=E(S,"scalar"),se=Se(S),le=F,K=[],qe=r.width*se.x,Fe=r.height*se.y;le--;)K.push(Ie({x:qe,y:Fe,angle:V,spread:W,startVelocity:H,color:ie[le%ie.length],shape:oe[be(0,oe.length)],ticks:Le,decay:Oe,gravity:xe,drift:Re,scalar:He}));return D?D.addFettis(K):(D=Ce(r,K,y,z,Z),D.promise)}function O(S){var z=g||E(S,"disableForReducedMotion",Boolean),Z=E(S,"zIndex",Number);if(z&&w)return s(function(H){H()});m&&D?r=D.canvas:m&&!r&&(r=ke(Z),document.body.appendChild(r)),f&&!I&&y(r);var F={width:r.width,height:r.height};d&&!I&&d.init(r),I=!0,d&&(r.__confetti_initialized=!0);function V(){if(d){var H={getBoundingClientRect:function(){if(!m)return r.getBoundingClientRect()}};y(H),d.postMessage({resize:{width:H.width,height:H.height}});return}F.width=F.height=null}function W(){D=null,f&&(v=!1,a.removeEventListener("resize",V)),m&&r&&(document.body.removeChild(r),r=null,I=!1)}return f&&!v&&(v=!0,a.addEventListener("resize",V,!1)),d?d.fire(S,F,W):C(S,F,W)}return O.reset=function(){d&&d.reset(),D&&D.reset()},O}var $;function ae(){return $||($=ne(null,{useWorker:!0,resize:!0})),$}u.exports=function(){return ae().apply(this,arguments)},u.exports.reset=function(){ae().reset()},u.exports.create=ne})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),re,!1);const fe=re.exports;re.exports.create;function me(){var o=3e3,a=Date.now()+o,u={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function n(i,l){return Math.random()*(l-i)+i}var e=setInterval(function(){var i=a-Date.now();if(i<=0)return clearInterval(e);var l=100*(i/o);fe(Object.assign({},u,{particleCount:l,origin:{x:n(.1,.3),y:Math.random()-.2}})),fe(Object.assign({},u,{particleCount:l,origin:{x:n(.7,.9),y:Math.random()-.2}}))},250)}const ct={__name:"TaskListItem",props:{item:{type:Object,required:!0}},emits:["ondragstart"],setup(o){const a=o,u=j(),n=q(()=>a.item.target>1&&!a.item.done),e=q(()=>!a.item.performance_history||!a.item.performance_history.length?null:Je.formatDate(a.item.performance_history[0].updated,"DD.MM.YYYY HH:mm"));function i(h,p){h.push({name:"task",params:{id:p}})}function l(){const h={done:null};a.item.performance>=a.item.target&&(h.performance=a.item.target-1),u.updateItem(a.item.id+"/",h).then(()=>u.refetch())}function s(){const h={performance:a.item.performance+1};h.performance>=a.item.target&&me(),u.updateItem(a.item.id+"/",h).then(()=>u.refetch())}function c(){const h={done:new Date().toISOString()};me(),u.updateItem(a.item.id+"/",h).then(()=>u.refetch())}return(h,p)=>(b(),P(et,{clickable:"",active:!!o.item.done,"active-class":"text-positive"},{default:T(()=>[M(ee,{side:""},{default:T(()=>[M(je,{name:o.item.group_id?"event_repeat":"event",style:{cursor:"grab"},draggable:"true",onDragstart:p[0]||(p[0]=L=>h.$emit("ondragstart",L,o.item)),"onTouchmove:native":p[1]||(p[1]=L=>{})},null,8,["name"])]),_:1}),M(ee,{class:"q-pl-sm",onClick:p[2]||(p[2]=L=>i(h.$router,o.item.id))},{default:T(()=>[M(B,null,{default:T(()=>[N(Y(o.item.name),1)]),_:1}),n.value?(b(),P(te,{key:0,value:o.item.performance/o.item.target,label:o.item.performance+" of "+o.item.target,hint:e.value,color:"positive","label-icon":"track_changes","hint-icon":"update",caption:"",class:"q-mb-xs"},null,8,["value","label","hint"])):R("",!0)]),_:1}),M(ee,{side:""},{default:T(()=>[o.item.done?(b(),P(Q,{key:0,flat:"",round:"",dense:"",icon:"check_box",color:"positive",onClick:l})):n.value?(b(),P(Q,{key:1,flat:"",round:"",dense:"",icon:"plus_one",onClick:s})):(b(),P(Q,{key:2,flat:"",round:"",dense:"",icon:"check_box_outline_blank",onClick:c}))]),_:1})]),_:1},8,["active"]))}};var ge;(function(o){var a=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,i){this._data[e]=i},n.prototype.setDragImage=function(e,i,l){var s=u._instance;s._imgCustom=e,s._imgOffset={x:i,y:l}},n}();o.DataTransfer=a;var u=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var i=document,l=this._touchstart.bind(this),s=this._touchmove.bind(this),c=this._touchend.bind(this),h=e?{passive:!1,capture:!1}:!1;i.addEventListener("touchstart",l,h),i.addEventListener("touchmove",s,h),i.addEventListener("touchend",c),i.addEventListener("touchcancel",c)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var i=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){i._dragSource==l&&i._img==null&&i._dispatchEvent(e,"contextmenu",l)&&i._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){i._isDragEnabled=!0,i._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var i=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",i)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",i)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),i!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",i),this._lastTarget=i),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",i))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var i=this._getDelta(e);return i>n._THRESHOLD||n._ISPRESSHOLDMODE&&i>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new a,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,i){return e&&e.touches&&(e=e.touches[0]),{x:i?e.pageX:e.clientX,y:i?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var i=this._getPoint(e);return Math.abs(i.x-this._ptDown.x)+Math.abs(i.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var i=this._getPoint(e),l=document.elementFromPoint(i.x,i.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},n.prototype._createImage=function(e){this._img&&this._destroyImage();var i=this._imgCustom||this._dragSource;if(this._img=i.cloneNode(!0),this._copyStyle(i,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=i.getBoundingClientRect(),s=this._getPoint(e);this._imgOffset={x:s.x-l.left,y:s.y-l.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var i=this;requestAnimationFrame(function(){if(i._img){var l=i._getPoint(e,!0),s=i._img.style;s.position="absolute",s.pointerEvents="none",s.zIndex="999999",s.left=Math.round(l.x-i._imgOffset.x)+"px",s.top=Math.round(l.y-i._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,i,l){for(var s=0;s<l.length;s++){var c=l[s];e[c]=i[c]}},n.prototype._copyStyle=function(e,i){if(n._rmvAtts.forEach(function(L){i.removeAttribute(L)}),e instanceof HTMLCanvasElement){var l=e,s=i;s.width=l.width,s.height=l.height,s.getContext("2d").drawImage(l,0,0)}for(var c=getComputedStyle(e),h=0;h<c.length;h++){var p=c[h];p.indexOf("transition")<0&&(i.style[p]=c[p])}i.style.pointerEvents="none";for(var h=0;h<e.children.length;h++)this._copyStyle(e.children[h],i.children[h])},n.prototype._dispatchEvent=function(e,i,l){if(e&&l){var s=document.createEvent("Event"),c=e.touches?e.touches[0]:e;return s.initEvent(i,!0,!0),s.button=0,s.which=s.buttons=1,this._copyProps(s,e,n._kbdProps),this._copyProps(s,c,n._ptProps),s.dataTransfer=this._dataTransfer,l.dispatchEvent(s),s.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();u._instance=new u,u._THRESHOLD=5,u._OPACITY=.5,u._DBLCLICK=500,u._CTXMENU=900,u._ISPRESSHOLDMODE=!1,u._PRESSHOLDAWAIT=400,u._PRESSHOLDMARGIN=25,u._PRESSHOLDTHRESHOLD=0,u._rmvAtts="id,class,style,draggable".split(","),u._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),u._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),o.DragDropTouch=u})(ge||(ge={}));const dt={__name:"WeekPane",props:{week:{type:Object,required:!0},monday:{type:String,required:!0}},setup(o){const a=o,u=j(),n=q(()=>a.week.tasks.length?[...a.week.tasks].sort((l,s)=>s.target-l.target):null);function e(l,s){const c={id:s.id,planned:s.planned,monday:a.monday};l.dataTransfer.setData("text",JSON.stringify(c)),l.dataTransfer.dropEffect="move"}function i(l){const s=JSON.parse(l.dataTransfer.getData("text"));s.monday!==a.monday&&u.moveItem(s,a.monday)}return(l,s)=>(b(),x("div",{onDragover:s[0]||(s[0]=J(()=>{},["prevent"])),onDragenter:s[1]||(s[1]=J(()=>{},["prevent"])),onDrop:s[2]||(s[2]=J(c=>i(c),["prevent"]))},[o.week.start?(b(),P(B,{key:0,overline:"",class:"q-px-lg q-py-sm text-uppercase"},{default:T(()=>[N(Y(o.week.month),1)]),_:1})):R("",!0),M(B,{header:"",class:$e(["q-px-lg q-py-sm",o.week.current?"bg-blue-1":""])},{default:T(()=>[N(Y(o.week.title),1)]),_:1},8,["class"]),(b(!0),x(A,null,U(n.value,c=>(b(),P(ut,{key:c.id,class:"min-h",once:""},{default:T(()=>[M(ct,{item:c,class:"q-pl-lg",onOndragstart:e},null,8,["item"])]),_:2},1024))),128))],32))}},ht=Xe(dt,[["__scopeId","data-v-9f16368c"]]),St={__name:"HomeView",setup(o){const a=j();return(u,n)=>(b(),x(A,null,[M(Ae,{class:"q-pl-lg"},{default:T(()=>[M(Ne,null,{default:T(()=>[N("Tasks")]),_:1}),M(Q,{flat:"",round:"",icon:"filter_list",onClick:n[0]||(n[0]=e=>k(a).filter.show=!k(a).filter.show)})]),_:1}),M(Ke,null,{default:T(()=>[ze(M(st,null,null,512),[[Ze,k(a).filter.show]])]),_:1}),k(a).calendar?(b(!0),x(A,{key:0},U(k(a).calendar,(e,i)=>(b(),P(ht,{key:i,week:e,monday:i,class:"q-pb-lg"},null,8,["week","monday"]))),128)):R("",!0)],64))}};export{St as default};
