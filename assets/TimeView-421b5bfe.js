import{Q as w,a as C}from"./QToolbar-35ea1fa8.js";import{f as p,a1 as c,a2 as n,a4 as I,a7 as f,a8 as t,aa as x,az as e,a9 as r,aF as B,aE as b,b2 as V,aZ as N,b8 as U,aG as q}from"./index-3bd6ffe9.js";import{Q as D}from"./QForm-d32fb125.js";import{Q as F}from"./GoalStore-3cc73f46.js";import{u as K}from"./TimeStore-a406340a.js";import{u as E}from"./TaskStore-b3ac0866.js";import{u as P,_ as k}from"./DateInput-766fc3df.js";import{_ as R}from"./DurationInput-05537768.js";import"./date-a438272d.js";import"./format-ff5bcb16.js";const $={class:"q-pa-md"},z={class:"row q-col-gutter-lg"},h={__name:"TimeView",setup(G){const i=I(),_=K(),v=E(),s=parseInt(i.params.id),{item:a,original:y,persist:d,changed:Q,remove:T,save:g,back:m}=P(s,_,{task:parseInt(i.params.task),start:new Date().toISOString(),end:null,duration:null,description:""}),S=p(()=>!a.value.duration||d.value||Boolean(s&&!Q(y,{...a.value}))),u=p(()=>v.getItem(a.value.task).name);return(M,o)=>(f(),c(F,{padding:""},{default:n(()=>[t(D,{onSubmit:q(e(g),["prevent"])},{default:n(()=>[t(w,null,{default:n(()=>[t(C,null,{default:n(()=>[x("Time")]),_:1}),e(s)?(f(),c(r,{key:0,type:"button",flat:"",round:"",icon:"delete",disable:e(d),onClick:e(T)},null,8,["disable","onClick"])):B("",!0),t(r,{type:"submit",flat:"",round:"",icon:"save",disable:e(S)},null,8,["disable"]),t(r,{type:"button",flat:"",round:"",icon:"clear",onClick:e(m)},null,8,["onClick"])]),_:1}),b("div",$,[b("div",z,[t(V,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=l=>N(u)?u.value=l:null),label:"Task","stack-label":"",readonly:"",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(R,{modelValue:e(a).duration,"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).duration=l),label:"Duration",class:"col-12 col-sm-6",autofocus:!e(s),rules:[l=>!!l||"Field is required"],onKeyup:U(e(m),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),t(k,{modelValue:e(a).start,"onUpdate:modelValue":o[2]||(o[2]=l=>e(a).start=l),label:"Start",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(k,{modelValue:e(a).end,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).end=l),label:"End",class:"col-12 col-sm-6"},null,8,["modelValue"])]),t(V,{modelValue:e(a).description,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).description=l),type:"textarea",label:"Description","stack-label":"",class:"q-pt-md"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),_:1}))}};export{h as default};
