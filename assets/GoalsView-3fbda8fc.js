import{c as y,b as I,Q as T}from"./api.client-af085b9a.js";import{j as g,N as L,af as i,O as o,P as r,Q as e,R as l,U as Q,W as k,V as h,T as u,Y as f,S as v,ah as w}from"./index-cfbd7e31.js";import{Q as x}from"./QList-e71bd91d.js";import{Q as C}from"./QPage-1c8d134d.js";import{a as G}from"./QExpansionItem-43593010.js";import{Q as _}from"./QItemLabel-70a70cca.js";import{a as V,Q as Y}from"./format-44aa027b.js";import{d as B}from"./date-a770619b.js";import"./use-model-toggle-2c8fa6f4.js";import"./uid-6a237b22.js";const D={__name:"GoalListItem",props:{goal:{type:Object,required:!0}},setup(s){const a=s,d={name:"goal",params:{id:a.goal.id}},c=a.goal.children&&a.goal.children.length,n=g(()=>a.goal.planned?B.formatDate(a.goal.planned,"ddd MMM DD YYYY"):null);return(m,t)=>{const b=L("GoalListItem",!0);return i(c)?(o(),r(G,{key:0,to:d,label:s.goal.name,caption:i(n),"content-inset-level":.5,"default-opened":"","expand-icon-toggle":"","expand-icon":"keyboard_arrow_right","expanded-icon":"keyboard_arrow_down","expand-separator":""},{default:e(()=>[l(x,null,{default:e(()=>[(o(!0),Q(k,null,h(s.goal.children,p=>(o(),r(b,{key:p.id,goal:p},null,8,["goal"]))),128))]),_:1})]),_:1},8,["label","caption","content-inset-level"])):(o(),r(Y,{key:1,to:d},{default:e(()=>[l(V,null,{default:e(()=>[l(_,null,{default:e(()=>[u(f(s.goal.name),1)]),_:1}),l(_,{caption:""},{default:e(()=>[u(f(i(n)),1)]),_:1})]),_:1})]),_:1}))}}},U={__name:"GoalsView",setup(s){const a=(n,m=null)=>n.filter(t=>t.parent===m).map(t=>({...t,children:a(n,t.id)})),{data:d}=y.read("/goals/"),c=g(()=>d.value?a(d.value):null);return(n,m)=>(o(),r(C,{padding:""},{default:e(()=>[l(T,null,{default:e(()=>[l(I,null,{default:e(()=>[u("Goals")]),_:1}),l(v,{flat:"",round:"",icon:"add_task",to:{name:"goal",params:{id:"create"}}})]),_:1}),i(c)?(o(),r(x,{key:0},{default:e(()=>[(o(!0),Q(k,null,h(i(c),t=>(o(),r(D,{key:t.id,goal:t},null,8,["goal"]))),128))]),_:1})):w("",!0)]),_:1}))}};export{U as default};
