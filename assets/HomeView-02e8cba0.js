import{a as Ge,Q as Je}from"./QToolbar-1b544c2a.js";import{a as z,b as oe,Q as Ee}from"./QItem-18ac8077.js";import{c as ee,D as Me,E as Pe,U as et,f as I,h as y,S as J,g as ue,aw as Ne,r as U,ax as tt,w as we,b as at,ay as nt,az as rt,ae as X,aA as it,C as He,J as lt,aB as ot,aC as De,aD as Ve,a7 as R,a1 as Q,a2 as b,aE as Be,af as Ce,aF as O,a8 as p,aG as Ae,d as st,e as Te,j as ut,aH as Re,aI as ct,a9 as fe,aJ as dt,aa as se,aK as ge,ab as $e,ad as je,ac as ze,aL as xe,aM as Qe}from"./index-32702dd5.js";import{Q as Ue}from"./QList-b7a0b456.js";import{u as ft,a as ht,Q as Ye}from"./QMenu-8ad2c9ae.js";import{u as gt,Q as mt}from"./GoalStore-8df59a85.js";import{d as he,u as Ie}from"./TaskStore-101d8004.js";import{Q as vt,a as _t}from"./QLinearProgress-c7aace46.js";import{Q as yt}from"./QField-8cd640fb.js";import{Q as pt}from"./QIntersection-4a6e9533.js";import{_ as bt,u as kt}from"./NumberInput-2ae5f2f5.js";import"./format-ff5bcb16.js";const St=ee({name:"QTimeline",props:{...Me,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:s}){const c=ue(),l=Pe(t,c.proxy.$q);et(Ne,t);const e=I(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(l.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:e.value},J(s.default))}}),Tt=["none","strict","leaf","leaf-filtered"],xt=ee({name:"QTree",props:{...Me,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>Tt.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:s,emit:c}){const{proxy:l}=ue(),{$q:e}=l,o=Pe(t,e),d=U({}),u=U(t.ticked||[]),m=U(t.expanded||[]);let _={};tt(()=>{_={}});const D=I(()=>`q-tree q-tree--${t.dense===!0?"dense":"standard"}`+(t.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),H=I(()=>t.selected!==void 0),Y=I(()=>t.icon||e.iconSet.tree.icon),M=I(()=>t.controlColor||t.color),$=I(()=>t.textColor!==void 0?` text-${t.textColor}`:""),A=I(()=>{const r=t.selectedColor||t.color;return r?` text-${r}`:""}),V=I(()=>t.filterMethod!==void 0?t.filterMethod:(r,f)=>{const n=f.toLowerCase();return r[t.labelKey]&&r[t.labelKey].toLowerCase().indexOf(n)>-1}),F=I(()=>{const r={},f=(n,v)=>{const h=n.tickStrategy||(v?v.tickStrategy:t.tickStrategy),g=n[t.nodeKey],P=n[t.childrenKey]&&n[t.childrenKey].length>0,K=n.disabled!==!0&&H.value===!0&&n.selectable!==!1,q=n.disabled!==!0&&n.expandable!==!1,G=h!=="none",B=h==="strict",N=h==="leaf-filtered",re=h==="leaf"||h==="leaf-filtered";let ie=n.disabled!==!0&&n.tickable!==!1;re===!0&&ie===!0&&v&&v.tickable!==!0&&(ie=!1);let j=n.lazy;j===!0&&d.value[g]!==void 0&&Array.isArray(n[t.childrenKey])===!0&&(j=d.value[g]);const S={key:g,parent:v,isParent:P,lazy:j,disabled:n.disabled,link:n.disabled!==!0&&(K===!0||q===!0&&(P===!0||j===!0)),children:[],matchesFilter:t.filter?V.value(n,t.filter):!0,selected:g===t.selected&&K===!0,selectable:K,expanded:P===!0?m.value.includes(g):!1,expandable:q,noTick:n.noTick===!0||B!==!0&&j&&j!=="loaded",tickable:ie,tickStrategy:h,hasTicking:G,strictTicking:B,leafFilteredTicking:N,leafTicking:re,ticked:B===!0?u.value.includes(g):P===!0?!1:u.value.includes(g)};if(r[g]=S,P===!0&&(S.children=n[t.childrenKey].map(L=>f(L,S)),t.filter&&(S.matchesFilter!==!0?S.matchesFilter=S.children.some(L=>L.matchesFilter):S.noTick!==!0&&S.disabled!==!0&&S.tickable===!0&&N===!0&&S.children.every(L=>L.matchesFilter!==!0||L.noTick===!0||L.tickable!==!0)===!0&&(S.tickable=!1)),S.matchesFilter===!0&&(S.noTick!==!0&&B!==!0&&S.children.every(L=>L.noTick)===!0&&(S.noTick=!0),re))){if(S.ticked=!1,S.indeterminate=S.children.some(L=>L.indeterminate===!0),S.tickable=S.tickable===!0&&S.children.some(L=>L.tickable),S.indeterminate!==!0){const L=S.children.reduce((le,ke)=>ke.ticked===!0?le+1:le,0);L===S.children.length?S.ticked=!0:L>0&&(S.indeterminate=!0)}S.indeterminate===!0&&(S.indeterminateNextState=S.children.every(L=>L.tickable!==!0||L.ticked!==!0))}return S};return t.nodes.forEach(n=>f(n,null)),r});we(()=>t.ticked,r=>{u.value=r}),we(()=>t.expanded,r=>{m.value=r});function Z(r){const f=[].reduce,n=(v,h)=>{if(v||!h)return v;if(Array.isArray(h)===!0)return f.call(Object(h),n,v);if(h[t.nodeKey]===r)return h;if(h[t.childrenKey])return n(null,h[t.childrenKey])};return n(null,t.nodes)}function ve(){return u.value.map(r=>Z(r))}function _e(){return m.value.map(r=>Z(r))}function ye(r){return r&&F.value[r]?F.value[r].expanded:!1}function pe(){t.expanded!==void 0?c("update:expanded",[]):m.value=[]}function ce(){const r=m.value,f=n=>{n[t.childrenKey]&&n[t.childrenKey].length>0&&n.expandable!==!1&&n.disabled!==!0&&(r.push(n[t.nodeKey]),n[t.childrenKey].forEach(f))};t.nodes.forEach(f),t.expanded!==void 0?c("update:expanded",r):m.value=r}function te(r,f,n=Z(r),v=F.value[r]){if(v.lazy&&v.lazy!=="loaded"){if(v.lazy==="loading")return;d.value[r]="loading",Array.isArray(n[t.childrenKey])!==!0&&(n[t.childrenKey]=[]),c("lazyLoad",{node:n,key:r,done:h=>{d.value[r]="loaded",n[t.childrenKey]=Array.isArray(h)===!0?h:[],at(()=>{const g=F.value[r];g&&g.isParent===!0&&de(r,!0)})},fail:()=>{delete d.value[r],n[t.childrenKey].length===0&&delete n[t.childrenKey]}})}else v.isParent===!0&&v.expandable===!0&&de(r,f)}function de(r,f){let n=m.value;const v=t.expanded!==void 0;if(v===!0&&(n=n.slice()),f){if(t.accordion&&F.value[r]){const h=[];F.value[r].parent?F.value[r].parent.children.forEach(g=>{g.key!==r&&g.expandable===!0&&h.push(g.key)}):t.nodes.forEach(g=>{const P=g[t.nodeKey];P!==r&&h.push(P)}),h.length>0&&(n=n.filter(g=>h.includes(g)===!1))}n=n.concat([r]).filter((h,g,P)=>P.indexOf(h)===g)}else n=n.filter(h=>h!==r);v===!0?c("update:expanded",n):m.value=n}function be(r){return r&&F.value[r]?F.value[r].ticked:!1}function W(r,f){let n=u.value;const v=t.ticked!==void 0;v===!0&&(n=n.slice()),f?n=n.concat(r).filter((h,g,P)=>P.indexOf(h)===g):n=n.filter(h=>r.includes(h)===!1),v===!0&&c("update:ticked",n)}function ae(r,f,n){const v={tree:l,node:r,key:n,color:t.color,dark:o.value};return De(v,"expanded",()=>f.expanded,h=>{h!==f.expanded&&te(n,h)}),De(v,"ticked",()=>f.ticked,h=>{h!==f.ticked&&W([n],h)}),v}function ne(r){return(t.filter?r.filter(f=>F.value[f[t.nodeKey]].matchesFilter):r).map(f=>T(f))}function i(r){if(r.icon!==void 0)return y(X,{class:"q-tree__icon q-mr-sm",name:r.icon,color:r.iconColor});const f=r.img||r.avatar;if(f)return y("img",{class:`q-tree__${r.img?"img":"avatar"} q-mr-sm`,src:f})}function a(){c("afterShow")}function E(){c("afterHide")}function T(r){const f=r[t.nodeKey],n=F.value[f],v=r.header&&s[`header-${r.header}`]||s["default-header"],h=n.isParent===!0?ne(r[t.childrenKey]):[],g=h.length>0||n.lazy&&n.lazy!=="loaded";let P=r.body&&s[`body-${r.body}`]||s["default-body"];const K=v!==void 0||P!==void 0?ae(r,n,f):null;return P!==void 0&&(P=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:$.value},[P(K)])])),y("div",{key:f,class:`q-tree__node relative-position q-tree__node--${g===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(n.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(n.selected===!0?" q-tree__node--selected":"")+(n.disabled===!0?" q-tree__node--disabled":""),tabindex:n.link===!0?0:-1,onClick:q=>{w(r,n,q)},onKeypress(q){nt(q)!==!0&&(q.keyCode===13?w(r,n,q,!0):q.keyCode===32&&k(r,n,q,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:q=>{_[n.key]=q}}),n.lazy==="loading"?y(rt,{class:"q-tree__spinner",color:M.value}):g===!0?y(X,{class:"q-tree__arrow"+(n.expanded===!0?" q-tree__arrow--rotate":""),name:Y.value,onClick(q){k(r,n,q)}}):null,n.hasTicking===!0&&n.noTick!==!0?y(it,{class:"q-tree__tickbox",modelValue:n.indeterminate===!0?null:n.ticked,color:M.value,dark:o.value,dense:!0,keepColor:!0,disable:n.tickable!==!0,onKeydown:He,"onUpdate:modelValue":q=>{x(n,q)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(n.selected===!0?A.value:$.value)},[v?v(K):[i(r),y("div",r[t.labelKey])]])]),g===!0?t.noTransition===!0?y("div",{class:"q-tree__node-collapsible"+$.value,key:`${f}__q`},[P,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},n.expanded?h:null)]):y(vt,{duration:t.duration,onShow:a,onHide:E},()=>lt(y("div",{class:"q-tree__node-collapsible"+$.value,key:`${f}__q`},[P,y("div",{class:"q-tree__children"+(n.disabled===!0?" q-tree__node--disabled":"")},h)]),[[ot,n.expanded]])):P])}function C(r){const f=_[r];f&&f.focus()}function w(r,f,n,v){v!==!0&&C(f.key),H.value&&f.selectable?t.noSelectionUnset===!1?c("update:selected",f.key!==t.selected?f.key:null):f.key!==t.selected&&c("update:selected",f.key===void 0?null:f.key):k(r,f,n,v),typeof r.handler=="function"&&r.handler(r)}function k(r,f,n,v){n!==void 0&&He(n),v!==!0&&C(f.key),te(f.key,!f.expanded,r,f)}function x(r,f){if(r.indeterminate===!0&&(f=r.indeterminateNextState),r.strictTicking)W([r.key],f);else if(r.leafTicking){const n=[],v=h=>{h.isParent?(f!==!0&&h.noTick!==!0&&h.tickable===!0&&n.push(h.key),h.leafTicking===!0&&h.children.forEach(v)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&n.push(h.key)};v(r),W(n,f)}}return t.defaultExpandAll===!0&&ce(),Object.assign(l,{getNodeByKey:Z,getTickedNodes:ve,getExpandedNodes:_e,isExpanded:ye,collapseAll:pe,expandAll:ce,setExpanded:te,isTicked:be,setTicked:W}),()=>{const r=ne(t.nodes);return y("div",{class:D.value},r.length===0?t.filter?t.noResultsLabel||e.lang.tree.noResults:t.noNodesLabel||e.lang.tree.noNodes:r)}}}),Et=ee({name:"QBanner",props:{...Me,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:s}){const{proxy:{$q:c}}=ue(),l=Pe(t,c),e=I(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(l.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=I(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const d=[y("div",{class:"q-banner__avatar col-auto row items-center self-start"},J(s.avatar)),y("div",{class:"q-banner__content col text-body2"},J(s.default))],u=J(s.action);return u!==void 0&&d.push(y("div",{class:o.value},u)),y("div",{class:e.value+(t.inlineActions===!1&&u!==void 0?" q-banner--top-padding":""),role:"alert"},d)}}}),wt=ee({name:"QPopupProxy",props:{...ft,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:s,emit:c,attrs:l}){const{proxy:e}=ue(),{$q:o}=e,d=U(!1),u=U(null),m=I(()=>parseInt(t.breakpoint,10)),{canShow:_}=ht({showing:d});function D(){return o.screen.width<m.value||o.screen.height<m.value?"dialog":"menu"}const H=U(D()),Y=I(()=>H.value==="menu"?{maxHeight:"99vh"}:{});we(()=>D(),A=>{d.value!==!0&&(H.value=A)});function M(A){d.value=!0,c("show",A)}function $(A){d.value=!1,H.value=D(),c("hide",A)}return Object.assign(e,{show(A){_(A)===!0&&u.value.show(A)},hide(A){u.value.hide(A)},toggle(A){u.value.toggle(A)}}),De(e,"currentComponent",()=>({type:H.value,ref:u.value})),()=>{const A={ref:u,...Y.value,...l,onShow:M,onHide:$};let V;return H.value==="dialog"?V=Ve:(V=Ye,Object.assign(A,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(V,A,s.default)}}}),Dt={class:"self-center full-width no-outline ellipsis",tabindex:"0"},Ct={__name:"GoalTreeSelect",props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],setup(t,{emit:s}){const c=t,l=I({get(){return c.modelValue},set(d){s("update:modelValue",d)}}),e=gt(),o=I(()=>c.modelValue?e.getItem(c.modelValue).name:null);return(d,u)=>(R(),Q(yt,{modelValue:O(l),"onUpdate:modelValue":u[1]||(u[1]=m=>Ae(l)?l.value=m:null),clearable:"","clear-icon":"close"},{control:b(()=>[Be("div",Dt,Ce(O(o)),1)]),append:b(()=>[p(X,{name:"keyboard_arrow_down"})]),default:b(()=>[p(wt,{fit:"","auto-close":""},{default:b(()=>[p(Et,null,{default:b(()=>[p(xt,{selected:O(l),"onUpdate:selected":u[0]||(u[0]=m=>Ae(l)?l.value=m:null),nodes:O(e).tree,"node-key":"id","label-key":"name",icon:"keyboard_arrow_right","no-selection-unset":"","default-expand-all":""},null,8,["selected","nodes"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Mt=ee({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:s}){const c=st(Ne,Te);if(c===Te)return console.error("QTimelineEntry needs to be child of QTimeline"),Te;const l=I(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),e=I(()=>`q-timeline__dot text-${t.color||c.color}`),o=I(()=>c.layout==="comfortable"&&c.side==="left");return()=>{const d=ut(s.default,[]);if(t.body!==void 0&&d.unshift(t.body),t.heading===!0){const _=[y("div"),y("div"),y(t.tag,{class:"q-timeline__heading-title"},d)];return y("div",{class:"q-timeline__heading"},o.value===!0?_.reverse():_)}let u;t.icon!==void 0?u=[y(X,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(u=[y("img",{class:"q-timeline__dot-img",src:t.avatar})]);const m=[y("div",{class:"q-timeline__subtitle"},[y("span",{},J(s.subtitle,[t.subtitle]))]),y("div",{class:e.value},u),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},J(s.title,[t.title]))].concat(d))];return y("li",{class:l.value},o.value===!0?m.reverse():m)}}});var Oe={};(function t(s,c,l,e){var o=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL);function d(){}function u(i){var a=c.exports.Promise,E=a!==void 0?a:s.Promise;return typeof E=="function"?new E(i):(i(d,d),null)}var m=function(){var i=Math.floor(16.666666666666668),a,E,T={},C=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(w){var k=Math.random();return T[k]=requestAnimationFrame(function x(r){C===r||C+i-1<r?(C=r,delete T[k],w()):T[k]=requestAnimationFrame(x)}),k},E=function(w){T[w]&&cancelAnimationFrame(T[w])}):(a=function(w){return setTimeout(w,i)},E=function(w){return clearTimeout(w)}),{frame:a,cancel:E}}(),_=function(){var i,a,E={};function T(C){function w(k,x){C.postMessage({options:k||{},callback:x})}C.init=function(x){var r=x.transferControlToOffscreen();C.postMessage({canvas:r},[r])},C.fire=function(x,r,f){if(a)return w(x,null),a;var n=Math.random().toString(36).slice(2);return a=u(function(v){function h(g){g.data.callback===n&&(delete E[n],C.removeEventListener("message",h),a=null,f(),v())}C.addEventListener("message",h),w(x,n),E[n]=h.bind(null,{data:{callback:n}})}),a},C.reset=function(){C.postMessage({reset:!0});for(var x in E)E[x](),delete E[x]}}return function(){if(i)return i;if(!l&&o){var C=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([C])))}catch(w){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",w),null}T(i)}return i}}(),D={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function H(i,a){return a?a(i):i}function Y(i){return i!=null}function M(i,a,E){return H(i&&Y(i[a])?i[a]:D[a],E)}function $(i){return i<0?0:Math.floor(i)}function A(i,a){return Math.floor(Math.random()*(a-i))+i}function V(i){return parseInt(i,16)}function F(i){return i.map(Z)}function Z(i){var a=String(i).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:V(a.substring(0,2)),g:V(a.substring(2,4)),b:V(a.substring(4,6))}}function ve(i){var a=M(i,"origin",Object);return a.x=M(a,"x",Number),a.y=M(a,"y",Number),a}function _e(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function ye(i){var a=i.getBoundingClientRect();i.width=a.width,i.height=a.height}function pe(i){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=i,a}function ce(i,a,E,T,C,w,k,x,r){i.save(),i.translate(a,E),i.rotate(w),i.scale(T,C),i.arc(0,0,1,k,x,r),i.restore()}function te(i){var a=i.angle*(Math.PI/180),E=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-a+(.5*E-Math.random()*E),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar}}function de(i,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.wobble+=a.wobbleSpeed,a.velocity*=a.decay,a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble);var E=a.tick++/a.totalTicks,T=a.x+a.random*a.tiltCos,C=a.y+a.random*a.tiltSin,w=a.wobbleX+a.random*a.tiltCos,k=a.wobbleY+a.random*a.tiltSin;if(i.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-E)+")",i.beginPath(),a.shape==="circle")i.ellipse?i.ellipse(a.x,a.y,Math.abs(w-T)*a.ovalScalar,Math.abs(k-C)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):ce(i,a.x,a.y,Math.abs(w-T)*a.ovalScalar,Math.abs(k-C)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var x=Math.PI/2*3,r=4*a.scalar,f=8*a.scalar,n=a.x,v=a.y,h=5,g=Math.PI/h;h--;)n=a.x+Math.cos(x)*f,v=a.y+Math.sin(x)*f,i.lineTo(n,v),x+=g,n=a.x+Math.cos(x)*r,v=a.y+Math.sin(x)*r,i.lineTo(n,v),x+=g;else i.moveTo(Math.floor(a.x),Math.floor(a.y)),i.lineTo(Math.floor(a.wobbleX),Math.floor(C)),i.lineTo(Math.floor(w),Math.floor(k)),i.lineTo(Math.floor(T),Math.floor(a.wobbleY));return i.closePath(),i.fill(),a.tick<a.totalTicks}function be(i,a,E,T,C){var w=a.slice(),k=i.getContext("2d"),x,r,f=u(function(n){function v(){x=r=null,k.clearRect(0,0,T.width,T.height),C(),n()}function h(){l&&!(T.width===e.width&&T.height===e.height)&&(T.width=i.width=e.width,T.height=i.height=e.height),!T.width&&!T.height&&(E(i),T.width=i.width,T.height=i.height),k.clearRect(0,0,T.width,T.height),w=w.filter(function(g){return de(k,g)}),w.length?x=m.frame(h):v()}x=m.frame(h),r=v});return{addFettis:function(n){return w=w.concat(n),f},canvas:i,promise:f,reset:function(){x&&m.cancel(x),r&&r()}}}function W(i,a){var E=!i,T=!!M(a||{},"resize"),C=M(a,"disableForReducedMotion",Boolean),w=o&&!!M(a||{},"useWorker"),k=w?_():null,x=E?_e:ye,r=i&&k?!!i.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,n;function v(g,P,K){for(var q=M(g,"particleCount",$),G=M(g,"angle",Number),B=M(g,"spread",Number),N=M(g,"startVelocity",Number),re=M(g,"decay",Number),ie=M(g,"gravity",Number),j=M(g,"drift",Number),S=M(g,"colors",F),L=M(g,"ticks",Number),le=M(g,"shapes"),ke=M(g,"scalar"),qe=ve(g),Le=q,Se=[],Xe=i.width*qe.x,Ze=i.height*qe.y;Le--;)Se.push(te({x:Xe,y:Ze,angle:G,spread:B,startVelocity:N,color:S[Le%S.length],shape:le[A(0,le.length)],ticks:L,decay:re,gravity:ie,drift:j,scalar:ke}));return n?n.addFettis(Se):(n=be(i,Se,x,P,K),n.promise)}function h(g){var P=C||M(g,"disableForReducedMotion",Boolean),K=M(g,"zIndex",Number);if(P&&f)return u(function(N){N()});E&&n?i=n.canvas:E&&!i&&(i=pe(K),document.body.appendChild(i)),T&&!r&&x(i);var q={width:i.width,height:i.height};k&&!r&&k.init(i),r=!0,k&&(i.__confetti_initialized=!0);function G(){if(k){var N={getBoundingClientRect:function(){if(!E)return i.getBoundingClientRect()}};x(N),k.postMessage({resize:{width:N.width,height:N.height}});return}q.width=q.height=null}function B(){n=null,T&&s.removeEventListener("resize",G),E&&i&&(document.body.removeChild(i),i=null,r=!1)}return T&&s.addEventListener("resize",G,!1),k?k.fire(g,q,B):v(g,q,B)}return h.reset=function(){k&&k.reset(),n&&n.reset()},h}var ae;function ne(){return ae||(ae=W(null,{useWorker:!0,resize:!0})),ae}c.exports=function(){return ne().apply(this,arguments)},c.exports.reset=function(){ne().reset()},c.exports.create=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Oe,!1);const Fe=Oe.exports;Oe.exports.create;function Pt(){var t=3e3,s=Date.now()+t,c={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function l(o,d){return Math.random()*(d-o)+o}var e=setInterval(function(){var o=s-Date.now();if(o<=0)return clearInterval(e);var d=100*(o/t);Fe(Object.assign({},c,{particleCount:d,origin:{x:l(.1,.3),y:Math.random()-.2}})),Fe(Object.assign({},c,{particleCount:d,origin:{x:l(.7,.9),y:Math.random()-.2}}))},250)}const It=y("div",{class:"q-space"}),Ot=ee({name:"QSpace",setup(){return()=>It}}),qt=()=>!0;function Lt(t){const s={};return t.forEach(c=>{s[c]=qt}),s}function me(){const{emit:t,proxy:s}=ue(),c=U(null);function l(){c.value.show()}function e(){c.value.hide()}function o(u){t("ok",u),e()}function d(){t("hide")}return Object.assign(s,{show:l,hide:e}),{dialogRef:c,onDialogHide:d,onDialogOK:o,onDialogCancel:e}}const We=["ok","hide"];me.emits=We;me.emitsObject=Lt(We);const Ht=Be("div",{class:"text-h6"},"Progress",-1),At={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...me.emits],setup(t){const s=t,c=U(s.task.performance),l=I(()=>{let D="of "+s.task.target;const H=s.task.performance_history;return H&&H.length&&(D+=" · changed "+he.formatDate(H[0].updated,"DD.MM.YYYY HH:mm")),D}),{dialogRef:e,onDialogHide:o,onDialogOK:d,onDialogCancel:u}=me(),m=I(()=>c.value===s.task.performance);function _(){d({performance:c.value})}return(D,H)=>(R(),Q(Ve,{ref_key:"dialogRef",ref:e,onHide:O(o)},{default:b(()=>[p(dt,{class:"q-dialog-plugin"},{default:b(()=>[p(Re,null,{default:b(()=>[Ht]),_:1}),p(Re,null,{default:b(()=>[p(bt,{modelValue:c.value,"onUpdate:modelValue":H[0]||(H[0]=Y=>c.value=Y),label:"Performance",hint:O(l)},null,8,["modelValue","hint"])]),_:1}),p(ct,{align:"right"},{default:b(()=>[p(fe,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:t.task.id}}},null,8,["to"]),p(Ot),p(fe,{flat:"",label:"Cancel",class:"text-primary",onClick:O(u)},null,8,["onClick"]),p(fe,{disable:O(m),flat:"",label:"Submit",class:"text-primary",onClick:_},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Rt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(t){const s=t,c=kt(),l=Ie(),e=I(()=>s.task.target>1&&!s.task.done),o=I(()=>e.value?s.task.performance/s.task.target:0),d=I(()=>[s.task.on_track+"%","·",s.task.performance,"of",s.task.target].join(" "));function u(){c.dialog({component:At,componentProps:{task:s.task}}).onOk(m=>{m.performance>=s.task.target&&Pt();const _={performance:m.performance};l.updateItem(s.task.id+"/",_).then(()=>l.refetch())})}return(m,_)=>(R(),Q(Ee,{clickable:"",active:Boolean(t.task.done),"active-class":"text-positive"},{default:b(()=>[t.task.done?(R(),Q(z,{key:0,thumbnail:""},{default:b(()=>[p(X,{name:"done",color:"positive"})]),_:1})):t.task.group_id?(R(),Q(z,{key:1,thumbnail:""},{default:b(()=>[p(X,{name:"event_repeat"})]),_:1})):(R(),Q(z,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:_[0]||(_[0]=D=>m.$emit("ondragstart",D,t.task)),"onTouchmove:native":_[1]||(_[1]=D=>{})},{default:b(()=>[p(X,{name:"drag_indicator"})]),_:1})),p(z,{onClick:u},{default:b(()=>[p(oe,null,{default:b(()=>[se(Ce(t.task.name),1)]),_:1}),O(e)?(R(),Q(oe,{key:0,caption:""},{default:b(()=>[se(Ce(O(d)),1)]),_:1})):ge("",!0),O(e)?(R(),Q(oe,{key:1},{default:b(()=>[p(_t,{value:O(o),color:"positive"},null,8,["value"])]),_:1})):ge("",!0)]),_:1})]),_:1},8,["active"]))}};var Ke;(function(t){var s=function(){function l(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(l.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),l.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},l.prototype.getData=function(e){return this._data[e]||""},l.prototype.setData=function(e,o){this._data[e]=o},l.prototype.setDragImage=function(e,o,d){var u=c._instance;u._imgCustom=e,u._imgOffset={x:o,y:d}},l}();t.DataTransfer=s;var c=function(){function l(){if(this._lastClick=0,l._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var o=document,d=this._touchstart.bind(this),u=this._touchmove.bind(this),m=this._touchend.bind(this),_=e?{passive:!1,capture:!1}:!1;o.addEventListener("touchstart",d,_),o.addEventListener("touchmove",u,_),o.addEventListener("touchend",m),o.addEventListener("touchcancel",m)}}return l.getInstance=function(){return l._instance},l.prototype._touchstart=function(e){var o=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<l._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var d=this._closestDraggable(e.target);d&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=d,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){o._dragSource==d&&o._img==null&&o._dispatchEvent(e,"contextmenu",d)&&o._reset()},l._CTXMENU),l._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){o._isDragEnabled=!0,o._touchmove(e)},l._PRESSHOLDAWAIT)))}},l.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var o=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",o)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",o)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),o!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",o),this._lastTarget=o),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",o))}},l.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},l.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},l.prototype._shouldHandleMove=function(e){return!l._ISPRESSHOLDMODE&&this._shouldHandle(e)},l.prototype._shouldHandlePressHoldMove=function(e){return l._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},l.prototype._shouldCancelPressHoldMove=function(e){return l._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>l._PRESSHOLDMARGIN},l.prototype._shouldStartDragging=function(e){var o=this._getDelta(e);return o>l._THRESHOLD||l._ISPRESSHOLDMODE&&o>=l._PRESSHOLDTHRESHOLD},l.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new s,clearInterval(this._pressHoldInterval)},l.prototype._getPoint=function(e,o){return e&&e.touches&&(e=e.touches[0]),{x:o?e.pageX:e.clientX,y:o?e.pageY:e.clientY}},l.prototype._getDelta=function(e){if(l._ISPRESSHOLDMODE&&!this._ptDown)return 0;var o=this._getPoint(e);return Math.abs(o.x-this._ptDown.x)+Math.abs(o.y-this._ptDown.y)},l.prototype._getTarget=function(e){for(var o=this._getPoint(e),d=document.elementFromPoint(o.x,o.y);d&&getComputedStyle(d).pointerEvents=="none";)d=d.parentElement;return d},l.prototype._createImage=function(e){this._img&&this._destroyImage();var o=this._imgCustom||this._dragSource;if(this._img=o.cloneNode(!0),this._copyStyle(o,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var d=o.getBoundingClientRect(),u=this._getPoint(e);this._imgOffset={x:u.x-d.left,y:u.y-d.top},this._img.style.opacity=l._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},l.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},l.prototype._moveImage=function(e){var o=this;requestAnimationFrame(function(){if(o._img){var d=o._getPoint(e,!0),u=o._img.style;u.position="absolute",u.pointerEvents="none",u.zIndex="999999",u.left=Math.round(d.x-o._imgOffset.x)+"px",u.top=Math.round(d.y-o._imgOffset.y)+"px"}})},l.prototype._copyProps=function(e,o,d){for(var u=0;u<d.length;u++){var m=d[u];e[m]=o[m]}},l.prototype._copyStyle=function(e,o){if(l._rmvAtts.forEach(function(H){o.removeAttribute(H)}),e instanceof HTMLCanvasElement){var d=e,u=o;u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)}for(var m=getComputedStyle(e),_=0;_<m.length;_++){var D=m[_];D.indexOf("transition")<0&&(o.style[D]=m[D])}o.style.pointerEvents="none";for(var _=0;_<e.children.length;_++)this._copyStyle(e.children[_],o.children[_])},l.prototype._dispatchEvent=function(e,o,d){if(e&&d){var u=document.createEvent("Event"),m=e.touches?e.touches[0]:e;return u.initEvent(o,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,e,l._kbdProps),this._copyProps(u,m,l._ptProps),u.dataTransfer=this._dataTransfer,d.dispatchEvent(u),u.defaultPrevented}return!1},l.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},l}();c._instance=new c,c._THRESHOLD=5,c._OPACITY=.5,c._DBLCLICK=500,c._CTXMENU=900,c._ISPRESSHOLDMODE=!1,c._PRESSHOLDAWAIT=400,c._PRESSHOLDMARGIN=25,c._PRESSHOLDTHRESHOLD=0,c._rmvAtts="id,class,style,draggable".split(","),c._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),c._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=c})(Ke||(Ke={}));const Qt={__name:"WeekTimelineEntry",props:{tasks:{type:Array,required:!0},monday:{type:String,required:!0}},setup(t){const s=t,c=Ie(),l=I(()=>s.tasks.length?[...s.tasks].sort((m,_)=>_.target-m.target):null),e=he.formatDate(s.monday,"w-Q-YYYY-MMM D").split("-"),o=["Week "+e[0],"Q"+e[1],e[2],e[3]].join(" · ");function d(m,_){const D={id:_.id,day:he.getDayOfWeek(_.starts),week:e[0]};m.dataTransfer.setData("text",JSON.stringify(D)),m.dataTransfer.dropEffect="move"}function u(m){const _=JSON.parse(m.dataTransfer.getData("text"));if(_.week===e[0])return;const D={starts:he.addToDate(s.monday,{days:_.day-1}).toISOString()};c.updateItem(_.id+"/",D).then(()=>c.refetch())}return(m,_)=>(R(),Q(Mt,{color:t.monday===O(c).currentWeek?"orange":"",subtitle:O(o),onDragover:_[0]||(_[0]=xe(()=>{},["prevent"])),onDragenter:_[1]||(_[1]=xe(()=>{},["prevent"])),onDrop:_[2]||(_[2]=xe(D=>u(D),["prevent"]))},{default:b(()=>[O(l)?(R(),Q(Ue,{key:0},{default:b(()=>[(R(!0),$e(je,null,ze(O(l),D=>(R(),Q(pt,{key:D.id,style:{"min-height":"51.19px"}},{default:b(()=>[p(Rt,{task:D,onOndragstart:d},null,8,["task"])]),_:2},1024))),128))]),_:1})):ge("",!0)]),_:1},8,["color","subtitle"]))}},Zt={__name:"HomeView",setup(t){const s=Ie();return(c,l)=>(R(),Q(mt,{padding:""},{default:b(()=>[p(Je,null,{default:b(()=>[p(Ge,null,{default:b(()=>[se("Plan")]),_:1}),p(Ct,{modelValue:O(s).filter.goal,"onUpdate:modelValue":l[0]||(l[0]=e=>O(s).filter.goal=e),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),p(fe,{flat:"",round:"",icon:"filter_list"},{default:b(()=>[p(Ye,null,{default:b(()=>[p(Ue,null,{default:b(()=>[p(Ee,null,{default:b(()=>[p(z,null,{default:b(()=>[p(oe,null,{default:b(()=>[se("Hide passed done")]),_:1})]),_:1}),p(z,{side:""},{default:b(()=>[p(Qe,{modelValue:O(s).filter.done,"onUpdate:modelValue":l[1]||(l[1]=e=>O(s).filter.done=e)},null,8,["modelValue"])]),_:1})]),_:1}),p(Ee,null,{default:b(()=>[p(z,null,{default:b(()=>[p(oe,null,{default:b(()=>[se("Hide passed recurring")]),_:1})]),_:1}),p(z,{side:""},{default:b(()=>[p(Qe,{modelValue:O(s).filter.recurring,"onUpdate:modelValue":l[2]||(l[2]=e=>O(s).filter.recurring=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),O(s).calendar?(R(),Q(St,{key:0,layout:"dense",class:"q-px-md"},{default:b(()=>[(R(!0),$e(je,null,ze(O(s).calendar,(e,o)=>(R(),Q(Qt,{key:o,tasks:e,monday:o},null,8,["tasks","monday"]))),128))]),_:1})):ge("",!0)]),_:1}))}};export{Zt as default};
