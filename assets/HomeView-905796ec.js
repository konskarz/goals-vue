import{a as We,Q as Ue}from"./QToolbar-eccdea16.js";import{Q as $}from"./QItemLabel-57d2a5df.js";import{a as q,Q as ne}from"./QItem-02336960.js";import{c as z,D as Se,E as De,U as ze,f as w,h as C,S as ie,g as se,aw as ke,d as Xe,e as te,j as Ke,ae as B,ax as Ze,ay as Ge,I as Je,r as oe,a1 as P,a2 as h,az as T,aA as et,a7 as I,a8 as f,aB as ae,aC as tt,a9 as j,aD as at,aE as rt,aa as A,af as ve,aF as W,ab as Ee,ad as Me,ac as we,aG as re,aH as _e}from"./index-10eca467.js";import{Q as Te}from"./QList-e3d831a5.js";import{Q as nt}from"./QMenu-4c5b4246.js";import{Q as it}from"./GoalStore-61358c45.js";import{u as le}from"./TaskStore-598b8bc2.js";import{_ as ot}from"./GoalSelect-ed92ad0a.js";import{d as Y}from"./date-b07ed117.js";import{_ as st,u as lt}from"./NumberInput-957ff46b.js";import{u as ut}from"./TimeStore-1528a86c.js";import{_ as ct}from"./DurationInput-dc4949e3.js";import"./format-ff5bcb16.js";const dt=z({name:"QTimeline",props:{...Se,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:i=>["left","right"].includes(i)},layout:{type:String,default:"dense",validator:i=>["dense","comfortable","loose"].includes(i)}},setup(i,{slots:o}){const s=se(),n=De(i,s.proxy.$q);ze(ke,i);const e=w(()=>`q-timeline q-timeline--${i.layout} q-timeline--${i.layout}--${i.side}`+(n.value===!0?" q-timeline--dark":""));return()=>C("ul",{class:e.value},ie(o.default))}}),ft=z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:i=>["left","right"].includes(i)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(i,{slots:o}){const s=Xe(ke,te);if(s===te)return console.error("QTimelineEntry needs to be child of QTimeline"),te;const n=w(()=>`q-timeline__entry q-timeline__entry--${i.side}`+(i.icon!==void 0||i.avatar!==void 0?" q-timeline__entry--icon":"")),e=w(()=>`q-timeline__dot text-${i.color||s.color}`),r=w(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const l=Ke(o.default,[]);if(i.body!==void 0&&l.unshift(i.body),i.heading===!0){const c=[C("div"),C("div"),C(i.tag,{class:"q-timeline__heading-title"},l)];return C("div",{class:"q-timeline__heading"},r.value===!0?c.reverse():c)}let u;i.icon!==void 0?u=[C(B,{class:"row items-center justify-center",name:i.icon})]:i.avatar!==void 0&&(u=[C("img",{class:"q-timeline__dot-img",src:i.avatar})]);const y=[C("div",{class:"q-timeline__subtitle"},[C("span",{},ie(o.subtitle,[i.subtitle]))]),C("div",{class:e.value},u),C("div",{class:"q-timeline__content"},[C("h6",{class:"q-timeline__title"},ie(o.title,[i.title]))].concat(l))];return C("li",{class:n.value},r.value===!0?y.reverse():y)}}}),ht={xs:2,sm:4,md:6,lg:10,xl:14};function pe(i,o,s){return{transform:o===!0?`translateX(${s.lang.rtl===!0?"-":""}100%) scale3d(${-i},1,1)`:`scale3d(${i},1,1)`}}const mt=z({name:"QLinearProgress",props:{...Se,...Ze,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(i,{slots:o}){const{proxy:s}=se(),n=De(i,s.$q),e=Ge(i,ht),r=w(()=>i.indeterminate===!0||i.query===!0),l=w(()=>i.reverse!==i.query),u=w(()=>({...e.value!==null?e.value:{},"--q-linear-progress-speed":`${i.animationSpeed}ms`})),y=w(()=>"q-linear-progress"+(i.color!==void 0?` text-${i.color}`:"")+(i.reverse===!0||i.query===!0?" q-linear-progress--reverse":"")+(i.rounded===!0?" rounded-borders":"")),c=w(()=>pe(i.buffer!==void 0?i.buffer:1,l.value,s.$q)),d=w(()=>`with${i.instantFeedback===!0?"out":""}-transition`),M=w(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${d.value} q-linear-progress__track--${n.value===!0?"dark":"light"}`+(i.trackColor!==void 0?` bg-${i.trackColor}`:"")),O=w(()=>pe(r.value===!0?1:i.value,l.value,s.$q)),b=w(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${d.value} q-linear-progress__model--${r.value===!0?"in":""}determinate`),X=w(()=>({width:`${i.value*100}%`})),K=w(()=>`q-linear-progress__stripe absolute-${i.reverse===!0?"right":"left"} q-linear-progress__stripe--${d.value}`);return()=>{const F=[C("div",{class:M.value,style:c.value}),C("div",{class:b.value,style:O.value})];return i.stripe===!0&&r.value===!1&&F.push(C("div",{class:K.value,style:X.value})),C("div",{class:y.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":i.indeterminate===!0?void 0:i.value},Je(o.default,F))}}});var ue={};(function i(o,s,n,e){var r=!!(o.Worker&&o.Blob&&o.Promise&&o.OffscreenCanvas&&o.OffscreenCanvasRenderingContext2D&&o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype.transferControlToOffscreen&&o.URL&&o.URL.createObjectURL);function l(){}function u(a){var t=s.exports.Promise,_=t!==void 0?t:o.Promise;return typeof _=="function"?new _(a):(a(l,l),null)}var y=function(){var a=Math.floor(16.666666666666668),t,_,m={},S=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(p){var g=Math.random();return m[g]=requestAnimationFrame(function v(E){S===E||S+a-1<E?(S=E,delete m[g],p()):m[g]=requestAnimationFrame(v)}),g},_=function(p){m[p]&&cancelAnimationFrame(m[p])}):(t=function(p){return setTimeout(p,a)},_=function(p){return clearTimeout(p)}),{frame:t,cancel:_}}(),c=function(){var a,t,_={};function m(S){function p(g,v){S.postMessage({options:g||{},callback:v})}S.init=function(v){var E=v.transferControlToOffscreen();S.postMessage({canvas:E},[E])},S.fire=function(v,E,L){if(t)return p(v,null),t;var D=Math.random().toString(36).slice(2);return t=u(function(H){function x(k){k.data.callback===D&&(delete _[D],S.removeEventListener("message",x),t=null,L(),H())}S.addEventListener("message",x),p(v,D),_[D]=x.bind(null,{data:{callback:D}})}),t},S.reset=function(){S.postMessage({reset:!0});for(var v in _)_[v](),delete _[v]}}return function(){if(a)return a;if(!n&&r){var S=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([S])))}catch(p){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",p),null}m(a)}return a}}(),d={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function M(a,t){return t?t(a):a}function O(a){return a!=null}function b(a,t,_){return M(a&&O(a[t])?a[t]:d[t],_)}function X(a){return a<0?0:Math.floor(a)}function K(a,t){return Math.floor(Math.random()*(t-a))+a}function F(a){return parseInt(a,16)}function Ie(a){return a.map(Pe)}function Pe(a){var t=String(a).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:F(t.substring(0,2)),g:F(t.substring(2,4)),b:F(t.substring(4,6))}}function Oe(a){var t=b(a,"origin",Object);return t.x=b(t,"x",Number),t.y=b(t,"y",Number),t}function xe(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function He(a){var t=a.getBoundingClientRect();a.width=t.width,a.height=t.height}function Le(a){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=a,t}function qe(a,t,_,m,S,p,g,v,E){a.save(),a.translate(t,_),a.rotate(p),a.scale(m,S),a.arc(0,0,1,g,v,E),a.restore()}function Re(a){var t=a.angle*(Math.PI/180),_=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-t+(.5*_-Math.random()*_),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar}}function Fe(a,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var _=t.tick++/t.totalTicks,m=t.x+t.random*t.tiltCos,S=t.y+t.random*t.tiltSin,p=t.wobbleX+t.random*t.tiltCos,g=t.wobbleY+t.random*t.tiltSin;if(a.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-_)+")",a.beginPath(),t.shape==="circle")a.ellipse?a.ellipse(t.x,t.y,Math.abs(p-m)*t.ovalScalar,Math.abs(g-S)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):qe(a,t.x,t.y,Math.abs(p-m)*t.ovalScalar,Math.abs(g-S)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var v=Math.PI/2*3,E=4*t.scalar,L=8*t.scalar,D=t.x,H=t.y,x=5,k=Math.PI/x;x--;)D=t.x+Math.cos(v)*L,H=t.y+Math.sin(v)*L,a.lineTo(D,H),v+=k,D=t.x+Math.cos(v)*E,H=t.y+Math.sin(v)*E,a.lineTo(D,H),v+=k;else a.moveTo(Math.floor(t.x),Math.floor(t.y)),a.lineTo(Math.floor(t.wobbleX),Math.floor(S)),a.lineTo(Math.floor(p),Math.floor(g)),a.lineTo(Math.floor(m),Math.floor(t.wobbleY));return a.closePath(),a.fill(),t.tick<t.totalTicks}function Qe(a,t,_,m,S){var p=t.slice(),g=a.getContext("2d"),v,E,L=u(function(D){function H(){v=E=null,g.clearRect(0,0,m.width,m.height),S(),D()}function x(){n&&!(m.width===e.width&&m.height===e.height)&&(m.width=a.width=e.width,m.height=a.height=e.height),!m.width&&!m.height&&(_(a),m.width=a.width,m.height=a.height),g.clearRect(0,0,m.width,m.height),p=p.filter(function(k){return Fe(g,k)}),p.length?v=y.frame(x):H()}v=y.frame(x),E=H});return{addFettis:function(D){return p=p.concat(D),L},canvas:a,promise:L,reset:function(){v&&y.cancel(v),E&&E()}}}function ce(a,t){var _=!a,m=!!b(t||{},"resize"),S=b(t,"disableForReducedMotion",Boolean),p=r&&!!b(t||{},"useWorker"),g=p?c():null,v=_?xe:He,E=a&&g?!!a.__confetti_initialized:!1,L=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,D;function H(k,G,J){for(var Q=b(k,"particleCount",X),N=b(k,"angle",Number),V=b(k,"spread",Number),R=b(k,"startVelocity",Number),$e=b(k,"decay",Number),Ae=b(k,"gravity",Number),Ne=b(k,"drift",Number),fe=b(k,"colors",Ie),Ve=b(k,"ticks",Number),he=b(k,"shapes"),Be=b(k,"scalar"),me=Oe(k),ge=Q,ee=[],je=a.width*me.x,Ye=a.height*me.y;ge--;)ee.push(Re({x:je,y:Ye,angle:N,spread:V,startVelocity:R,color:fe[ge%fe.length],shape:he[K(0,he.length)],ticks:Ve,decay:$e,gravity:Ae,drift:Ne,scalar:Be}));return D?D.addFettis(ee):(D=Qe(a,ee,v,G,J),D.promise)}function x(k){var G=S||b(k,"disableForReducedMotion",Boolean),J=b(k,"zIndex",Number);if(G&&L)return u(function(R){R()});_&&D?a=D.canvas:_&&!a&&(a=Le(J),document.body.appendChild(a)),m&&!E&&v(a);var Q={width:a.width,height:a.height};g&&!E&&g.init(a),E=!0,g&&(a.__confetti_initialized=!0);function N(){if(g){var R={getBoundingClientRect:function(){if(!_)return a.getBoundingClientRect()}};v(R),g.postMessage({resize:{width:R.width,height:R.height}});return}Q.width=Q.height=null}function V(){D=null,m&&o.removeEventListener("resize",N),_&&a&&(document.body.removeChild(a),a=null,E=!1)}return m&&o.addEventListener("resize",N,!1),g?g.fire(k,Q,V):H(k,Q,V)}return x.reset=function(){g&&g.reset(),D&&D.reset()},x}var Z;function de(){return Z||(Z=ce(null,{useWorker:!0,resize:!0})),Z}s.exports=function(){return de().apply(this,arguments)},s.exports.reset=function(){de().reset()},s.exports.create=ce})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ue,!1);const ye=ue.exports;ue.exports.create;function gt(){var i=3e3,o=Date.now()+i,s={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function n(r,l){return Math.random()*(l-r)+r}var e=setInterval(function(){var r=o-Date.now();if(r<=0)return clearInterval(e);var l=100*(r/i);ye(Object.assign({},s,{particleCount:l,origin:{x:n(.1,.3),y:Math.random()-.2}})),ye(Object.assign({},s,{particleCount:l,origin:{x:n(.7,.9),y:Math.random()-.2}}))},250)}const vt=C("div",{class:"q-space"}),_t=z({name:"QSpace",setup(){return()=>vt}}),pt=()=>!0;function yt(i){const o={};return i.forEach(s=>{o[s]=pt}),o}function U(){const{emit:i,proxy:o}=se(),s=oe(null);function n(){s.value.show()}function e(){s.value.hide()}function r(u){i("ok",u),e()}function l(){i("hide")}return Object.assign(o,{show:n,hide:e}),{dialogRef:s,onDialogHide:l,onDialogOK:r,onDialogCancel:e}}const Ce=["ok","hide"];U.emits=Ce;U.emitsObject=yt(Ce);const bt=rt("div",{class:"text-h6"},"Progress",-1),St={__name:"ProgressDialog",props:{task:{type:Object,required:!0}},emits:[...U.emits],setup(i){const o=i,s=oe(o.task.performance),n=oe(null),e=w(()=>{let M="of "+o.task.target;const O=o.task.performance_history;return O&&O.length&&(M+=" Â· changed "+Y.formatDate(O[0].updated,"DD.MM.YYYY HH:mm")),M}),{dialogRef:r,onDialogHide:l,onDialogOK:u,onDialogCancel:y}=U(),c=w(()=>s.value===o.task.performance&&!n.value);function d(){u({performance:s.value,duration:n.value})}return(M,O)=>(I(),P(et,{ref_key:"dialogRef",ref:r,onHide:T(l)},{default:h(()=>[f(at,{class:"q-dialog-plugin"},{default:h(()=>[f(ae,null,{default:h(()=>[bt]),_:1}),f(ae,null,{default:h(()=>[f(st,{modelValue:s.value,"onUpdate:modelValue":O[0]||(O[0]=b=>s.value=b),label:"Performance",hint:T(e)},null,8,["modelValue","hint"])]),_:1}),f(ae,null,{default:h(()=>[f(ct,{modelValue:n.value,"onUpdate:modelValue":O[1]||(O[1]=b=>n.value=b),label:"Time spent"},null,8,["modelValue"])]),_:1}),f(tt,{align:"right"},{default:h(()=>[f(j,{flat:"",label:"Edit Task",class:"text-primary",to:{name:"task",params:{id:i.task.id}}},null,8,["to"]),f(_t),f(j,{flat:"",label:"Cancel",class:"text-primary",onClick:T(y)},null,8,["onClick"]),f(j,{disable:T(c),flat:"",label:"Submit",class:"text-primary",onClick:d},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Dt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},setup(i){const o=i,s=lt(),n=le(),e=ut(),r=w(()=>o.task.target>1&&!o.task.done),l=w(()=>r.value?o.task.performance/o.task.target:0),u=w(()=>[o.task.performance,"of",o.task.target].join(" "));function y(){s.dialog({component:St,componentProps:{task:o.task}}).onOk(c=>{if(c.performance!==o.task.performance){c.performance>=o.task.target&&gt();const d={performance:c.performance};n.updateItem(o.task.id+"/",d).then(()=>n.refetch())}c.duration&&e.createItem({task:o.task.id,start:new Date().toISOString(),end:null,duration:c.duration,description:""}).then(()=>{e.refetch()})})}return(c,d)=>(I(),P(ne,{clickable:"",active:Boolean(i.task.done),"active-class":"text-positive"},{default:h(()=>[i.task.done?(I(),P(q,{key:0,thumbnail:""},{default:h(()=>[f(B,{name:"done",color:"positive"})]),_:1})):i.task.group_id?(I(),P(q,{key:1,thumbnail:""},{default:h(()=>[f(B,{name:"event_repeat"})]),_:1})):(I(),P(q,{key:2,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:d[0]||(d[0]=M=>c.$emit("ondragstart",M,i.task)),"onTouchmove:native":d[1]||(d[1]=M=>{})},{default:h(()=>[f(B,{name:"drag_indicator"})]),_:1})),f(q,{onClick:y},{default:h(()=>[f($,null,{default:h(()=>[A(ve(i.task.name),1)]),_:1}),T(r)?(I(),P($,{key:0,caption:""},{default:h(()=>[A(ve(T(u)),1)]),_:1})):W("",!0),T(r)?(I(),P($,{key:1},{default:h(()=>[f(mt,{value:T(l),color:"positive"},null,8,["value"])]),_:1})):W("",!0)]),_:1})]),_:1},8,["active"]))}};var be;(function(i){var o=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,r){this._data[e]=r},n.prototype.setDragImage=function(e,r,l){var u=s._instance;u._imgCustom=e,u._imgOffset={x:r,y:l}},n}();i.DataTransfer=o;var s=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var r=document,l=this._touchstart.bind(this),u=this._touchmove.bind(this),y=this._touchend.bind(this),c=e?{passive:!1,capture:!1}:!1;r.addEventListener("touchstart",l,c),r.addEventListener("touchmove",u,c),r.addEventListener("touchend",y),r.addEventListener("touchcancel",y)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var r=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){r._dragSource==l&&r._img==null&&r._dispatchEvent(e,"contextmenu",l)&&r._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){r._isDragEnabled=!0,r._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var r=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",r)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",r)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),r!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",r),this._lastTarget=r),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",r))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var r=this._getDelta(e);return r>n._THRESHOLD||n._ISPRESSHOLDMODE&&r>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new o,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,r){return e&&e.touches&&(e=e.touches[0]),{x:r?e.pageX:e.clientX,y:r?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var r=this._getPoint(e);return Math.abs(r.x-this._ptDown.x)+Math.abs(r.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var r=this._getPoint(e),l=document.elementFromPoint(r.x,r.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},n.prototype._createImage=function(e){this._img&&this._destroyImage();var r=this._imgCustom||this._dragSource;if(this._img=r.cloneNode(!0),this._copyStyle(r,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=r.getBoundingClientRect(),u=this._getPoint(e);this._imgOffset={x:u.x-l.left,y:u.y-l.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var r=this;requestAnimationFrame(function(){if(r._img){var l=r._getPoint(e,!0),u=r._img.style;u.position="absolute",u.pointerEvents="none",u.zIndex="999999",u.left=Math.round(l.x-r._imgOffset.x)+"px",u.top=Math.round(l.y-r._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,r,l){for(var u=0;u<l.length;u++){var y=l[u];e[y]=r[y]}},n.prototype._copyStyle=function(e,r){if(n._rmvAtts.forEach(function(M){r.removeAttribute(M)}),e instanceof HTMLCanvasElement){var l=e,u=r;u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)}for(var y=getComputedStyle(e),c=0;c<y.length;c++){var d=y[c];d.indexOf("transition")<0&&(r.style[d]=y[d])}r.style.pointerEvents="none";for(var c=0;c<e.children.length;c++)this._copyStyle(e.children[c],r.children[c])},n.prototype._dispatchEvent=function(e,r,l){if(e&&l){var u=document.createEvent("Event"),y=e.touches?e.touches[0]:e;return u.initEvent(r,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,e,n._kbdProps),this._copyProps(u,y,n._ptProps),u.dataTransfer=this._dataTransfer,l.dispatchEvent(u),u.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();s._instance=new s,s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),i.DragDropTouch=s})(be||(be={}));const kt={__name:"WeekTimelineEntry",props:{week:{type:Object,required:!0}},setup(i){const o=i,s=le(),n=w(()=>o.week.tasks.length?[...o.week.tasks].sort((c,d)=>d.target-c.target):null),e=new Date(o.week.day),r=Y.formatDate(e,"w-Q-YYYY-MMM D").split("-"),l=["Week "+r[0],"Q"+r[1],r[2],r[3]].join(" Â· ");function u(c,d){const M={id:d.id,day:Y.getDayOfWeek(d.planned),week:r[0]};c.dataTransfer.setData("text",JSON.stringify(M)),c.dataTransfer.dropEffect="move"}function y(c){const d=JSON.parse(c.dataTransfer.getData("text"));if(d.week===r[0])return;const M={planned:Y.addToDate(e,{days:d.day-1}).toISOString()};s.updateItem(d.id+"/",M).then(()=>s.refetch())}return(c,d)=>(I(),P(ft,{subtitle:T(l),onDragover:d[0]||(d[0]=re(()=>{},["prevent"])),onDragenter:d[1]||(d[1]=re(()=>{},["prevent"])),onDrop:d[2]||(d[2]=re(M=>y(M),["prevent"]))},{default:h(()=>[T(n)?(I(),P(Te,{key:0},{default:h(()=>[(I(!0),Ee(Me,null,we(T(n),M=>(I(),P(Dt,{key:M.id,task:M,onOndragstart:u},null,8,["task"]))),128))]),_:1})):W("",!0)]),_:1},8,["subtitle"]))}},Qt={__name:"HomeView",setup(i){const o=le();return(s,n)=>(I(),P(it,{padding:""},{default:h(()=>[f(Ue,null,{default:h(()=>[f(We,null,{default:h(()=>[A("Plan")]),_:1}),f(ot,{modelValue:T(o).filter.goal,"onUpdate:modelValue":n[0]||(n[0]=e=>T(o).filter.goal=e),label:"For Goal",dense:"",borderless:"",class:"col-6 col-sm-3 col-lg-2"},null,8,["modelValue"]),f(j,{flat:"",round:"",icon:"filter_list"},{default:h(()=>[f(nt,null,{default:h(()=>[f(Te,null,{default:h(()=>[f(ne,null,{default:h(()=>[f(q,null,{default:h(()=>[f($,null,{default:h(()=>[A("Hide passed done")]),_:1})]),_:1}),f(q,{side:""},{default:h(()=>[f(_e,{modelValue:T(o).filter.done,"onUpdate:modelValue":n[1]||(n[1]=e=>T(o).filter.done=e)},null,8,["modelValue"])]),_:1})]),_:1}),f(ne,null,{default:h(()=>[f(q,null,{default:h(()=>[f($,null,{default:h(()=>[A("Hide passed recurring")]),_:1})]),_:1}),f(q,{side:""},{default:h(()=>[f(_e,{modelValue:T(o).filter.recurring,"onUpdate:modelValue":n[2]||(n[2]=e=>T(o).filter.recurring=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),T(o).calendar?(I(),P(dt,{key:0,layout:"dense",class:"q-px-md"},{default:h(()=>[(I(!0),Ee(Me,null,we(T(o).calendar,(e,r)=>(I(),P(kt,{key:r,color:r===T(o).currentWeek?"orange":"",week:e},null,8,["color","week"]))),128))]),_:1})):W("",!0)]),_:1}))}};export{Qt as default};
