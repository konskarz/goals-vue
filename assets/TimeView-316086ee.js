import{Q as S,a as w}from"./QToolbar-544ca16a.js";import{f as c,a1 as f,a2 as n,a4 as C,a7 as b,a8 as t,aa as I,aw as e,a9 as r,ay as x,aG as V,b2 as k,aZ as B,b8 as N,aH as U}from"./index-d2c79a88.js";import{Q as q}from"./QForm-c3818407.js";import{Q as D}from"./GoalStore-2c01810a.js";import{u as K}from"./TimeStore-7b4fbed1.js";import{u as F}from"./TaskStore-1c10bc0f.js";import{u as P,_}from"./DateInput-de0e91f5.js";import{_ as R}from"./DurationInput-6ddac7a0.js";import"./date-b3561e64.js";import"./format-ff5bcb16.js";const $={class:"q-pa-md"},E={class:"row q-col-gutter-lg"},Y={__name:"TimeView",setup(G){const i=C(),d=K(),v=F(),s=parseInt(i.params.id),{item:a,original:y,persist:m,remove:Q,save:T,back:p}=P(s,d,{task:parseInt(i.params.task),start:new Date().toISOString(),end:null,duration:null,description:""}),g=c(()=>!a.value.duration||m.value||Boolean(s&&!d.isChanged(y,{...a.value}))),u=c(()=>v.getItem(a.value.task).name);return(H,o)=>(b(),f(D,{padding:""},{default:n(()=>[t(q,{onSubmit:U(e(T),["prevent"])},{default:n(()=>[t(S,null,{default:n(()=>[t(w,null,{default:n(()=>[I("Time")]),_:1}),e(s)?(b(),f(r,{key:0,type:"button",flat:"",round:"",icon:"delete",disable:e(m),onClick:e(Q)},null,8,["disable","onClick"])):x("",!0),t(r,{type:"submit",flat:"",round:"",icon:"save",disable:e(g)},null,8,["disable"]),t(r,{type:"button",flat:"",round:"",icon:"clear",onClick:e(p)},null,8,["onClick"])]),_:1}),V("div",$,[V("div",E,[t(k,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=l=>B(u)?u.value=l:null),label:"Task","stack-label":"",readonly:"",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(R,{modelValue:e(a).duration,"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).duration=l),label:"Duration",class:"col-12 col-sm-6",autofocus:!e(s),rules:[l=>!!l||"Field is required"],onKeyup:N(e(p),["esc"])},null,8,["modelValue","autofocus","rules","onKeyup"]),t(_,{modelValue:e(a).start,"onUpdate:modelValue":o[2]||(o[2]=l=>e(a).start=l),label:"Start",class:"col-12 col-sm-6"},null,8,["modelValue"]),t(_,{modelValue:e(a).end,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).end=l),label:"End",class:"col-12 col-sm-6"},null,8,["modelValue"])]),t(k,{modelValue:e(a).description,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).description=l),type:"textarea",label:"Description","stack-label":"",class:"q-pt-md"},null,8,["modelValue"])])]),_:1},8,["onSubmit"])]),_:1}))}};export{Y as default};
