import{r as m,M as h,j as V,R as I,S as k}from"./index-df1bcde5.js";import{Q as S}from"./QForm-51b13da5.js";function O(t,e,a){const l=m(t?{...e.getItem(t)}:a),n=m(t+"/"),u=m(!1),r=t?{...l.value}:null,p=h();function i(c,s){return Object.fromEntries(Object.entries(s).filter(([v,g])=>c[v]!==g))}function f(c,s){return Object.keys(i(c,s)).length}function o(){p.back()}function d(){u.value=!0,e.deleteItem(n.value).then(()=>{e.refetch(),o()})}function b(){u.value=!0,t?e.updateItem(n.value,i(r,{...l.value})).then(()=>{e.refetch(),o()}):e.createItem(l.value).then(()=>{e.refetch(),o()})}return{item:l,original:r,path:n,persist:u,changed:f,remove:d,save:b,back:o}}const _={__name:"DateInput",props:{label:{type:String,required:!0},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,l=V({get(){return a.modelValue?a.modelValue.slice(0,10):null},set(n){e("update:modelValue",n?new Date(n).toISOString():null)}});return(n,u)=>(I(),k(S,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=r=>l.value=r),type:"date",label:t.label,"stack-label":""},null,8,["modelValue","label"]))}};export{_,O as u};
