import{u as Ve,a as Be,b as Ye,Q as We}from"./use-dark-0cceb085.js";import{c as ae,g as je,H as Ue,$ as be,j as P,h as T,G as z,m as $e,a0 as Xe,r as ze,i as fe,a1 as Ze,F as Ke,d as Ge,e as ee,k as Je,Z as U,L as et,Q as E,R as C,S as w,T as I,V as $,_ as te,a2 as N,U as X,a3 as tt,W as re,Y as Se,X as De,a4 as O,a5 as ne,E as nt,a6 as rt,a7 as at}from"./index-f68e99f6.js";import{Q as me}from"./QToggle-1d4b4967.js";import{Q as it}from"./QSlideTransition-86d3f7fd.js";import{u as ie,d as H,Q as ot}from"./TaskStore-23893479.js";import{_ as st}from"./GoalSelect-0eb367bb.js";import{a as W,b as j,Q as lt}from"./QItemLabel-7ae10be8.js";import{Q as ut}from"./QLinearProgress-bec28d73.js";import"./format-8c778330.js";import"./use-field-47eecc96.js";import"./uid-6a237b22.js";import"./use-timeout-d439e5df.js";import"./use-model-toggle-504f14dc.js";const ct=ae({name:"QTimeline",props:{...Ve,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:i=>["left","right"].includes(i)},layout:{type:String,default:"dense",validator:i=>["dense","comfortable","loose"].includes(i)}},setup(i,{slots:o}){const s=je(),a=Be(i,s.proxy.$q);Ue(be,i);const e=P(()=>`q-timeline q-timeline--${i.layout} q-timeline--${i.layout}--${i.side}`+(a.value===!0?" q-timeline--dark":""));return()=>T("ul",{class:e.value},z(o.default))}}),ge={threshold:0,root:null,rootMargin:"0px"};function ve(i,o,s){let a,e,r;typeof s=="function"?(a=s,e=ge,r=o.cfg===void 0):(a=s.handler,e=Object.assign({},ge,s.cfg),r=o.cfg===void 0||Xe(o.cfg,e)===!1),o.handler!==a&&(o.handler=a),r===!0&&(o.cfg=e,o.observer!==void 0&&o.observer.unobserve(i),o.observer=new IntersectionObserver(([l])=>{if(typeof o.handler=="function"){if(l.rootBounds===null&&document.body.contains(i)===!0){o.observer.unobserve(i),o.observer.observe(i);return}(o.handler(l,o.observer)===!1||o.once===!0&&l.isIntersecting===!0)&&Me(i)}},e),o.observer.observe(i))}function Me(i){const o=i.__qvisible;o!==void 0&&(o.observer!==void 0&&o.observer.unobserve(i),delete i.__qvisible)}const dt=$e({name:"intersection",mounted(i,{modifiers:o,value:s}){const a={once:o.once===!0};ve(i,a,s),i.__qvisible=a},updated(i,o){const s=i.__qvisible;s!==void 0&&ve(i,s,o.value)},beforeUnmount:Me}),ht=ae({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(i,{slots:o,emit:s}){const a=ze(fe.value===!0?i.ssrPrerender:!1),e=P(()=>i.root!==void 0||i.margin!==void 0||i.threshold!==void 0?{handler:_,cfg:{root:i.root,rootMargin:i.margin,threshold:i.threshold}}:_),r=P(()=>i.disable!==!0&&(fe.value!==!0||i.once!==!0||i.ssrPrerender!==!0)),l=P(()=>[[dt,e.value,void 0,{once:i.once}]]),u=P(()=>`--q-transition-duration: ${i.transitionDuration}ms`);function _(d){a.value!==d.isIntersecting&&(a.value=d.isIntersecting,i.onVisibility!==void 0&&s("visibility",a.value))}function c(){if(a.value===!0)return[T("div",{key:"content",style:u.value},z(o.default))];if(o.hidden!==void 0)return[T("div",{key:"hidden",style:u.value},o.hidden())]}return()=>{const d=i.transition?[T(Ze,{name:"q-transition--"+i.transition},c)]:c();return Ke(i.tag,{class:"q-intersection"},d,"main",r.value,()=>l.value)}}}),ft=ae({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:i=>["left","right"].includes(i)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(i,{slots:o}){const s=Ge(be,ee);if(s===ee)return console.error("QTimelineEntry needs to be child of QTimeline"),ee;const a=P(()=>`q-timeline__entry q-timeline__entry--${i.side}`+(i.icon!==void 0||i.avatar!==void 0?" q-timeline__entry--icon":"")),e=P(()=>`q-timeline__dot text-${i.color||s.color}`),r=P(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const l=Je(o.default,[]);if(i.body!==void 0&&l.unshift(i.body),i.heading===!0){const c=[T("div"),T("div"),T(i.tag,{class:"q-timeline__heading-title"},l)];return T("div",{class:"q-timeline__heading"},r.value===!0?c.reverse():c)}let u;i.icon!==void 0?u=[T(U,{class:"row items-center justify-center",name:i.icon})]:i.avatar!==void 0&&(u=[T("img",{class:"q-timeline__dot-img",src:i.avatar})]);const _=[T("div",{class:"q-timeline__subtitle"},[T("span",{},z(o.subtitle,[i.subtitle]))]),T("div",{class:e.value},u),T("div",{class:"q-timeline__content"},[T("h6",{class:"q-timeline__title"},z(o.title,[i.title]))].concat(l))];return T("li",{class:a.value},r.value===!0?_.reverse():_)}}});var oe={};(function i(o,s,a,e){var r=!!(o.Worker&&o.Blob&&o.Promise&&o.OffscreenCanvas&&o.OffscreenCanvasRenderingContext2D&&o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype.transferControlToOffscreen&&o.URL&&o.URL.createObjectURL);function l(){}function u(n){var t=s.exports.Promise,g=t!==void 0?t:o.Promise;return typeof g=="function"?new g(n):(n(l,l),null)}var _=function(){var n=Math.floor(16.666666666666668),t,g,h={},p=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(v){var f=Math.random();return h[f]=requestAnimationFrame(function m(D){p===D||p+n-1<D?(p=D,delete h[f],v()):h[f]=requestAnimationFrame(m)}),f},g=function(v){h[v]&&cancelAnimationFrame(h[v])}):(t=function(v){return setTimeout(v,n)},g=function(v){return clearTimeout(v)}),{frame:t,cancel:g}}(),c=function(){var n,t,g={};function h(p){function v(f,m){p.postMessage({options:f||{},callback:m})}p.init=function(m){var D=m.transferControlToOffscreen();p.postMessage({canvas:D},[D])},p.fire=function(m,D,q){if(t)return v(m,null),t;var y=Math.random().toString(36).slice(2);return t=u(function(R){function L(b){b.data.callback===y&&(delete g[y],p.removeEventListener("message",L),t=null,q(),R())}p.addEventListener("message",L),v(m,y),g[y]=L.bind(null,{data:{callback:y}})}),t},p.reset=function(){p.postMessage({reset:!0});for(var m in g)g[m](),delete g[m]}}return function(){if(n)return n;if(!a&&r){var p=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{n=new Worker(URL.createObjectURL(new Blob([p])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",v),null}h(n)}return n}}(),d={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function M(n,t){return t?t(n):n}function F(n){return n!=null}function S(n,t,g){return M(n&&F(n[t])?n[t]:d[t],g)}function k(n){return n<0?0:Math.floor(n)}function Q(n,t){return Math.floor(Math.random()*(t-n))+n}function V(n){return parseInt(n,16)}function Ee(n){return n.map(ke)}function ke(n){var t=String(n).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:V(t.substring(0,2)),g:V(t.substring(2,4)),b:V(t.substring(4,6))}}function Te(n){var t=S(n,"origin",Object);return t.x=S(t,"x",Number),t.y=S(t,"y",Number),t}function we(n){n.width=document.documentElement.clientWidth,n.height=document.documentElement.clientHeight}function Ie(n){var t=n.getBoundingClientRect();n.width=t.width,n.height=t.height}function Ce(n){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=n,t}function Pe(n,t,g,h,p,v,f,m,D){n.save(),n.translate(t,g),n.rotate(v),n.scale(h,p),n.arc(0,0,1,f,m,D),n.restore()}function Oe(n){var t=n.angle*(Math.PI/180),g=n.spread*(Math.PI/180);return{x:n.x,y:n.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:n.startVelocity*.5+Math.random()*n.startVelocity,angle2D:-t+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:n.color,shape:n.shape,tick:0,totalTicks:n.ticks,decay:n.decay,drift:n.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:n.gravity*3,ovalScalar:.6,scalar:n.scalar}}function Le(n,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var g=t.tick++/t.totalTicks,h=t.x+t.random*t.tiltCos,p=t.y+t.random*t.tiltSin,v=t.wobbleX+t.random*t.tiltCos,f=t.wobbleY+t.random*t.tiltSin;if(n.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-g)+")",n.beginPath(),t.shape==="circle")n.ellipse?n.ellipse(t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Pe(n,t.x,t.y,Math.abs(v-h)*t.ovalScalar,Math.abs(f-p)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var m=Math.PI/2*3,D=4*t.scalar,q=8*t.scalar,y=t.x,R=t.y,L=5,b=Math.PI/L;L--;)y=t.x+Math.cos(m)*q,R=t.y+Math.sin(m)*q,n.lineTo(y,R),m+=b,y=t.x+Math.cos(m)*D,R=t.y+Math.sin(m)*D,n.lineTo(y,R),m+=b;else n.moveTo(Math.floor(t.x),Math.floor(t.y)),n.lineTo(Math.floor(t.wobbleX),Math.floor(p)),n.lineTo(Math.floor(v),Math.floor(f)),n.lineTo(Math.floor(h),Math.floor(t.wobbleY));return n.closePath(),n.fill(),t.tick<t.totalTicks}function Re(n,t,g,h,p){var v=t.slice(),f=n.getContext("2d"),m,D,q=u(function(y){function R(){m=D=null,f.clearRect(0,0,h.width,h.height),p(),y()}function L(){a&&!(h.width===e.width&&h.height===e.height)&&(h.width=n.width=e.width,h.height=n.height=e.height),!h.width&&!h.height&&(g(n),h.width=n.width,h.height=n.height),f.clearRect(0,0,h.width,h.height),v=v.filter(function(b){return Le(f,b)}),v.length?m=_.frame(L):R()}m=_.frame(L),D=R});return{addFettis:function(y){return v=v.concat(y),q},canvas:n,promise:q,reset:function(){m&&_.cancel(m),D&&D()}}}function se(n,t){var g=!n,h=!!S(t||{},"resize"),p=S(t,"disableForReducedMotion",Boolean),v=r&&!!S(t||{},"useWorker"),f=v?c():null,m=g?we:Ie,D=n&&f?!!n.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,y;function R(b,K,G){for(var A=S(b,"particleCount",k),B=S(b,"angle",Number),Y=S(b,"spread",Number),x=S(b,"startVelocity",Number),qe=S(b,"decay",Number),xe=S(b,"gravity",Number),He=S(b,"drift",Number),ue=S(b,"colors",Ee),Fe=S(b,"ticks",Number),ce=S(b,"shapes"),Ae=S(b,"scalar"),de=Te(b),he=A,J=[],Ne=n.width*de.x,Qe=n.height*de.y;he--;)J.push(Oe({x:Ne,y:Qe,angle:B,spread:Y,startVelocity:x,color:ue[he%ue.length],shape:ce[Q(0,ce.length)],ticks:Fe,decay:qe,gravity:xe,drift:He,scalar:Ae}));return y?y.addFettis(J):(y=Re(n,J,m,K,G),y.promise)}function L(b){var K=p||S(b,"disableForReducedMotion",Boolean),G=S(b,"zIndex",Number);if(K&&q)return u(function(x){x()});g&&y?n=y.canvas:g&&!n&&(n=Ce(G),document.body.appendChild(n)),h&&!D&&m(n);var A={width:n.width,height:n.height};f&&!D&&f.init(n),D=!0,f&&(n.__confetti_initialized=!0);function B(){if(f){var x={getBoundingClientRect:function(){if(!g)return n.getBoundingClientRect()}};m(x),f.postMessage({resize:{width:x.width,height:x.height}});return}A.width=A.height=null}function Y(){y=null,h&&o.removeEventListener("resize",B),g&&n&&(document.body.removeChild(n),n=null,D=!1)}return h&&o.addEventListener("resize",B,!1),f?f.fire(b,A,Y):R(b,A,Y)}return L.reset=function(){f&&f.reset(),y&&y.reset()},L}var Z;function le(){return Z||(Z=se(null,{useWorker:!0,resize:!0})),Z}s.exports=function(){return le().apply(this,arguments)},s.exports.reset=function(){le().reset()},s.exports.create=se})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),oe,!1);const _e=oe.exports;oe.exports.create;function pe(){var i=3e3,o=Date.now()+i,s={startVelocity:30,spread:360,ticks:60,zIndex:0,disableForReducedMotion:!0};function a(r,l){return Math.random()*(l-r)+r}var e=setInterval(function(){var r=o-Date.now();if(r<=0)return clearInterval(e);var l=100*(r/i);_e(Object.assign({},s,{particleCount:l,origin:{x:a(.1,.3),y:Math.random()-.2}})),_e(Object.assign({},s,{particleCount:l,origin:{x:a(.7,.9),y:Math.random()-.2}}))},250)}const mt={__name:"TaskListItem",props:{task:{type:Object,required:!0}},emits:["ondragstart"],setup(i,{emit:o}){const s=i,a=et(),e=ie(),r=P(()=>s.task.target>1&&!s.task.done),l=P(()=>r.value?s.task.performance/s.task.target:0),u=P(()=>[s.task.performance,"of",s.task.target].join(" ")),_=P(()=>{const k=s.task.performance_history;return k&&k.length?H.formatDate(k[0].updated,"DD.MM.YYYY HH:mm"):null});function c(){a.push({name:"task",params:{id:s.task.id}})}function d(){const k={done:null};s.task.performance>=s.task.target&&(k.performance=s.task.target-1),e.updateItem(s.task.id+"/",k).then(()=>e.refetch())}function M(){const k={performance:s.task.performance+1};k.performance>=s.task.target&&pe(),e.updateItem(s.task.id+"/",k).then(()=>e.refetch())}function F(){const k={done:new Date().toISOString()};pe(),e.updateItem(s.task.id+"/",k).then(()=>e.refetch())}function S(k){o("ondragstart",k,s.task)}return(k,Q)=>(E(),C(lt,{clickable:"",active:!!i.task.done,"active-class":"text-positive"},{default:w(()=>[i.task.group_id?(E(),C(W,{key:0,thumbnail:""},{default:w(()=>[I(U,{name:"event_repeat"})]),_:1})):(E(),C(W,{key:1,thumbnail:"",style:{cursor:"grab"},draggable:"true",onDragstart:S,"onTouchmove:native":Q[0]||(Q[0]=V=>{})},{default:w(()=>[I(U,{name:"drag_indicator"})]),_:1})),I(W,{onClick:c},{default:w(()=>[I(j,null,{default:w(()=>[$(te(i.task.name),1)]),_:1}),r.value?(E(),C(j,{key:0,caption:""},{default:w(()=>[$(te(u.value),1)]),_:1})):N("",!0),r.value?(E(),C(j,{key:1},{default:w(()=>[I(ut,{value:l.value,color:"positive"},null,8,["value"])]),_:1})):N("",!0),r.value&&_.value?(E(),C(j,{key:2,caption:""},{default:w(()=>[I(U,{name:"update",class:"vertical-top"}),$(" "+te(_.value),1)]),_:1})):N("",!0)]),_:1}),I(W,{avatar:""},{default:w(()=>[i.task.done?(E(),C(X,{key:0,flat:"",round:"",icon:"check_box",onClick:d})):r.value?(E(),C(X,{key:1,flat:"",round:"",icon:"plus_one",onClick:M})):(E(),C(X,{key:2,flat:"",round:"",icon:"check_box_outline_blank",onClick:F}))]),_:1})]),_:1},8,["active"]))}};var ye;(function(i){var o=function(){function a(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(a.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),a.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},a.prototype.getData=function(e){return this._data[e]||""},a.prototype.setData=function(e,r){this._data[e]=r},a.prototype.setDragImage=function(e,r,l){var u=s._instance;u._imgCustom=e,u._imgOffset={x:r,y:l}},a}();i.DataTransfer=o;var s=function(){function a(){if(this._lastClick=0,a._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var r=document,l=this._touchstart.bind(this),u=this._touchmove.bind(this),_=this._touchend.bind(this),c=e?{passive:!1,capture:!1}:!1;r.addEventListener("touchstart",l,c),r.addEventListener("touchmove",u,c),r.addEventListener("touchend",_),r.addEventListener("touchcancel",_)}}return a.getInstance=function(){return a._instance},a.prototype._touchstart=function(e){var r=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<a._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var l=this._closestDraggable(e.target);l&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=l,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){r._dragSource==l&&r._img==null&&r._dispatchEvent(e,"contextmenu",l)&&r._reset()},a._CTXMENU),a._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){r._isDragEnabled=!0,r._touchmove(e)},a._PRESSHOLDAWAIT)))}},a.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var r=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",r)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",r)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),r!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",r),this._lastTarget=r),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",r))}},a.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},a.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},a.prototype._shouldHandleMove=function(e){return!a._ISPRESSHOLDMODE&&this._shouldHandle(e)},a.prototype._shouldHandlePressHoldMove=function(e){return a._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},a.prototype._shouldCancelPressHoldMove=function(e){return a._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>a._PRESSHOLDMARGIN},a.prototype._shouldStartDragging=function(e){var r=this._getDelta(e);return r>a._THRESHOLD||a._ISPRESSHOLDMODE&&r>=a._PRESSHOLDTHRESHOLD},a.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new o,clearInterval(this._pressHoldInterval)},a.prototype._getPoint=function(e,r){return e&&e.touches&&(e=e.touches[0]),{x:r?e.pageX:e.clientX,y:r?e.pageY:e.clientY}},a.prototype._getDelta=function(e){if(a._ISPRESSHOLDMODE&&!this._ptDown)return 0;var r=this._getPoint(e);return Math.abs(r.x-this._ptDown.x)+Math.abs(r.y-this._ptDown.y)},a.prototype._getTarget=function(e){for(var r=this._getPoint(e),l=document.elementFromPoint(r.x,r.y);l&&getComputedStyle(l).pointerEvents=="none";)l=l.parentElement;return l},a.prototype._createImage=function(e){this._img&&this._destroyImage();var r=this._imgCustom||this._dragSource;if(this._img=r.cloneNode(!0),this._copyStyle(r,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var l=r.getBoundingClientRect(),u=this._getPoint(e);this._imgOffset={x:u.x-l.left,y:u.y-l.top},this._img.style.opacity=a._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},a.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},a.prototype._moveImage=function(e){var r=this;requestAnimationFrame(function(){if(r._img){var l=r._getPoint(e,!0),u=r._img.style;u.position="absolute",u.pointerEvents="none",u.zIndex="999999",u.left=Math.round(l.x-r._imgOffset.x)+"px",u.top=Math.round(l.y-r._imgOffset.y)+"px"}})},a.prototype._copyProps=function(e,r,l){for(var u=0;u<l.length;u++){var _=l[u];e[_]=r[_]}},a.prototype._copyStyle=function(e,r){if(a._rmvAtts.forEach(function(M){r.removeAttribute(M)}),e instanceof HTMLCanvasElement){var l=e,u=r;u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)}for(var _=getComputedStyle(e),c=0;c<_.length;c++){var d=_[c];d.indexOf("transition")<0&&(r.style[d]=_[d])}r.style.pointerEvents="none";for(var c=0;c<e.children.length;c++)this._copyStyle(e.children[c],r.children[c])},a.prototype._dispatchEvent=function(e,r,l){if(e&&l){var u=document.createEvent("Event"),_=e.touches?e.touches[0]:e;return u.initEvent(r,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,e,a._kbdProps),this._copyProps(u,_,a._ptProps),u.dataTransfer=this._dataTransfer,l.dispatchEvent(u),u.defaultPrevented}return!1},a.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},a}();s._instance=new s,s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),i.DragDropTouch=s})(ye||(ye={}));const gt={key:0},vt={__name:"WeekTimelineEntry",props:{tasks:{type:Array,required:!0},monday:{type:String,required:!0}},setup(i){const o=i,s=ie(),a=P(()=>o.tasks.length?[...o.tasks].sort((c,d)=>d.target-c.target):null),e=P(()=>{const c=H.subtractFromDate(o.monday,{days:1}),d=H.addToDate(o.monday,{days:6}),M=S=>H.formatDate(S,"MMMM"),F=M(o.monday);return F!==M(c)||F!==M(d)}),r=H.formatDate(o.monday,"w-Q-YYYY-MMM D").split("-"),l=["Week "+r[0],"Q"+r[1],r[2],r[3]].join(" Â· ");function u(c,d){const M={id:d.id,day:H.getDayOfWeek(d.planned),week:r[0]};c.dataTransfer.setData("text",JSON.stringify(M)),c.dataTransfer.dropEffect="move"}function _(c){const d=JSON.parse(c.dataTransfer.getData("text"));if(d.week===r[0])return;const M={planned:H.addToDate(o.monday,{days:d.day-1}).toISOString()};s.updateItem(d.id+"/",M).then(()=>s.refetch())}return(c,d)=>(E(),C(ft,{color:i.monday===O(s).currentWeek?"orange":"primary",subtitle:O(l),icon:e.value?"calendar_month":void 0,onDragover:d[0]||(d[0]=ne(()=>{},["prevent"])),onDragenter:d[1]||(d[1]=ne(()=>{},["prevent"])),onDrop:d[2]||(d[2]=ne(M=>_(M),["prevent"]))},{default:w(()=>[a.value?(E(),re("div",gt,[(E(!0),re(Se,null,De(a.value,M=>(E(),C(ht,{key:M.id,class:"task-list-item",once:""},{default:w(()=>[I(mt,{task:M,onOndragstart:u},null,8,["task"])]),_:2},1024))),128))])):N("",!0)]),_:1},8,["color","subtitle","icon"]))}},_t=tt(vt,[["__scopeId","data-v-d135276a"]]),pt={class:"row q-pl-lg q-pr-sm"},Lt={__name:"HomeView",setup(i){const o=ie();return(s,a)=>(E(),C(ot,null,{default:w(()=>[I(We,{class:"q-mt-md q-pl-lg"},{default:w(()=>[I(Ye,null,{default:w(()=>[$("Tasks")]),_:1}),I(X,{flat:"",round:"",icon:"filter_list",onClick:a[0]||(a[0]=e=>O(o).filter.show=!O(o).filter.show)})]),_:1}),I(it,null,{default:w(()=>[nt(at("div",pt,[I(st,{modelValue:O(o).filter.goal,"onUpdate:modelValue":a[1]||(a[1]=e=>O(o).filter.goal=e),label:"Filter by goal",borderless:s.$q.screen.gt.xs,dense:"",class:"col-xs-12 col-sm-4 q-pb-md q-pr-md"},null,8,["modelValue","borderless"]),I(me,{modelValue:O(o).filter.done,"onUpdate:modelValue":a[2]||(a[2]=e=>O(o).filter.done=e),label:"Show passed done",dense:"",class:"col-xs-12 col-sm-auto q-pb-md q-pr-md"},null,8,["modelValue"]),I(me,{modelValue:O(o).filter.recurring,"onUpdate:modelValue":a[3]||(a[3]=e=>O(o).filter.recurring=e),label:"Show passed recurring",dense:"",class:"col-xs-12 col-sm-auto q-pb-md q-pr-md"},null,8,["modelValue"])],512),[[rt,O(o).filter.show]])]),_:1}),O(o).calendar?(E(),C(ct,{key:0,class:"q-pl-lg"},{default:w(()=>[(E(!0),re(Se,null,De(O(o).calendar,(e,r)=>(E(),C(_t,{key:r,tasks:e,monday:r},null,8,["tasks","monday"]))),128))]),_:1})):N("",!0)]),_:1}))}};export{Lt as default};
