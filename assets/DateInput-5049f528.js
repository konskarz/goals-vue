import{r as m,a0 as h,j as V,O as I,P as k}from"./index-4bd22d4d.js";import{Q as O}from"./QForm-a303ce31.js";function S(t,e,u){const l=m(t?{...e.getItem(t)}:u),n=m(t+"/"),a=m(!1),r=t?{...l.value}:null,p=h();function i(c,s){return Object.fromEntries(Object.entries(s).filter(([v,g])=>c[v]!==g))}function f(c,s){return Object.keys(i(c,s)).length}function o(){p.back()}function d(){a.value=!0,e.deleteItem(n.value).then(()=>{e.refetch(),o()})}function b(){a.value=!0,t?e.updateItem(n.value,i(r,{...l.value})).then(()=>{e.refetch(),o()}):e.createItem(l.value).then(()=>{e.refetch(),o()})}return{item:l,original:r,path:n,persist:a,changed:f,remove:d,save:b,back:o}}const _={__name:"DateInput",props:{label:{type:String,required:!0},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(t,{emit:e}){const u=t,l=V({get(){return u.modelValue?u.modelValue.slice(0,10):null},set(n){e("update:modelValue",n?new Date(n).toISOString():null)}});return(n,a)=>(I(),k(O,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value=r),type:"date",label:t.label,"stack-label":""},null,8,["modelValue","label"]))}};export{_,S as u};
