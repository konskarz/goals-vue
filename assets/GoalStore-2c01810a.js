import{c as v,d as y,e as i,f as m,h as I,S,g as Q,k as b,V as $,r as x,aI as F,aJ as O}from"./index-d2c79a88.js";const q=v({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:a}}=Q(),n=y(b,i);if(n===i)return console.error("QPage needs to be a deep child of QLayout"),i;if(y($,i)===i)return console.error("QPage needs to be child of QPageContainer"),i;const l=m(()=>{const s=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const h=n.isContainer.value===!0?n.containerHeight.value:a.screen.height;return e.styleFn(s,h)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-s+"px":a.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":a.screen.height-s+"px"}}),g=m(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>I("main",{class:g.value,style:l.value},S(o.default))}});function P(e){const{request:o,get:a}=F(),n=x(JSON.parse(localStorage.getItem(e)));function u(){a(e).then(t=>{n.value=t,localStorage.setItem(e,JSON.stringify(t))})}function l(t){return n.value.find(r=>r.id===t)}function g(t){return o({method:"post",url:e,data:t})}function s(t,r){return o({method:"patch",url:e+t,data:r})}function h(t){return o({method:"delete",url:e+t})}function d(t,r){return Object.fromEntries(Object.entries(r).filter(([p,c])=>t[p]!==c))}function f(t,r){return Object.keys(d(t,r)).length}return u(),{data:n,refetch:u,getItem:l,createItem:g,updateItem:s,deleteItem:h,getChanges:d,isChanged:f}}const C=(e,o=null)=>e.filter(a=>a.parent===o).map(a=>({...a,children:C(e,a.id)})),H=O("GoalStore",()=>{const{data:e,refetch:o,getItem:a,createItem:n,updateItem:u,deleteItem:l,getChanges:g,isChanged:s}=P("/goals/"),h=m(()=>e.value?C(e.value):null);function d(f){const t=[f],r=p=>e.value.filter(c=>c.parent===p).forEach(c=>{t.push(c.id),r(c.id)});return r(f),t}return{data:e,refetch:o,getItem:a,createItem:n,updateItem:u,deleteItem:l,getChanges:g,isChanged:s,tree:h,getBranch:d}});export{q as Q,H as a,P as u};
