import{a as ue,Q as se}from"./QToolbar-27e60abc.js";import{Q as E}from"./QList-a533a05e.js";import{u as ce,Q as de}from"./GoalStore-e18f1ebb.js";import{a$ as ge,c as fe,ag as $,M as me,D as ve,N as he,E as be,r as O,b0 as P,P as _e,f as o,w as T,a as xe,h as n,b1 as A,g as Se,J as Ie,aB as ke,S as ye,ae as G,C as Le,a7 as u,a1 as g,a2 as i,a8 as h,aa as w,af as N,aF as v,aK as q,a6 as Te,ab as D,ad as H,ac as V}from"./index-4b5a4c41.js";import{Q as R,b as S,a as y}from"./QItem-709d8d72.js";import{Q as we,a as qe}from"./QLinearProgress-959bcb8e.js";const m=ge({}),Ce=Object.keys($),Qe=fe({name:"QExpansionItem",props:{...$,...me,...ve,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...he,"click","afterShow","afterHide"],setup(e,{slots:a,emit:r}){const{proxy:{$q:s}}=Se(),c=be(e,s),l=O(e.modelValue!==null?e.modelValue:e.defaultOpened),b=O(null),x=P(),{show:K,hide:C,toggle:L}=_e({showing:l});let f,_;const M=o(()=>`q-expansion-item q-item-type q-expansion-item--${l.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),U=o(()=>e.contentInsetLevel===void 0?null:{["padding"+(s.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),I=o(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),F=o(()=>{const t={};return Ce.forEach(d=>{t[d]=e[d]}),t}),J=o(()=>I.value===!0||e.expandIconToggle!==!0),z=o(()=>e.expandedIcon!==void 0&&l.value===!0?e.expandedIcon:e.expandIcon||s.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),W=o(()=>e.disable!==!0&&(I.value===!0||e.expandIconToggle===!0)),X=o(()=>({expanded:l.value===!0,detailsId:e.targetUid,toggle:L,show:K,hide:C})),Q=o(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:s.lang.label[l.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":l.value===!0?"true":"false","aria-controls":x,"aria-label":t}});T(()=>e.group,t=>{_!==void 0&&_(),t!==void 0&&p()});function Y(t){I.value!==!0&&L(t),r("click",t)}function Z(t){t.keyCode===13&&B(t,!0)}function B(t,d){d!==!0&&b.value!==null&&b.value.focus(),L(t),Le(t)}function ee(){r("afterShow")}function te(){r("afterHide")}function p(){f===void 0&&(f=P()),l.value===!0&&(m[e.group]=f);const t=T(l,k=>{k===!0?m[e.group]=f:m[e.group]===f&&delete m[e.group]}),d=T(()=>m[e.group],(k,re)=>{re===f&&k!==void 0&&k!==f&&C()});_=()=>{t(),d(),m[e.group]===f&&delete m[e.group],_=void 0}}function ae(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},d=[n(G,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&l.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:z.value})];return W.value===!0&&(Object.assign(t,{tabindex:0,...Q.value,onClick:B,onKeyup:Z}),d.unshift(n("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),n(y,t,()=>d)}function ne(){let t;return a.header!==void 0?t=[].concat(a.header(X.value)):(t=[n(y,()=>[n(S,{lines:e.labelLines},()=>e.label||""),e.caption?n(S,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](n(y,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>n(G,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](ae()),t}function oe(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:c.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return J.value===!0&&(t.clickable=!0,t.onClick=Y,Object.assign(t,I.value===!0?F.value:Q.value)),n(R,t,ne)}function le(){return Ie(n("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:U.value,id:x},ye(a.default)),[[ke,l.value]])}function ie(){const t=[oe(),n(we,{duration:e.duration,onShow:ee,onHide:te},le)];return e.expandSeparator===!0&&t.push(n(A,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:c.value}),n(A,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:c.value})),t}return e.group!==void 0&&p(),xe(()=>{_!==void 0&&_()}),()=>n("div",{class:M.value},[n("div",{class:"q-expansion-item__container relative-position"},ie())])}}),j={__name:"GoalListItemSections",props:{goal:{type:Object,required:!0}},setup(e){const a=e,r=o(()=>a.goal.tasks_target>1),s=o(()=>r.value?a.goal.tasks_performance/a.goal.tasks_target:0),c=o(()=>[a.goal.on_track+"%","Â·",a.goal.tasks_performance,"of",a.goal.tasks_target].join(" "));return(l,b)=>(u(),g(y,null,{default:i(()=>[h(S,null,{default:i(()=>[w(N(e.goal.name),1)]),_:1}),v(r)?(u(),g(S,{key:0,caption:""},{default:i(()=>[w(N(v(c)),1)]),_:1})):q("",!0),v(r)?(u(),g(S,{key:1},{default:i(()=>[h(qe,{value:v(s),color:"positive"},null,8,["value"])]),_:1})):q("",!0)]),_:1}))}},Be={__name:"GoalListItem",props:{goal:{type:Object,required:!0}},setup(e){const a=e,r={name:"goal",params:{id:a.goal.id}},s=o(()=>a.goal.children&&a.goal.children.length);return(c,l)=>{const b=Te("GoalListItem",!0);return v(s)?(u(),g(Qe,{key:0,to:r,"content-inset-level":.5,"default-opened":"","expand-icon-toggle":"","expand-icon":"keyboard_arrow_right","expanded-icon":"keyboard_arrow_down"},{header:i(()=>[h(j,{goal:e.goal},null,8,["goal"])]),default:i(()=>[h(E,null,{default:i(()=>[(u(!0),D(H,null,V(e.goal.children,x=>(u(),g(b,{key:x.id,goal:x},null,8,["goal"]))),128))]),_:1})]),_:1},8,["content-inset-level"])):(u(),g(R,{key:1,to:r},{default:i(()=>[h(j,{goal:e.goal},null,8,["goal"])]),_:1}))}}},je={__name:"GoalsView",setup(e){const a=ce();return(r,s)=>(u(),g(de,{padding:""},{default:i(()=>[h(se,null,{default:i(()=>[h(ue,null,{default:i(()=>[w("Goals")]),_:1})]),_:1}),v(a).tree?(u(),g(E,{key:0},{default:i(()=>[(u(!0),D(H,null,V(v(a).tree,c=>(u(),g(Be,{key:c.id,goal:c},null,8,["goal"]))),128))]),_:1})):q("",!0)]),_:1}))}};export{je as default};
